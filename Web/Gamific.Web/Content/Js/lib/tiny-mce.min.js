!function(n,t){"use strict";function sf(n,t){for(var r,u=[],i=0;i<n.length;++i){if(r=st[n[i]]||hf(n[i]),!r)throw"module definition dependecy not found: "+n[i];u.push(r)}t.apply(null,u)}function i(n,i,r){if("string"!=typeof n)throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(r===t)throw"invalid module definition, definition function must be specified";sf(i,function(){st[n]=r.apply(null,arguments)})}function hf(t){for(var i=n,u=t.split(/[.\/]/),r=0;r<u.length;++r){if(!i[u[r]])return;i=i[u[r]]}return i}function cf(i){for(var e=0;e<i.length;e++){for(var u=n,o=i[e],r=o.split(/[.\/]/),f=0;f<r.length-1;++f)u[r[f]]===t&&(u[r[f]]={}),u=u[r[f]];u[r[r.length-1]]=st[o]}}var st={},y="tinymce/dom/EventUtils",ht="tinymce/dom/Sizzle",u="tinymce/Env",r="tinymce/util/Tools",g="tinymce/dom/DomQuery",ri="tinymce/html/Styles",s="tinymce/dom/TreeWalker",ui="tinymce/dom/Range",c="tinymce/html/Entities",kr="tinymce/dom/StyleSheetLoader",o="tinymce/dom/DOMUtils",nt="tinymce/dom/ScriptLoader",ct="tinymce/AddOnManager",h="tinymce/dom/RangeUtils",dr="tinymce/NodeChange",p="tinymce/html/Node",l="tinymce/html/Schema",lt="tinymce/html/SaxParser",at="tinymce/html/DomParser",fi="tinymce/html/Writer",tt="tinymce/html/Serializer",ei="tinymce/dom/Serializer",oi="tinymce/dom/TridentSelection",it="tinymce/util/VK",si="tinymce/dom/ControlSelection",rt="tinymce/dom/BookmarkManager",hi="tinymce/dom/Selection",vt="tinymce/dom/ElementUtils",gr="tinymce/fmt/Preview",ci="tinymce/Formatter",li="tinymce/UndoManager",ai="tinymce/EnterKey",vi="tinymce/ForceBlocks",yi="tinymce/EditorCommands",yt="tinymce/util/URI",w="tinymce/util/Class",pt="tinymce/util/EventDispatcher",wt="tinymce/ui/Selector",bt="tinymce/ui/Collection",f="tinymce/ui/DomUtils",a="tinymce/ui/Control",b="tinymce/ui/Factory",pi="tinymce/ui/KeyboardNavigation",v="tinymce/ui/Container",k="tinymce/ui/DragHelper",wi="tinymce/ui/Scrollable",ut="tinymce/ui/Panel",kt="tinymce/ui/Movable",bi="tinymce/ui/Resizable",d="tinymce/ui/FloatPanel",dt="tinymce/ui/Window",ki="tinymce/ui/MessageBox",di="tinymce/WindowManager",gi="tinymce/util/Quirks",ft="tinymce/util/Observable",nr="tinymce/EditorObservable",tr="tinymce/Shortcuts",ir="tinymce/Editor",rr="tinymce/util/I18n",ur="tinymce/FocusManager",et="tinymce/EditorManager",nu="tinymce/LegacyInput",fr="tinymce/util/XHR",er="tinymce/util/JSON",tu="tinymce/util/JSONRequest",iu="tinymce/util/JSONP",ru="tinymce/util/LocalStorage",uu="tinymce/Compat",gt="tinymce/ui/Layout",ot="tinymce/ui/AbsoluteLayout",or="tinymce/ui/Tooltip",e="tinymce/ui/Widget",ni="tinymce/ui/Button",fu="tinymce/ui/ButtonGroup",sr="tinymce/ui/Checkbox",ti="tinymce/ui/ComboBox",eu="tinymce/ui/ColorBox",hr="tinymce/ui/PanelButton",ou="tinymce/ui/ColorButton",cr="tinymce/util/Color",su="tinymce/ui/ColorPicker",lr="tinymce/ui/Path",hu="tinymce/ui/ElementPath",ar="tinymce/ui/FormItem",vr="tinymce/ui/Form",cu="tinymce/ui/FieldSet",lu="tinymce/ui/FilePicker",au="tinymce/ui/FitLayout",vu="tinymce/ui/FlexLayout",yr="tinymce/ui/FlowLayout",yu="tinymce/ui/FormatControls",pu="tinymce/ui/GridLayout",wu="tinymce/ui/Iframe",bu="tinymce/ui/Label",pr="tinymce/ui/Toolbar",wr="tinymce/ui/MenuBar",ii="tinymce/ui/MenuButton",ku="tinymce/ui/ListBox",br="tinymce/ui/MenuItem",du="tinymce/ui/Menu",gu="tinymce/ui/Radio",nf="tinymce/ui/ResizeHandle",tf="tinymce/ui/Spacer",rf="tinymce/ui/SplitButton",uf="tinymce/ui/StackLayout",ff="tinymce/ui/TabPanel",ef="tinymce/ui/TextBox",of="tinymce/ui/Throbber";i(y,[],function(){function t(n,t,i,r){n.addEventListener?n.addEventListener(t,i,r||!1):n.attachEvent&&n.attachEvent("on"+t,i)}function r(n,t,i,r){n.removeEventListener?n.removeEventListener(t,i,r||!1):n.detachEvent&&n.detachEvent("on"+t,i)}function n(n,t){function s(){return!1}function h(){return!0}var f,i=t||{},c;for(f in n)o[f]||(i[f]=n[f]);if(i.target||(i.target=i.srcElement||document),n&&e.test(n.type)&&n.pageX===c&&n.clientX!==c){var l=i.target.ownerDocument||document,r=l.documentElement,u=l.body;i.pageX=n.clientX+(r&&r.scrollLeft||u&&u.scrollLeft||0)-(r&&r.clientLeft||u&&u.clientLeft||0);i.pageY=n.clientY+(r&&r.scrollTop||u&&u.scrollTop||0)-(r&&r.clientTop||u&&u.clientTop||0)}return i.preventDefault=function(){i.isDefaultPrevented=h;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},i.stopPropagation=function(){i.isPropagationStopped=h;n&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0)},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=h;i.stopPropagation()},i.isDefaultPrevented||(i.isDefaultPrevented=s,i.isPropagationStopped=s,i.isImmediatePropagationStopped=s),i}function u(n,i,u){function e(){u.domLoaded||(u.domLoaded=!0,i(h))}function o(){("complete"===f.readyState||"interactive"===f.readyState&&f.body)&&(r(f,"readystatechange",o),e())}function s(){try{f.documentElement.doScroll("left")}catch(n){return void setTimeout(s,0)}e()}var f=n.document,h={type:"ready"};return u.domLoaded?void i(h):(f.addEventListener?"complete"===f.readyState?e():t(n,"DOMContentLoaded",e):(t(f,"readystatechange",o),f.documentElement.doScroll&&n.self===n.top&&s()),void t(n,"load",e))}function i(){function s(n,t){var u,i,f,r,e=o[t];if(u=e&&e[n.type])for(i=0,f=u.length;f>i;i++)if(r=u[i],r&&r.func.call(r.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}var i=this,o={},h,e,c,l,a;e=f+(+new Date).toString(32);l="onmouseenter"in document.documentElement;c="onfocusin"in document.documentElement;a={mouseenter:"mouseover",mouseleave:"mouseout"};h=1;i.domLoaded=!1;i.events=o;i.bind=function(r,f,v,y){function it(t){s(n(t||tt.event),w)}var w,b,nt,p,k,d,g,tt=window;if(r&&3!==r.nodeType&&8!==r.nodeType){for(r[e]?w=r[e]:(w=h++,r[e]=w,o[w]={}),y=y||r,f=f.split(" "),nt=f.length;nt--;)p=f[nt],d=it,k=g=!1,"DOMContentLoaded"===p&&(p="ready"),i.domLoaded&&"ready"===p&&"complete"==r.readyState?v.call(y,n({type:p})):(l||(k=a[p],k&&(d=function(t){var r,i;if(r=t.currentTarget,i=t.relatedTarget,i&&r.contains)i=r.contains(i);else for(;i&&i!==r;)i=i.parentNode;i||(t=n(t||tt.event),t.type="mouseout"===t.type?"mouseleave":"mouseenter",t.target=r,s(t,w))})),c||"focusin"!==p&&"focusout"!==p||(g=!0,k="focusin"===p?"focus":"blur",d=function(t){t=n(t||tt.event);t.type="focus"===t.type?"focusin":"focusout";s(t,w)}),b=o[w][p],b?"ready"===p&&i.domLoaded?v({type:p}):b.push({func:v,scope:y}):(o[w][p]=b=[{func:v,scope:y}],b.fakeName=k,b.capture=g,b.nativeHandler=d,"ready"===p?u(r,d,i):t(r,k||p,d,g)));return r=b=0,v}};i.unbind=function(n,t,u){var l,f,a,c,s,h;if(!n||3===n.nodeType||8===n.nodeType)return i;if(l=n[e]){if(h=o[l],t){for(t=t.split(" "),a=t.length;a--;)if(s=t[a],f=h[s]){if(u)for(c=f.length;c--;)if(f[c].func===u){var v=f.nativeHandler,y=f.fakeName,p=f.capture;f=f.slice(0,c).concat(f.slice(c+1));f.nativeHandler=v;f.fakeName=y;f.capture=p;h[s]=f}u&&0!==f.length||(delete h[s],r(n,f.fakeName||s,f.nativeHandler,f.capture))}}else{for(s in h)f=h[s],r(n,f.fakeName||s,f.nativeHandler,f.capture);h={}}for(s in h)return i;delete o[l];try{delete n[e]}catch(w){n[e]=null}}return i};i.fire=function(t,r,u){var f;if(!t||3===t.nodeType||8===t.nodeType)return i;u=n(null,u);u.type=r;u.target=t;do f=t[e],f&&s(u,f),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow;while(t&&!u.isPropagationStopped());return i};i.clean=function(n){var t,r,u=i.unbind;if(!n||3===n.nodeType||8===n.nodeType)return i;if(n[e]&&u(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName)for(u(n),r=n.getElementsByTagName("*"),t=r.length;t--;)n=r[t],n[e]&&u(n);return i};i.destroy=function(){o={}};i.cancel=function(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}}var f="mce-data-",e=/^(?:mouse|contextmenu)|click/,o={keyLocation:1,layerX:1,layerY:1,returnValue:1};return i.Event=new i,i.Event.bind(window,"ready",function(){}),i});i(ht,[],function(){function r(n,t,i,r){var p,s,c,v,w,y,k,l,nt,g;if((t?t.ownerDocument||t:h)!==e&&b(t),t=t||e,i=i||[],!n||"string"!=typeof n)return i;if(1!==(v=t.nodeType)&&9!==v)return[];if(a&&!r){if(p=lr.exec(n))if(c=p[1]){if(9===v){if(s=t.getElementById(c),!s||!s.parentNode)return i;if(s.id===c)return i.push(s),i}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(c))&&et(t,s)&&s.id===c)return i.push(s),i}else{if(p[2])return d.apply(i,t.getElementsByTagName(n)),i;if((c=p[3])&&u.getElementsByClassName)return d.apply(i,t.getElementsByClassName(c)),i}if(u.qsa&&(!o||!o.test(n))){if(l=k=f,nt=t,g=9===v&&n,1===v&&"object"!==t.nodeName.toLowerCase()){for(y=ft(n),(k=t.getAttribute("id"))?l=k.replace(ar,"\\$&"):t.setAttribute("id",l),l="[id='"+l+"'] ",w=y.length;w--;)y[w]=l+ht(y[w]);nt=ei.test(n)&&kt(t.parentNode)||t;g=y.join(",")}if(g)try{return d.apply(i,nt.querySelectorAll(g)),i}catch(tt){}finally{k||t.removeAttribute("id")}}}return ci(n.replace(yt,"$1"),t,i,r)}function wt(){function t(r,u){return i.push(r+" ")>n.cacheLength&&delete t[i.shift()],t[r+" "]=u}var i=[];return t}function s(n){return n[f]=!0,n}function c(n){var t=e.createElement("div");try{return!!n(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function bt(t,i){for(var u=t.split("|"),r=t.length;r--;)n.attrHandle[u[r]]=i}function oi(n,t){var i=t&&n,r=i&&1===n.nodeType&&1===t.nodeType&&(~t.sourceIndex||yi)-(~n.sourceIndex||yi);if(r)return r;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return n?1:-1}function bi(n){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===n}}function ki(n){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===n}}function g(n){return s(function(t){return t=+t,s(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function kt(n){return n&&typeof n.getElementsByTagName!==ot&&n}function si(){}function ht(n){for(var t=0,r=n.length,i="";r>t;t++)i+=n[t].value;return i}function dt(n,t,i){var r=t.dir,u=i&&"parentNode"===r,e=nr++;return t.first?function(t,i,f){for(;t=t[r];)if(1===t.nodeType||u)return n(t,i,f)}:function(t,i,o){var s,h,c=[v,e];if(o){for(;t=t[r];)if((1===t.nodeType||u)&&n(t,i,o))return!0}else for(;t=t[r];)if(1===t.nodeType||u){if(h=t[f]||(t[f]={}),(s=h[r])&&s[0]===v&&s[1]===e)return c[2]=s[2];if(h[r]=c,c[2]=n(t,i,o))return!0}}}function gt(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function di(n,t,i){for(var u=0,f=t.length;f>u;u++)r(n,t[u],i);return i}function ct(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=null!=t;s>f;f++)(e=n[f])&&(!i||i(e,r,u))&&(o.push(e),h&&t.push(f));return o}function ni(n,t,i,r,u,e){return r&&!r[f]&&(r=ni(r)),u&&!u[f]&&(u=ni(u,e)),s(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,b=f||di(t||"*",o.nodeType?[o]:o,[]),v=!n||!f&&t?b:ct(b,p,n,o,s),h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=ct(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?tt.call(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=ct(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):d.apply(e,h)})}function ti(t){for(var s,u,r,o=t.length,h=n.relative[t[0].type],c=h||n.relative[" "],i=h?1:0,l=dt(function(n){return n===s},c,!0),a=dt(function(n){return tt.call(s,n)>-1},c,!0),e=[function(n,t,i){return!h&&(i||t!==at)||((s=t).nodeType?l(n,t,i):a(n,t,i))}];o>i;i++)if(u=n.relative[t[i].type])e=[dt(gt(e),u)];else{if(u=n.filter[t[i].type].apply(null,t[i].matches),u[f]){for(r=++i;o>r&&!n.relative[t[r].type];r++);return ni(i>1&&gt(e),i>1&&ht(t.slice(0,i-1).concat({value:" "===t[i-2].type?"*":""})).replace(yt,"$1"),u,r>i&&ti(t.slice(i,r)),o>r&&ti(t=t.slice(r)),o>r&&ht(t))}e.push(u)}return gt(e)}function gi(t,i){var u=i.length>0,f=t.length>0,o=function(o,s,h,c,l){var y,k,w,b=0,a="0",g=o&&[],p=[],nt=at,tt=o||f&&n.find.TAG("*",l),it=v+=null==nt?1:Math.random()||.1,rt=tt.length;for(l&&(at=s!==e&&s);a!==rt&&null!=(y=tt[a]);a++){if(f&&y){for(k=0;w=t[k++];)if(w(y,s,h)){c.push(y);break}l&&(v=it)}u&&((y=!w&&y)&&b--,o&&g.push(y))}if(b+=a,u&&a!==b){for(k=0;w=i[k++];)w(g,p,s,h);if(o){if(b>0)for(;a--;)g[a]||p[a]||(p[a]=ir.call(c));p=ct(p)}d.apply(c,p);l&&!o&&p.length>0&&b+i.length>1&&r.uniqueSort(c)}return l&&(v=it,at=nt),g};return u?s(o):o}var rt,u,n,lt,hi,ft,ii,ci,at,w,ut,b,e,l,a,o,nt,vt,et,f="sizzle"+-new Date,h=window.document,v=0,nr=0,li=wt(),ai=wt(),vi=wt(),ri=function(n,t){return n===t&&(ut=!0),0},ot=typeof t,yi=-2147483648,tr={}.hasOwnProperty,k=[],ir=k.pop,rr=k.push,d=k.push,pi=k.slice,tt=k.indexOf||function(n){for(var t=0,i=this.length;i>t;t++)if(this[t]===n)return t;return-1},ui="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",i="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",wi="\\["+i+"*("+it+")(?:"+i+"*([*^$|!~]?=)"+i+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+i+"*\\]",fi=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+wi+")*)|.*)\\)|)",yt=new RegExp("^"+i+"+|((?:^|[^\\\\])(?:\\\\.)*)"+i+"+$","g"),ur=new RegExp("^"+i+"*,"+i+"*"),fr=new RegExp("^"+i+"*([>+~]|"+i+")"+i+"*"),er=new RegExp("="+i+"*([^\\]'\"]*?)"+i+"*\\]","g"),or=new RegExp(fi),sr=new RegExp("^"+it+"$"),pt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+wi),PSEUDO:new RegExp("^"+fi),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+i+"*(even|odd|(([+-]|)(\\d*)n|)"+i+"*(?:([+-]|)"+i+"*(\\d+)|))"+i+"*\\)|)","i"),bool:new RegExp("^(?:"+ui+")$","i"),needsContext:new RegExp("^"+i+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+i+"*((?:-\\d)?\\d*)"+i+"*\\)|)(?=[^-]|$)","i")},hr=/^(?:input|select|textarea|button)$/i,cr=/^h\d$/i,st=/^[^{]+\{\s*\[native \w/,lr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ei=/[+~]/,ar=/'|\\/g,y=new RegExp("\\\\([\\da-f]{1,6}"+i+"?|("+i+")|.)","ig"),p=function(n,t,i){var r="0x"+t-65536;return r!==r||i?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{d.apply(k=pi.call(h.childNodes),h.childNodes);k[h.childNodes.length].nodeType}catch(vr){d={apply:k.length?function(n,t){rr.apply(n,pi.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}u=r.support={};hi=r.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?"HTML"!==t.nodeName:!1};b=r.setDocument=function(t){var v,r=t?t.ownerDocument||t:h,s=r.defaultView;return r!==e&&9===r.nodeType&&r.documentElement?(e=r,l=r.documentElement,a=!hi(r),s&&s!==s.top&&(s.addEventListener?s.addEventListener("unload",function(){b()},!1):s.attachEvent&&s.attachEvent("onunload",function(){b()})),u.attributes=c(function(n){return n.className="i",!n.getAttribute("className")}),u.getElementsByTagName=c(function(n){return n.appendChild(r.createComment("")),!n.getElementsByTagName("*").length}),u.getElementsByClassName=st.test(r.getElementsByClassName),u.getById=c(function(n){return l.appendChild(n).id=f,!r.getElementsByName||!r.getElementsByName(f).length}),u.getById?(n.find.ID=function(n,t){if(typeof t.getElementById!==ot&&a){var i=t.getElementById(n);return i&&i.parentNode?[i]:[]}},n.filter.ID=function(n){var t=n.replace(y,p);return function(n){return n.getAttribute("id")===t}}):(delete n.find.ID,n.filter.ID=function(n){var t=n.replace(y,p);return function(n){var i=typeof n.getAttributeNode!==ot&&n.getAttributeNode("id");return i&&i.value===t}}),n.find.TAG=u.getElementsByTagName?function(n,t){if(typeof t.getElementsByTagName!==ot)return t.getElementsByTagName(n)}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if("*"===n){for(;i=u[f++];)1===i.nodeType&&r.push(i);return r}return u},n.find.CLASS=u.getElementsByClassName&&function(n,t){if(a)return t.getElementsByClassName(n)},nt=[],o=[],(u.qsa=st.test(r.querySelectorAll))&&(c(function(n){n.innerHTML="<select msallowcapture=''><option selected=''><\/option><\/select>";n.querySelectorAll("[msallowcapture^='']").length&&o.push("[*^$]="+i+"*(?:''|\"\")");n.querySelectorAll("[selected]").length||o.push("\\["+i+"*(?:value|"+ui+")");n.querySelectorAll(":checked").length||o.push(":checked")}),c(function(n){var t=r.createElement("input");t.setAttribute("type","hidden");n.appendChild(t).setAttribute("name","D");n.querySelectorAll("[name=d]").length&&o.push("name"+i+"*[*^$|!~]?=");n.querySelectorAll(":enabled").length||o.push(":enabled",":disabled");n.querySelectorAll("*,:x");o.push(",.*:")})),(u.matchesSelector=st.test(vt=l.matches||l.webkitMatchesSelector||l.mozMatchesSelector||l.oMatchesSelector||l.msMatchesSelector))&&c(function(n){u.disconnectedMatch=vt.call(n,"div");vt.call(n,"[s!='']:x");nt.push("!=",fi)}),o=o.length&&new RegExp(o.join("|")),nt=nt.length&&new RegExp(nt.join("|")),v=st.test(l.compareDocumentPosition),et=v||st.test(l.contains)?function(n,t){var r=9===n.nodeType?n.documentElement:n,i=t&&t.parentNode;return n===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):n.compareDocumentPosition&&16&n.compareDocumentPosition(i)))}:function(n,t){if(t)for(;t=t.parentNode;)if(t===n)return!0;return!1},ri=v?function(n,t){if(n===t)return ut=!0,0;var i=!n.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(n.ownerDocument||n)===(t.ownerDocument||t)?n.compareDocumentPosition(t):1,1&i||!u.sortDetached&&t.compareDocumentPosition(n)===i?n===r||n.ownerDocument===h&&et(h,n)?-1:t===r||t.ownerDocument===h&&et(h,t)?1:w?tt.call(w,n)-tt.call(w,t):0:4&i?-1:1)}:function(n,t){if(n===t)return ut=!0,0;var i,u=0,o=n.parentNode,s=t.parentNode,f=[n],e=[t];if(!o||!s)return n===r?-1:t===r?1:o?-1:s?1:w?tt.call(w,n)-tt.call(w,t):0;if(o===s)return oi(n,t);for(i=n;i=i.parentNode;)f.unshift(i);for(i=t;i=i.parentNode;)e.unshift(i);for(;f[u]===e[u];)u++;return u?oi(f[u],e[u]):f[u]===h?-1:e[u]===h?1:0},r):e};r.matches=function(n,t){return r(n,null,null,t)};r.matchesSelector=function(n,t){if((n.ownerDocument||n)!==e&&b(n),t=t.replace(er,"='$1']"),!(!u.matchesSelector||!a||nt&&nt.test(t)||o&&o.test(t)))try{var i=vt.call(n,t);if(i||u.disconnectedMatch||n.document&&11!==n.document.nodeType)return i}catch(f){}return r(t,e,null,[n]).length>0};r.contains=function(n,t){return(n.ownerDocument||n)!==e&&b(n),et(n,t)};r.attr=function(i,r){(i.ownerDocument||i)!==e&&b(i);var o=n.attrHandle[r.toLowerCase()],f=o&&tr.call(n.attrHandle,r.toLowerCase())?o(i,r,!a):t;return f!==t?f:u.attributes||!a?i.getAttribute(r):(f=i.getAttributeNode(r))&&f.specified?f.value:null};r.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};r.uniqueSort=function(n){var r,f=[],t=0,i=0;if(ut=!u.detectDuplicates,w=!u.sortStable&&n.slice(0),n.sort(ri),ut){for(;r=n[i++];)r===n[i]&&(t=f.push(i));for(;t--;)n.splice(f[t],1)}return w=null,n};lt=r.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(1===t||9===t||11===t){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=lt(n)}else if(3===t||4===t)return n.nodeValue}else for(;r=n[u++];)i+=lt(r);return i};n=r.selectors={cacheLength:50,createPseudo:s,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(y,p),n[3]=(n[3]||n[4]||n[5]||"").replace(y,p),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||r.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&r.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return pt.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&or.test(t)&&(i=ft(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(y,p).toLowerCase();return"*"===n?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=li[n+" "];return t||(t=new RegExp("(^|"+i+")"+n+"("+i+"|$)"))&&li(n,function(n){return t.test("string"==typeof n.className&&n.className||typeof n.getAttribute!==ot&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(u){var f=r.attr(u,n);return null==f?"!="===t:t?(f+="","="===t?f===i:"!="===t?f!==i:"^="===t?i&&0===f.indexOf(i):"*="===t?i&&f.indexOf(i)>-1:"$="===t?i&&f.slice(-i.length)===i:"~="===t?(" "+f+" ").indexOf(i)>-1:"|="===t?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s="nth"!==n.slice(0,3),o="last"!==n.slice(-4),e="of-type"===t;return 1===r&&0===u?function(n){return!!n.parentNode}:function(t,i,h){var a,k,c,l,y,w,b=s!==o?"nextSibling":"previousSibling",p=t.parentNode,g=e&&t.nodeName.toLowerCase(),d=!h&&!e;if(p){if(s){for(;b;){for(c=t;c=c[b];)if(e?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;w=b="only"===n&&!w&&"nextSibling"}return!0}if(w=[o?p.firstChild:p.lastChild],o&&d){for(k=p[f]||(p[f]={}),a=k[n]||[],y=a[0]===v&&a[1],l=a[0]===v&&a[2],c=y&&p.childNodes[y];c=++y&&c&&c[b]||(l=y=0)||w.pop();)if(1===c.nodeType&&++l&&c===t){k[n]=[v,y,l];break}}else if(d&&(a=(t[f]||(t[f]={}))[n])&&a[0]===v)l=a[1];else for(;(c=++y&&c&&c[b]||(l=y=0)||w.pop())&&((e?c.nodeName.toLowerCase()!==g:1!==c.nodeType)||!++l||(d&&((c[f]||(c[f]={}))[n]=[v,l]),c!==t)););return l-=u,l===r||l%r==0&&l/r>=0}}},PSEUDO:function(t,i){var e,u=n.pseudos[t]||n.setFilters[t.toLowerCase()]||r.error("unsupported pseudo: "+t);return u[f]?u(i):u.length>1?(e=[t,t,"",i],n.setFilters.hasOwnProperty(t.toLowerCase())?s(function(n,t){for(var r,f=u(n,i),e=f.length;e--;)r=tt.call(n,f[e]),n[r]=!(t[r]=f[e])}):function(n){return u(n,0,e)}):u}},pseudos:{not:s(function(n){var i=[],r=[],t=ii(n.replace(yt,"$1"));return t[f]?s(function(n,i,r,u){for(var e,o=t(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(i[f]=e))}):function(n,u,f){return i[0]=n,t(i,null,f,r),!r.pop()}}),has:s(function(n){return function(t){return r(n,t).length>0}}),contains:s(function(n){return n=n.replace(y,p),function(t){return(t.textContent||t.innerText||lt(t)).indexOf(n)>-1}}),lang:s(function(n){return sr.test(n||"")||r.error("unsupported lang: "+n),n=n.replace(y,p).toLowerCase(),function(t){var i;do if(i=a?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===n||0===i.indexOf(n+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(n){var t=window.location&&window.location.hash;return t&&t.slice(1)===n.id},root:function(n){return n===l},focus:function(n){return n===e.activeElement&&(!e.hasFocus||e.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&!!n.checked||"option"===t&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(n){return cr.test(n.nodeName)},input:function(n){return hr.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&"button"===n.type||"button"===t},text:function(n){var t;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(t=n.getAttribute("type"))||"text"===t.toLowerCase())},first:g(function(){return[0]}),last:g(function(n,t){return[t-1]}),eq:g(function(n,t,i){return[0>i?i+t:i]}),even:g(function(n,t){for(var i=0;t>i;i+=2)n.push(i);return n}),odd:g(function(n,t){for(var i=1;t>i;i+=2)n.push(i);return n}),lt:g(function(n,t,i){for(var r=0>i?i+t:i;--r>=0;)n.push(r);return n}),gt:g(function(n,t,i){for(var r=0>i?i+t:i;++r<t;)n.push(r);return n})}};n.pseudos.nth=n.pseudos.eq;for(rt in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[rt]=bi(rt);for(rt in{submit:!0,reset:!0})n.pseudos[rt]=ki(rt);return si.prototype=n.filters=n.pseudos,n.setFilters=new si,ft=r.tokenize=function(t,i){var e,f,s,o,u,h,c,l=ai[t+" "];if(l)return i?0:l.slice(0);for(u=t,h=[],c=n.preFilter;u;){(!e||(f=ur.exec(u)))&&(f&&(u=u.slice(f[0].length)||u),h.push(s=[]));e=!1;(f=fr.exec(u))&&(e=f.shift(),s.push({value:e,type:f[0].replace(yt," ")}),u=u.slice(e.length));for(o in n.filter)(f=pt[o].exec(u))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),u=u.slice(e.length));if(!e)break}return i?u.length:u?r.error(t):ai(t,h).slice(0)},ii=r.compile=function(n,t){var r,u=[],e=[],i=vi[n+" "];if(!i){for(t||(t=ft(n)),r=t.length;r--;)i=ti(t[r]),i[f]?u.push(i):e.push(i);i=vi(n,gi(e,u));i.selector=n}return i},ci=r.select=function(t,i,r,f){var s,e,o,l,v,c="function"==typeof t&&t,h=!f&&ft(t=c.selector||t);if(r=r||[],1===h.length){if(e=h[0]=h[0].slice(0),e.length>2&&"ID"===(o=e[0]).type&&u.getById&&9===i.nodeType&&a&&n.relative[e[1].type]){if(i=(n.find.ID(o.matches[0].replace(y,p),i)||[])[0],!i)return r;c&&(i=i.parentNode);t=t.slice(e.shift().value.length)}for(s=pt.needsContext.test(t)?0:e.length;s--&&(o=e[s],!n.relative[l=o.type]);)if((v=n.find[l])&&(f=v(o.matches[0].replace(y,p),ei.test(e[0].type)&&kt(i.parentNode)||i))){if(e.splice(s,1),t=f.length&&ht(e),!t)return d.apply(r,f),r;break}}return(c||ii(t,h))(f,i,!a,r,ei.test(t)&&kt(i.parentNode)||i),r},u.sortStable=f.split("").sort(ri).join("")===f,u.detectDuplicates=!!ut,b(),u.sortDetached=c(function(n){return 1&n.compareDocumentPosition(e.createElement("div"))}),c(function(n){return n.innerHTML="<a href='#'><\/a>","#"===n.firstChild.getAttribute("href")})||bt("type|href|height|width",function(n,t,i){if(!i)return n.getAttribute(t,"type"===t.toLowerCase()?1:2)}),u.attributes&&c(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),""===n.firstChild.getAttribute("value")})||bt("value",function(n,t,i){if(!i&&"input"===n.nodeName.toLowerCase())return n.defaultValue}),c(function(n){return null==n.getAttribute("disabled")})||bt(ui,function(n,t,i){var r;if(!i)return n[t]===!0?t.toLowerCase():(r=n.getAttributeNode(t))&&r.specified?r.value:null}),r});i(u,[],function(){var f=navigator,n=f.userAgent,e,i,t,r,u,s,h,o,c,l;return e=window.opera&&window.opera.buildNumber,c=/Android/.test(n),i=/WebKit/.test(n),t=!i&&!e&&/MSIE/gi.test(n)&&/Explorer/gi.test(f.appName),t=t&&/MSIE (\w+)\./.exec(n)[1],r=-1==n.indexOf("Trident/")||-1==n.indexOf("rv:")&&-1==f.appName.indexOf("Netscape")?!1:11,u=!document.msElementsFromPoint||t||r?!1:12,t=t||r||u,s=!i&&!r&&/Gecko/.test(n),h=-1!=n.indexOf("Mac"),o=/(iPad|iPhone)/.test(n),u&&(i=!1),l=!o||n.match(/AppleWebKit\/(\d*)/)[1]>=534,{opera:e,webkit:i,ie:t,gecko:s,mac:h,iOS:o,android:c,contentEditable:l,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=t,range:window.getSelection&&"Range"in window,documentMode:t&&!u?document.documentMode||7:10}});i(r,[u],function(n){function u(n){return null===n||n===t?"":(""+n).replace(k,"")}function f(n,i){return i?"array"==i&&r(n)?!0:typeof n==i:n!==t}function s(n){var i=n,t,u;if(!r(n))for(i=[],t=0,u=n.length;u>t;t++)i[t]=n[t];return i}function h(n,t,i){var r;for(n=n||[],t=t||",","string"==typeof n&&(n=n.split(t)),i=i||{},r=n.length;r--;)i[n[r]]={};return i}function i(n,i,r){var u,f;if(!n)return 0;if(r=r||n,n.length!==t){for(u=0,f=n.length;f>u;u++)if(i.call(r,n[u],u,n)===!1)return 0}else for(u in n)if(n.hasOwnProperty(u)&&i.call(r,n[u],u,n)===!1)return 0;return 1}function e(n,t){var r=[];return i(n,function(n){r.push(t(n))}),r}function c(n,t){var r=[];return i(n,function(n){(!t||t(n))&&r.push(n)}),r}function l(n,t,i){var e=this,f,u,r,o,s,h=0;if(n=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(n),r=n[3].match(/(^|\.)(\w+)$/i)[2],u=e.createNS(n[3].replace(/\.\w+$/,""),i),!u[r]){if("static"==n[2])return u[r]=t,void(this.onCreate&&this.onCreate(n[2],n[3],u[r]));t[r]||(t[r]=function(){},h=1);u[r]=t[r];e.extend(u[r].prototype,t);n[5]&&(f=e.resolve(n[5]).prototype,o=n[5].match(/\.(\w+)$/i)[1],s=u[r],u[r]=h?function(){return f[o].apply(this,arguments)}:function(){return this.parent=f[o],s.apply(this,arguments)},u[r].prototype[r]=u[r],e.each(f,function(n,t){u[r].prototype[t]=f[t]}),e.each(t,function(n,t){f[t]?u[r].prototype[t]=function(){return this.parent=f[t],n.apply(this,arguments)}:t!=r&&(u[r].prototype[t]=n)}));e.each(t["static"],function(n,t){u[r][t]=n})}}function a(n,t){var i,r;if(n)for(i=0,r=n.length;r>i;i++)if(n[i]===t)return i;return-1}function v(n,i){for(var u,o=arguments,f,r=1,e=o.length;e>r;r++){i=o[r];for(u in i)i.hasOwnProperty(u)&&(f=i[u],f!==t&&(n[u]=f))}return n}function o(n,t,r,u){u=u||this;n&&(r&&(n=n[r]),i(n,function(n,i){return t.call(u,n,i,r)===!1?!1:void o(n,t,r,u)}))}function y(n,t){var i,r;for(t=t||window,n=n.split("."),i=0;i<n.length;i++)r=n[i],t[r]||(t[r]={}),t=t[r];return t}function p(n,t){var i,r;for(t=t||window,n=n.split("."),i=0,r=n.length;r>i&&(t=t[n[i]],t);i++);return t}function w(n,t){return!n||f(n,"array")?n:e(n.split(t||","),u)}function b(t){var i=n.cacheSuffix;return i&&(t+=(-1===t.indexOf("?")?"?":"&")+i),t}var k=/^\s*|\s*$/g,r=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};return{trim:u,isArray:r,is:f,toArray:s,makeMap:h,each:i,map:e,grep:c,inArray:a,extend:v,create:l,walk:o,createNS:y,resolve:p,explode:w,_addCacheSuffix:b}});i(g,[y,ht,r,u],function(n,i,r,u){function h(n){return"undefined"!=typeof n}function v(n){return"string"==typeof n}function et(n){return n&&n==n.window}function k(n,t){var i,u,r;for(t=t||ut,r=t.createElement("div"),i=t.createDocumentFragment(),r.innerHTML=n;u=r.firstChild;)i.appendChild(u);return i}function s(n,t,i,r){var u;if(v(t))t=k(t,y(n[0]));else if(t.length&&!t.nodeType){if(t=f.makeArray(t),r)for(u=t.length-1;u>=0;u--)s(n,t[u],i,r);else for(u=0;u<t.length;u++)s(n,t[u],i,r);return n}if(t.nodeType)for(u=n.length;u--;)i.call(n[u],t);return n}function d(n,t){return n&&t&&-1!==(" "+n.className+" ").indexOf(" "+t+" ")}function g(n,t,i){var u,r;return t=f(t)[0],n.each(function(){var n=this;i&&u==n.parentNode?r.appendChild(n):(u=n.parentNode,r=t.cloneNode(!1),n.parentNode.insertBefore(r,n),r.appendChild(n))}),n}function f(n,t){return new f.fn.init(n,t)}function ot(n,t){var i;if(t.indexOf)return t.indexOf(n);for(i=t.length;i--;)if(t[i]===n)return i;return-1}function nt(n){return null===n||n===o?"":(""+n).replace(vt,"")}function e(n,t){var f,u,r,e,i;if(n)if(f=n.length,f===e){for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],t.call(i,u,i)===!1))break}else for(r=0;f>r&&(i=n[r],t.call(i,r,i)!==!1);r++);return n}function tt(n,t){var i=[];return e(n,function(n,r){t(r,n)&&i.push(r)}),i}function y(n){return n?9==n.nodeType?n:n.ownerDocument:ut}function it(n,i,r){var e=[],u=n[i];for("string"!=typeof r&&r instanceof f&&(r=r[0]);u&&9!==u.nodeType;){if(r!==t){if(u===r)break;if("string"==typeof r&&f(u).is(r))break}1===u.nodeType&&e.push(u);u=u[i]}return e}function p(n,i,r,u){var e=[];for(u instanceof f&&(u=u[0]);n;n=n[i])if(!r||n.nodeType===r){if(u!==t){if(n===u)break;if("string"==typeof u&&f(n).is(u))break}e.push(n)}return e}function rt(n,t,i){for(n=n[t];n;n=n[t])if(n.nodeType==i)return n;return null}function w(n,t,i){e(i,function(i,r){n[i]=n[i]||{};n[i][t]=r})}var ut=document,b=Array.prototype.push,st=Array.prototype.slice,ht=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,c=n.Event,o,ct=r.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),lt=r.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),at={"for":"htmlFor","class":"className",readonly:"readOnly"},ft={float:"cssFloat"},l={},a={},vt=/^\s*|\s*$/g;return f.fn=f.prototype={constructor:f,selector:"",context:null,length:0,init:function(n,t){var i=this,u,r;if(!n)return i;if(n.nodeType)return i.context=i[0]=n,i.length=1,i;if(t&&t.nodeType)i.context=t;else{if(t)return f(n).attr(t);i.context=t=document}if(v(n)){if(i.selector=n,u="<"===n.charAt(0)&&">"===n.charAt(n.length-1)&&n.length>=3?[null,n,null]:ht.exec(n),!u)return f(t).find(n);if(u[1])for(r=k(n,y(t)).firstChild;r;)b.call(i,r),r=r.nextSibling;else{if(r=y(t).getElementById(u[2]),!r)return i;if(r.id!==u[2])return i.find(n);i.length=1;i[0]=r}}else this.add(n,!1);return i},toArray:function(){return r.toArray(this)},add:function(n,t){var i=this,u,r;if(v(n))return i.add(f(n));if(t!==!1)for(u=f.unique(i.toArray().concat(f.makeArray(n))),i.length=u.length,r=0;r<u.length;r++)i[r]=u[r];else b.apply(i,f.makeArray(n));return i},attr:function(n,t){var i=this,r;if("object"==typeof n)e(n,function(n,t){i.attr(n,t)});else{if(!h(t)){if(i[0]&&1===i[0].nodeType){if(r=l[n],r&&r.get)return r.get(i[0],n);if(lt[n])return i.prop(n)?n:o;t=i[0].getAttribute(n,2);null===t&&(t=o)}return t}this.each(function(){var i;if(1===this.nodeType){if(i=l[n],i&&i.set)return void i.set(this,t);null===t?this.removeAttribute(n,2):this.setAttribute(n,t,2)}})}return i},removeAttr:function(n){return this.attr(n,null)},prop:function(n,t){var i=this;if(n=at[n]||n,"object"==typeof n)e(n,function(n,t){i.prop(n,t)});else{if(!h(t))return i[0]&&i[0].nodeType&&n in i[0]?i[0][n]:t;this.each(function(){1==this.nodeType&&(this[n]=t)})}return i},css:function(n,t){function f(n){return n.replace(/-(\D)/g,function(n,t){return t.toUpperCase()})}function s(n){return n.replace(/[A-Z]/g,function(n){return"-"+n})}var u=this,r,i;if("object"==typeof n)e(n,function(n,t){u.css(n,t)});else if(h(t))n=f(n),"number"!=typeof t||ct[n]||(t+="px"),u.each(function(){var r=this.style;if(i=a[n],i&&i.set)return void i.set(this,t);try{this.style[ft[n]||n]=t}catch(u){}(null===t||""===t)&&(r.removeProperty?r.removeProperty(s(n)):r.removeAttribute(n))});else{if(r=u[0],i=a[n],i&&i.get)return i.get(r);if(r.ownerDocument.defaultView)try{return r.ownerDocument.defaultView.getComputedStyle(r,null).getPropertyValue(s(n))}catch(c){return o}else if(r.currentStyle)return r.currentStyle[f(n)]}return u},remove:function(){for(var i=this,n,t=this.length;t--;)n=i[t],c.clean(n),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){for(var i=this,n,t=this.length;t--;)for(n=i[t];n.firstChild;)n.removeChild(n.firstChild);return this},html:function(n){var t=this,i;if(h(n)){i=t.length;try{for(;i--;)t[i].innerHTML=n}catch(r){f(t[i]).empty().append(n)}return t}return t[0]?t[0].innerHTML:""},text:function(n){var t=this,i;if(h(n)){for(i=t.length;i--;)"innerText"in t[i]?t[i].innerText=n:t[0].textContent=n;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return s(this,arguments,function(n){1===this.nodeType&&this.appendChild(n)})},prepend:function(){return s(this,arguments,function(n){1===this.nodeType&&this.insertBefore(n,this.firstChild)},!0)},before:function(){var n=this;return n[0]&&n[0].parentNode?s(n,arguments,function(n){this.parentNode.insertBefore(n,this)}):n},after:function(){var n=this;return n[0]&&n[0].parentNode?s(n,arguments,function(n){this.parentNode.insertBefore(n,this.nextSibling)},!0):n},appendTo:function(n){return f(n).append(this),this},prependTo:function(n){return f(n).prepend(this),this},replaceWith:function(n){return this.before(n).remove()},wrap:function(n){return g(this,n)},wrapAll:function(n){return g(this,n,!0)},wrapInner:function(n){return this.each(function(){f(this).contents().wrapAll(n)}),this},unwrap:function(){return this.parent().each(function(){f(this).replaceWith(this.childNodes)})},clone:function(){var n=[];return this.each(function(){n.push(this.cloneNode(!0))}),f(n)},addClass:function(n){return this.toggleClass(n,!0)},removeClass:function(n){return this.toggleClass(n,!1)},toggleClass:function(n,t){var i=this;return"string"!=typeof n?i:(-1!==n.indexOf(" ")?e(n.split(" "),function(){i.toggleClass(this,t)}):i.each(function(i,r){var u,f;f=d(r,n);f!==t&&(u=r.className,f?r.className=nt((" "+u+" ").replace(" "+n+" "," ")):r.className+=u?" "+n:n)}),i)},hasClass:function(n){return d(this[0],n)},each:function(n){return e(this,n)},on:function(n,t){return this.each(function(){c.bind(this,n,t)})},off:function(n,t){return this.each(function(){c.unbind(this,n,t)})},trigger:function(n){return this.each(function(){"object"==typeof n?c.fire(this,n.type,n):c.fire(this,n)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new f(st.apply(this,arguments))},eq:function(n){return-1===n?this.slice(n):this.slice(n,+n+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(n){for(var r=[],t=0,i=this.length;i>t;t++)f.find(n,this[t],r);return f(r)},filter:function(n){return f("function"==typeof n?tt(this.toArray(),function(t,i){return n(i,t)}):f.filter(n,this.toArray()))},closest:function(n){var t=[];return n instanceof f&&(n=n[0]),this.each(function(i,r){for(;r;){if("string"==typeof n&&f(r).is(n)){t.push(r);break}if(r==n){t.push(r);break}r=r.parentNode}}),f(t)},offset:function(n){var t,r,i,f=0,e=0,u;return n?this.css(n):(t=this[0],t&&(r=t.ownerDocument,i=r.documentElement,t.getBoundingClientRect&&(u=t.getBoundingClientRect(),f=u.left+(i.scrollLeft||r.body.scrollLeft)-i.clientLeft,e=u.top+(i.scrollTop||r.body.scrollTop)-i.clientTop)),{left:f,top:e})},push:b,sort:[].sort,splice:[].splice},r.extend(f,{extend:r.extend,makeArray:function(n){return et(n)||n.nodeType?[n]:r.toArray(n)},inArray:ot,isArray:r.isArray,each:e,trim:nt,grep:tt,find:i,expr:i.selectors,unique:i.uniqueSort,text:i.getText,contains:i.contains,filter:function(n,t,i){var r=t.length;for(i&&(n=":not("+n+")");r--;)1!=t[r].nodeType&&t.splice(r,1);return 1===t.length?f.find.matchesSelector(t[0],n)?[t[0]]:[]:f.find.matches(n,t)}}),e({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return it(n,"parentNode")},next:function(n){return rt(n,"nextSibling",1)},prev:function(n){return rt(n,"previousSibling",1)},children:function(n){return p(n.firstChild,"nextSibling",1)},contents:function(n){return r.toArray(("iframe"===n.nodeName?n.contentDocument||n.contentWindow.document:n).childNodes)}},function(n,t){f.fn[n]=function(i){var u=this,r=[];return u.each(function(){var n=t.call(r,this,i,r);n&&(f.isArray(n)?r.push.apply(r,n):r.push(n))}),this.length>1&&(r=f.unique(r),0===n.indexOf("parents")&&(r=r.reverse())),r=f(r),i?r.filter(i):r}}),e({parentsUntil:function(n,t){return it(n,"parentNode",t)},nextUntil:function(n,t){return p(n,"nextSibling",1,t).slice(1)},prevUntil:function(n,t){return p(n,"previousSibling",1,t).slice(1)}},function(n,t){f.fn[n]=function(i,r){var e=this,u=[];return e.each(function(){var n=t.call(u,this,i,u);n&&(f.isArray(n)?u.push.apply(u,n):u.push(n))}),this.length>1&&(u=f.unique(u),(0===n.indexOf("parents")||"prevUntil"===n)&&(u=u.reverse())),u=f(u),r?u.filter(r):u}}),f.fn.is=function(n){return!!n&&this.filter(n).length>0},f.fn.init.prototype=f.fn,f.overrideDefaults=function(n){function i(r,u){return t=t||n(),0===arguments.length&&(r=t.element),u||(u=t.context),new i.fn.init(r,u)}var t;return f.extend(i,this),i},u.ie&&u.ie<8&&(w(l,"get",{maxlength:function(n){var t=n.maxLength;return 2147483647===t?o:t},size:function(n){var t=n.size;return 20===t?o:t},"class":function(n){return n.className},style:function(n){var t=n.style.cssText;return 0===t.length?o:t}}),w(l,"set",{"class":function(n,t){n.className=t},style:function(n,t){n.style.cssText=t}})),u.ie&&u.ie<9&&(ft.float="styleFloat",w(a,"set",{opacity:function(n,t){var i=n.style;null===t||""===t?i.removeAttribute("filter"):(i.zoom=1,i.filter="alpha(opacity="+100*t+")")}})),f.attrHooks=l,f.cssHooks=a,f});i(ri,[],function(){return function(n,t){function s(n,t,i,r){function u(n){return n=parseInt(n,10).toString(16),n.length>1?n:"0"+n}return"#"+u(t)+u(i)+u(r)}var h=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,v=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,c=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,a,i,r={},u,e,f,o="﻿";for(n=n||{},t&&(e=t.getValidStyles(),f=t.getInvalidStyles()),u=("\\\" \\' \\; \\: ; : "+o).split(" "),i=0;i<u.length;i++)r[u[i]]=o+i,r[o+i]=u[i];return{toHex:function(n){return n.replace(h,s)},parse:function(t){function o(n,t,r){var e,o,s,h,f;if(e=u[n+"-top"+t],e&&(o=u[n+"-right"+t],o&&(s=u[n+"-bottom"+t],s&&(h=u[n+"-left"+t])))){for(f=[e,o,s,h],i=f.length-1;i--&&f[i]===f[i+1];);i>-1&&r||(u[n+t]=-1==i?f[0]:f.join(" "),delete u[n+"-top"+t],delete u[n+"-right"+t],delete u[n+"-bottom"+t],delete u[n+"-left"+t])}}function y(n){var t=u[n],i;if(t){for(t=t.split(" "),i=t.length;i--;)if(t[i]!==t[0])return!1;return u[n]=t[0],!0}}function d(n,t,i,r){y(t)&&y(i)&&y(r)&&(u[n]=u[t]+" "+u[i]+" "+u[r],delete u[t],delete u[i],delete u[r])}function b(n){return w=!0,r[n]}function p(n,t){return w&&(n=n.replace(/\uFEFF[0-9]/g,function(n){return r[n]})),t||(n=n.replace(/\\([\'\";:])/g,"$1")),n}function g(t,i,r,u,f,e){if(f=f||e)return f=p(f),"'"+f.replace(/\'/g,"\\'")+"'";if(i=p(i||r||u),!n.allow_script_urls){var o=i.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(o)||!n.allow_svg_data_urls&&/^data:image\/svg/i.test(o))return""}return k&&(i=k.call(nt,i,"style")),"url('"+i.replace(/\'/g,"\\'")+"')"}var u={},a,e,f,w,k=n.url_converter,nt=n.url_converter_scope||this;if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,b).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(n){return n.replace(/[;:]/g,b)});a=c.exec(t);){if(e=a[1].replace(l,"").toLowerCase(),f=a[2].replace(l,""),f=f.replace(/\\[0-9a-f]+/g,function(n){return String.fromCharCode(parseInt(n.substr(1),16))}),e&&f.length>0){if(!n.allow_script_urls&&("behavior"==e||/expression\s*\(|\/\*|\*\//.test(f)))continue;"font-weight"===e&&"700"===f?f="bold":("color"===e||"background-color"===e)&&(f=f.toLowerCase());f=f.replace(h,s);f=f.replace(v,g);u[e]=w?p(f,!0):f}c.lastIndex=a.index+a[0].length}o("border","",!0);o("border","-width");o("border","-color");o("border","-style");o("padding","");o("margin","");d("border","border-width","border-style","border-color");"medium none"===u.border&&delete u.border;"none"===u["border-image"]&&delete u["border-image"]}return u},serialize:function(n,t){function o(t){var f,r,o,u;if(f=e[t])for(r=0,o=f.length;o>r;r++)t=f[r],u=n[t],u!==a&&u.length>0&&(i+=(i.length>0?" ":"")+t+": "+u+";")}function s(n,t){var i;return i=f["*"],i&&i[n]?!1:(i=f[t],i&&i[n]?!1:!0)}var i="",r,u;if(t&&e)o("*"),o(t);else for(r in n)u=n[r],u!==a&&u.length>0&&(!f||s(r,t))&&(i+=(i.length>0?" ":"")+r+": "+u+";");return i}}}});i(s,[],function(){return function(n,t){function r(n,i,r,u){var e,f;if(n){if(!u&&n[i])return n[i];if(n!=t){if(e=n[r])return e;for(f=n.parentNode;f&&f!=t;f=f.parentNode)if(e=f[r])return e}}}var i=n;this.current=function(){return i};this.next=function(n){return i=r(i,"firstChild","nextSibling",n)};this.prev=function(n){return i=r(i,"lastChild","previousSibling",n)}}});i(ui,[r],function(n){function t(i){function b(){return w.createDocumentFragment()}function k(n,t){ut(o,n,t)}function d(n,t){ut(c,n,t)}function tt(n){k(n.parentNode,v(n))}function st(n){k(n.parentNode,v(n)+1)}function ht(n){d(n.parentNode,v(n))}function it(n){d(n.parentNode,v(n)+1)}function ct(n){n?(r[e]=r[u],r[s]=r[f]):(r[u]=r[e],r[f]=r[s]);r.collapsed=o}function lt(n){tt(n);it(n)}function at(n){k(n,0);d(n,1===n.nodeType?n.childNodes.length:n.nodeValue.length)}function vt(n,t){var i=r[u],o=r[f],h=r[e],c=r[s],l=t.startContainer,a=t.startOffset,v=t.endContainer,p=t.endOffset;return 0===n?y(i,o,l,a):1===n?y(h,c,l,a):2===n?y(h,c,v,p):3===n?y(i,o,v,p):void 0}function yt(){nt(h)}function pt(){return nt(ui)}function rt(){return nt(l)}function wt(n){var t=this[u],r=this[f],o,e;3!==t.nodeType&&4!==t.nodeType||!t.nodeValue?(t.childNodes.length>0&&(e=t.childNodes[r]),e?t.insertBefore(n,e):3==t.nodeType?i.insertAfter(n,t):t.appendChild(n)):r?r>=t.nodeValue.length?i.insertAfter(n,t):(o=t.splitText(r),t.parentNode.insertBefore(n,o)):t.parentNode.insertBefore(n,t)}function bt(n){var t=r.extractContents();r.insertNode(n);n.appendChild(t);r.selectNode(n)}function kt(){return ot(new t(i),{startContainer:r[u],startOffset:r[f],endContainer:r[e],endOffset:r[s],collapsed:r.collapsed,commonAncestorContainer:r.commonAncestorContainer})}function g(n,t){var i;if(3==n.nodeType||0>t)return n;for(i=n.firstChild;i&&t>0;)--t,i=i.nextSibling;return i?i:n}function dt(){return r[u]==r[e]&&r[f]==r[s]}function y(n,t,r,u){var f,h,e,c,o,s;if(n==r)return t==u?0:u>t?-1:1;for(f=r;f&&f.parentNode!=n;)f=f.parentNode;if(f){for(h=0,e=n.firstChild;e!=f&&t>h;)h++,e=e.nextSibling;return h>=t?-1:1}for(f=n;f&&f.parentNode!=r;)f=f.parentNode;if(f){for(h=0,e=r.firstChild;e!=f&&u>h;)h++,e=e.nextSibling;return u>h?-1:1}for(c=i.findCommonAncestor(n,r),o=n;o&&o.parentNode!=c;)o=o.parentNode;for(o||(o=c),s=r;s&&s.parentNode!=c;)s=s.parentNode;if(s||(s=c),o==s)return 0;for(e=c.firstChild;e;){if(e==o)return-1;if(e==s)return 1;e=e.nextSibling}}function ut(n,t,o){var h,c;for(n?(r[u]=t,r[f]=o):(r[e]=t,r[s]=o),h=r[e];h.parentNode;)h=h.parentNode;for(c=r[u];c.parentNode;)c=c.parentNode;c==h?y(r[u],r[f],r[e],r[s])>0&&r.collapse(n):r.collapse(n);r.collapsed=dt();r.commonAncestorContainer=i.findCommonAncestor(r[u],r[e])}function nt(n){var i,l=0,a=0,t,s,f,o,h,c;if(r[u]==r[e])return gt(n);for(i=r[e],t=i.parentNode;t;i=t,t=t.parentNode){if(t==r[u])return ni(i,n);++l}for(i=r[u],t=i.parentNode;t;i=t,t=t.parentNode){if(t==r[e])return ti(i,n);++a}for(s=a-l,f=r[u];s>0;)f=f.parentNode,s--;for(o=r[e];0>s;)o=o.parentNode,s++;for(h=f.parentNode,c=o.parentNode;h!=c;h=h.parentNode,c=c.parentNode)f=h,o=c;return ii(f,o,n)}function gt(n){var i,y,e,t,c,k,d,a,v;if(n!=h&&(i=b()),r[f]==r[s])return i;if(3==r[u].nodeType)return(y=r[u].nodeValue,e=y.substring(r[f],r[s]),n!=l&&(t=r[u],a=r[f],v=r[s]-r[f],0===a&&v>=t.nodeValue.length-1?t.parentNode.removeChild(t):t.deleteData(a,v),r.collapse(o)),n==h)?void 0:(e.length>0&&i.appendChild(w.createTextNode(e)),i);for(t=g(r[u],r[f]),c=r[s]-r[f];t&&c>0;)k=t.nextSibling,d=p(t,n),i&&i.appendChild(d),--c,t=k;return n!=l&&r.collapse(o),i}function ni(n,t){var i,u,o,e,s,a;if(t!=h&&(i=b()),u=ft(n,t),i&&i.appendChild(u),o=v(n),e=o-r[f],0>=e)return t!=l&&(r.setEndBefore(n),r.collapse(c)),i;for(u=n.previousSibling;e>0;)s=u.previousSibling,a=p(u,t),i&&i.insertBefore(a,i.firstChild),--e,u=s;return t!=l&&(r.setEndBefore(n),r.collapse(c)),i}function ti(n,t){var u,f,i,e,c,a;for(t!=h&&(u=b()),i=et(n,t),u&&u.appendChild(i),f=v(n),++f,e=r[s]-f,i=n.nextSibling;i&&e>0;)c=i.nextSibling,a=p(i,t),u&&u.appendChild(a),--e,i=c;return t!=l&&(r.setStartAfter(n),r.collapse(o)),u}function ii(n,t,i){var f,u,s,a,c,e,y;for(i!=h&&(u=b()),f=et(n,i),u&&u.appendChild(f),s=v(n),a=v(t),++s,c=a-s,e=n.nextSibling;c>0;)y=e.nextSibling,f=p(e,i),u&&u.appendChild(f),e=y,--c;return f=ft(t,i),u&&u.appendChild(f),i!=l&&(r.setStartAfter(n),r.collapse(o)),u}function ft(n,t){var i=g(r[e],r[s]-1),u,f,y,p,l,v=i!=r[e];if(i==n)return a(i,v,c,t);for(u=i.parentNode,f=a(u,c,c,t);u;){for(;i;)y=i.previousSibling,p=a(i,v,c,t),t!=h&&f.insertBefore(p,f.firstChild),v=o,i=y;if(u==n)return f;i=u.previousSibling;u=u.parentNode;l=a(u,c,c,t);t!=h&&l.appendChild(f);f=l}}function et(n,t){var i=g(r[u],r[f]),l=i!=r[u],e,s,y,p,v;if(i==n)return a(i,l,o,t);for(e=i.parentNode,s=a(e,c,o,t);e;){for(;i;)y=i.nextSibling,p=a(i,l,o,t),t!=h&&s.appendChild(p),l=o,i=y;if(e==n)return s;i=e.nextSibling;e=e.parentNode;v=a(e,c,o,t);t!=h&&v.appendChild(s);s=v}}function a(n,t,u,e){var a,v,y,o,w;return t?p(n,e):3==n.nodeType?(a=n.nodeValue,u?(o=r[f],v=a.substring(o),y=a.substring(0,o)):(o=r[s],v=a.substring(0,o),y=a.substring(o)),e!=l&&(n.nodeValue=y),e==h)?void 0:(w=i.clone(n,c),w.nodeValue=v,w):e!=h?i.clone(n,c):void 0}function p(n,t){return t!=h?t==l?i.clone(n,o):n:void n.parentNode.removeChild(n)}function ri(){return i.create("body",null,rt()).outerText}var r=this,w=i.doc,ui=0,l=1,h=2,o=!0,c=!1,f="startOffset",u="startContainer",e="endContainer",s="endOffset",ot=n.extend,v=i.nodeIndex;return ot(r,{startContainer:w,startOffset:0,endContainer:w,endOffset:0,collapsed:o,commonAncestorContainer:w,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:k,setEnd:d,setStartBefore:tt,setStartAfter:st,setEndBefore:ht,setEndAfter:it,collapse:ct,selectNode:lt,selectNodeContents:at,compareBoundaryPoints:vt,deleteContents:yt,extractContents:pt,cloneContents:rt,insertNode:wt,surroundContents:bt,cloneRange:kt,toStringIE:ri}),r}return t.prototype.toString=function(){return this.toStringIE()},t});i(c,[r],function(n){function s(n){var t;return t=document.createElement("div"),t.innerHTML=n,t.textContent||t.innerText||n}function e(n,i){var r,u,f,e={};if(n){for(n=n.split(","),i=i||10,r=0;r<n.length;r+=2)u=String.fromCharCode(parseInt(n[r],i)),t[u]||(f="&"+n[r+1]+";",e[u]=f,e[f]=u);return e}}var h=n.makeMap,r,t,o,u=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,l=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,a={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},i;return t={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},r=e("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),i={encodeRaw:function(n,i){return n.replace(i?u:f,function(n){return t[n]||n})},encodeAllRaw:function(n){return(""+n).replace(c,function(n){return t[n]||n})},encodeNumeric:function(n,i){return n.replace(i?u:f,function(n){return n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":t[n]||"&#"+n.charCodeAt(0)+";"})},encodeNamed:function(n,i,e){return e=e||r,n.replace(i?u:f,function(n){return t[n]||e[n]||n})},getEncodeFunc:function(n,o){function s(n,i){return n.replace(i?u:f,function(n){return t[n]||o[n]||"&#"+n.charCodeAt(0)+";"||n})}function c(n,t){return i.encodeNamed(n,t,o)}return o=e(o)||r,n=h(n.replace(/\+/g,",")),n.named&&n.numeric?s:n.named?o?c:i.encodeNamed:n.numeric?i.encodeNumeric:i.encodeRaw},decode:function(n){return n.replace(l,function(n,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10),t>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):a[t]||String.fromCharCode(t)):o[n]||r[n]||s(n)})}}});i(kr,[r],function(n){return function(t,i){function u(n){t.getElementsByTagName("head")[0].appendChild(n)}function e(i,e,s){function a(){for(var n=h.passed,t=n.length;t--;)n[t]();h.status=2;h.passed=[];h.failed=[]}function v(){for(var n=h.failed,t=n.length;t--;)n[t]();h.status=3;h.passed=[];h.failed=[]}function k(){var n=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(n&&n[1]<536)}function p(n,t){n()||((new Date).getTime()-b<f?window.setTimeout(t,0):v())}function y(){p(function(){for(var r=t.styleSheets,n,u=r.length,i;u--;)if(n=r[u],i=n.ownerNode?n.ownerNode:n.owningElement,i&&i.id===c.id)return a(),!0},y)}function w(){p(function(){try{var n=l.sheet.cssRules;return a(),!!n}catch(t){}},w)}var c,l,b,h;if(i=n._addCacheSuffix(i),r[i]?h=r[i]:(h={passed:[],failed:[]},r[i]=h),e&&h.passed.push(e),s&&h.failed.push(s),1!=h.status){if(2==h.status)return void a();if(3==h.status)return void v();if(h.status=1,c=t.createElement("link"),c.rel="stylesheet",c.type="text/css",c.id="u"+o++,c.async=!1,c.defer=!1,b=(new Date).getTime(),"onload"in c&&!k())c.onload=y,c.onerror=v;else{if(navigator.userAgent.indexOf("Firefox")>0)return l=t.createElement("style"),l.textContent='@import "'+i+'"',w(),void u(l);y()}u(c);c.href=i}}var o=0,r={},f;i=i||{};f=i.maxLoadTime||5e3;this.load=e}});i(o,[ht,g,ri,y,s,ui,c,u,r,kr],function(n,i,r,u,f,e,o,s,h,c){function p(n,t){var i={},r=t.keep_values,u;return u={set:function(i,r,u){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||n,r,u,i[0]));i.attr("data-mce-"+u,r).attr(u,r)},get:function(n,t){return n.attr("data-mce-"+t)||n.attr(t)}},i={style:{set:function(n,t){return null!==t&&"object"==typeof t?void n.css(t):(r&&n.attr("data-mce-style",t),void n.attr("style",t))},get:function(t){var i=t.attr("data-mce-style")||t.attr("style");return n.serializeStyle(n.parseStyle(i),t[0].nodeName)}}},r&&(i.href=i.src=u),i}function l(n,t){var f=this,e;f.doc=n;f.win=window;f.files={};f.counter=0;f.stdMode=!a||n.documentMode>=8;f.boxModel=!a||"CSS1Compat"==n.compatMode||f.stdMode;f.styleSheetLoader=new c(n);f.boundEvents=[];f.settings=t=t||{};f.schema=t.schema;f.styles=new r({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema);f.fixDoc(n);f.events=t.ownEvents?new u(t.proxy):u.Event;f.attrHooks=p(f,t);e=t.schema?t.schema.getBlockElements():{};f.$=i.overrideDefaults(function(){return{context:n,element:f.getRoot()}});f.isBlock=function(n){if(!n)return!1;var t=n.nodeType;return t?!(1!==t||!e[n.nodeName]):!!e[n]}}var v=h.each,y=h.is,w=h.grep,b=h.trim,a=s.ie,k=/^([a-z0-9],?)+$/i,d=/^[ \t\r\n]*$/;return l.prototype={$$:function(n){return"string"==typeof n&&(n=this.get(n)),this.$(n)},root:null,fixDoc:function(n){var t=this.settings,i;if(a&&t.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){n.createElement(t)});for(i in t.schema.getCustomElements())n.createElement(i)}},clone:function(n,t){var i=this,r,u;return!a||1!==n.nodeType||t?n.cloneNode(t):(u=i.doc,t?r.firstChild:(r=u.createElement(n.nodeName),v(i.getAttribs(n),function(t){i.setAttrib(r,t.nodeName,i.getAttrib(n,t.nodeName))}),r))},getRoot:function(){var n=this;return n.settings.root_element||n.doc.body},getViewPort:function(n){var i,t;return n=n?n:this.win,i=n.document,t=this.boxModel?i.documentElement:i.body,{x:n.pageXOffset||t.scrollLeft,y:n.pageYOffset||t.scrollTop,w:n.innerWidth||t.clientWidth,h:n.innerHeight||t.clientHeight}},getRect:function(n){var t=this,i,r;return n=t.get(n),i=t.getPos(n),r=t.getSize(n),{x:i.x,y:i.y,w:r.w,h:r.h}},getSize:function(n){var r=this,t,i;return n=r.get(n),t=r.getStyle(n,"width"),i=r.getStyle(n,"height"),-1===t.indexOf("px")&&(t=0),-1===i.indexOf("px")&&(i=0),{w:parseInt(t,10)||n.offsetWidth||n.clientWidth,h:parseInt(i,10)||n.offsetHeight||n.clientHeight}},getParent:function(n,t,i){return this.getParents(n,t,i,!1)},getParents:function(n,i,r,u){var f=this,e,o=[];for(n=f.get(n),u=u===t,r=r||("BODY"!=f.getRoot().nodeName?f.getRoot().parentNode:null),y(i,"string")&&(e=i,i="*"===i?function(n){return 1==n.nodeType}:function(n){return f.is(n,e)});n&&n!=r&&n.nodeType&&9!==n.nodeType;){if(!i||i(n)){if(!u)return n;o.push(n)}n=n.parentNode}return u?o:null},get:function(n){var t;return n&&this.doc&&"string"==typeof n&&(t=n,n=this.doc.getElementById(n),n&&n.id!==t)?this.doc.getElementsByName(t)[1]:n},getNext:function(n,t){return this._findSib(n,t,"nextSibling")},getPrev:function(n,t){return this._findSib(n,t,"previousSibling")},select:function(t,i){var r=this;return n(t,r.get(i)||r.settings.root_element||r.doc,[])},is:function(i,r){var u,f;if(i.length===t){if("*"===r)return 1==i.nodeType;if(k.test(r)){for(r=r.toLowerCase().split(/,/),i=i.nodeName.toLowerCase(),u=r.length-1;u>=0;u--)if(r[u]==i)return!0;return!1}}return i.nodeType&&1!=i.nodeType?!1:(f=i.nodeType?[i]:i,n(r,f[0].ownerDocument||f[0],null,f).length>0)},add:function(n,t,i,r,u){var f=this;return this.run(n,function(n){var e;return e=y(t,"string")?f.doc.createElement(t):t,f.setAttribs(e,i),r&&(r.nodeType?e.appendChild(r):f.setHTML(e,r)),u?e:n.appendChild(e)})},create:function(n,t,i){return this.add(this.doc.createElement(n),n,t,i,1)},createHTML:function(n,t,i){var u="",r;u+="<"+n;for(r in t)t.hasOwnProperty(r)&&null!==t[r]&&"undefined"!=typeof t[r]&&(u+=" "+r+'="'+this.encode(t[r])+'"');return"undefined"!=typeof i?u+">"+i+"<\/"+n+">":u+" />"},createFragment:function(n){var t,r,u=this.doc,i;for(i=u.createElement("div"),t=u.createDocumentFragment(),n&&(i.innerHTML=n);r=i.firstChild;)t.appendChild(r);return t},remove:function(n,t){return n=this.$$(n),t?n.each(function(){for(var n;n=this.firstChild;)3==n.nodeType&&0===n.data.length?this.removeChild(n):this.parentNode.insertBefore(n,this)}).remove():n.remove(),n.length>1?n.toArray():n[0]},setStyle:function(n,t,i){n=this.$$(n).css(t,i);this.settings.update_styles&&n.attr("data-mce-style",null)},getStyle:function(n,i,r){return n=this.$$(n),r?n.css(i):(i=i.replace(/-(\D)/g,function(n,t){return t.toUpperCase()}),"float"==i&&(i=a?"styleFloat":"cssFloat"),n[0]&&n[0].style?n[0].style[i]:t)},setStyles:function(n,t){n=this.$$(n).css(t);this.settings.update_styles&&n.attr("data-mce-style",null)},removeAllAttribs:function(n){return this.run(n,function(n){for(var i=n.attributes,t=i.length-1;t>=0;t--)n.removeAttributeNode(i.item(t))})},setAttrib:function(n,t,i){var u=this,f,r,e=u.settings;""===i&&(i=null);n=u.$$(n);f=n.attr(t);n.length&&(r=u.attrHooks[t],r&&r.set?r.set(n,i,t):n.attr(t,i),f!=i&&e.onSetAttrib&&e.onSetAttrib({attrElm:n,attrName:t,attrValue:i}))},setAttribs:function(n,t){var i=this;i.$$(n).each(function(n,r){v(t,function(n,t){i.setAttrib(r,t,n)})})},getAttrib:function(n,t,i){var f=this,r,u;return n=f.$$(n),n.length&&(r=f.attrHooks[t],u=r&&r.get?r.get(n,t):n.attr(t)),"undefined"==typeof u&&(u=i||""),u},getPos:function(n,t){var s=this,f=0,e=0,r,o=s.doc,u=o.body,h;if(n=s.get(n),t=t||u,n){if(t===u&&n.getBoundingClientRect&&"static"===i(u).css("position"))return h=n.getBoundingClientRect(),t=s.boxModel?o.documentElement:u,f=h.left+(o.documentElement.scrollLeft||u.scrollLeft)-t.clientLeft,e=h.top+(o.documentElement.scrollTop||u.scrollTop)-t.clientTop,{x:f,y:e};for(r=n;r&&r!=t&&r.nodeType;)f+=r.offsetLeft||0,e+=r.offsetTop||0,r=r.offsetParent;for(r=n.parentNode;r&&r!=t&&r.nodeType;)f-=r.scrollLeft||0,e-=r.scrollTop||0,r=r.parentNode}return{x:f,y:e}},parseStyle:function(n){return this.styles.parse(n)},serializeStyle:function(n,t){return this.styles.serialize(n,t)},addStyle:function(n){var f=this,r=f.doc,u,t,i;if(f!==l.DOM&&r===document){if(i=l.DOM.addedStyles,i=i||[],i[n])return;i[n]=!0;l.DOM.addedStyles=i}t=r.getElementById("mceDefaultStyles");t||(t=r.createElement("style"),t.id="mceDefaultStyles",t.type="text/css",u=r.getElementsByTagName("head")[0],u.firstChild?u.insertBefore(t,u.firstChild):u.appendChild(t));t.styleSheet?t.styleSheet.cssText+=n:t.appendChild(r.createTextNode(n))},loadCSS:function(n){var i=this,t=i.doc,r;return i!==l.DOM&&t===document?void l.DOM.loadCSS(n):(n||(n=""),r=t.getElementsByTagName("head")[0],void v(n.split(","),function(n){var u;n=h._addCacheSuffix(n);i.files[n]||(i.files[n]=!0,u=i.create("link",{rel:"stylesheet",href:n}),a&&t.documentMode&&t.recalc&&(u.onload=function(){t.recalc&&t.recalc();u.onload=null}),r.appendChild(u))}))},addClass:function(n,t){this.$$(n).addClass(t)},removeClass:function(n,t){this.toggleClass(n,t,!1)},hasClass:function(n,t){return this.$$(n).hasClass(t)},toggleClass:function(n,t,r){this.$$(n).toggleClass(t,r).each(function(){""===this.className&&i(this).attr("class",null)})},show:function(n){this.$$(n).show()},hide:function(n){this.$$(n).hide()},isHidden:function(n){return"none"==this.$$(n).css("display")},uniqueId:function(n){return(n?n:"mce_")+this.counter++},setHTML:function(n,t){n=this.$$(n);a?n.each(function(n,r){if(r.canHaveHTML!==!1){for(;r.firstChild;)r.removeChild(r.firstChild);try{r.innerHTML="<br>"+t;r.removeChild(r.firstChild)}catch(u){i("<div>").html("<br>"+t).contents().slice(1).appendTo(r)}return t}}):n.html(t)},getOuterHTML:function(n){return n=this.get(n),1==n.nodeType&&"outerHTML"in n?n.outerHTML:i("<div>").append(i(n).clone()).html()},setOuterHTML:function(n,t){var r=this;r.$$(n).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(n){}r.remove(i(this).html(t),!0)})},decode:o.decode,encode:o.encodeAllRaw,insertAfter:function(n,t){return t=this.get(t),this.run(n,function(n){var i,r;return i=t.parentNode,r=t.nextSibling,r?i.insertBefore(n,r):i.appendChild(n),n})},replace:function(n,t,i){var r=this;return r.run(t,function(t){return y(t,"array")&&(n=n.cloneNode(!0)),i&&v(w(t.childNodes),function(t){n.appendChild(t)}),t.parentNode.replaceChild(n,t)})},rename:function(n,t){var i=this,r;return n.nodeName!=t.toUpperCase()&&(r=i.create(t),v(i.getAttribs(n),function(t){i.setAttrib(r,t.nodeName,i.getAttrib(n,t.nodeName))}),i.replace(r,n,1)),r||n},findCommonAncestor:function(n,t){for(var i=n,r;i;){for(r=t;r&&i!=r;)r=r.parentNode;if(i==r)break;i=i.parentNode}return!i&&n.ownerDocument?n.ownerDocument.documentElement:i},toHex:function(n){return this.styles.toHex(h.trim(n))},run:function(n,t,i){var u=this,r;return"string"==typeof n&&(n=u.get(n)),n?(i=i||this,n.nodeType||!n.length&&0!==n.length?t.call(i,n):(r=[],v(n,function(n,f){n&&("string"==typeof n&&(n=u.get(n)),r.push(t.call(i,n,f)))}),r)):!1},getAttribs:function(n){var t,i;return(n=this.get(n),!n)?[]:a?(t=[],"OBJECT"==n.nodeName)?n.attributes:("OPTION"===n.nodeName&&this.getAttrib(n,"selected")&&t.push({specified:1,nodeName:"selected"}),i=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,n.cloneNode(!1).outerHTML.replace(i,"").replace(/[\w:\-]+/gi,function(n){t.push({specified:1,nodeName:n})}),t):n.attributes},isEmpty:function(n,t){var u=this,e,o,r,s,i,h=0;if(n=n.firstChild){s=new f(n,n.parentNode);t=t||(u.schema?u.schema.getNonEmptyElements():null);do{if(r=n.nodeType,1===r){if(n.getAttribute("data-mce-bogus"))continue;if(i=n.nodeName.toLowerCase(),t&&t[i]){if("br"===i){h++;continue}return!1}for(o=u.getAttribs(n),e=o.length;e--;)if(i=o[e].nodeName,"name"===i||"data-mce-bookmark"===i)return!1}if(8==r||3===r&&!d.test(n.nodeValue))return!1}while(n=s.next())}return 1>=h},createRng:function(){var n=this.doc;return n.createRange?n.createRange():new e(this)},nodeIndex:function(n,t){var u=0,r,i;if(n)for(r=n.nodeType,n=n.previousSibling;n;n=n.previousSibling)i=n.nodeType,(!t||3!=i||i!=r&&n.nodeValue.length)&&(u++,r=i);return u},split:function(n,t,i){function e(n){function o(n){var t=n.previousSibling&&"SPAN"==n.previousSibling.nodeName,i=n.nextSibling&&"SPAN"==n.nextSibling.nodeName;return t&&i}var i,t=n.childNodes,u=n.nodeType,f;if(1!=u||"bookmark"!=n.getAttribute("data-mce-type")){for(i=t.length-1;i>=0;i--)e(t[i]);if(9!=u){if(3==u&&n.nodeValue.length>0){if(f=b(n.nodeValue).length,!r.isBlock(n.parentNode)||f>0||0===f&&o(n))return}else if(1==u&&(t=n.childNodes,1==t.length&&t[0]&&1==t[0].nodeType&&"bookmark"==t[0].getAttribute("data-mce-type")&&n.parentNode.insertBefore(t[0],n),t.length||/^(br|hr|input|img)$/i.test(n.nodeName)))return;r.remove(n)}return n}}var r=this,u=r.createRng(),o,s,f;if(n&&t)return(u.setStart(n.parentNode,r.nodeIndex(n)),u.setEnd(t.parentNode,r.nodeIndex(t)),o=u.extractContents(),u=r.createRng(),u.setStart(t.parentNode,r.nodeIndex(t)+1),u.setEnd(n.parentNode,r.nodeIndex(n)+1),s=u.extractContents(),f=n.parentNode,f.insertBefore(e(o),n),i?f.replaceChild(i,t):f.insertBefore(t,n),f.insertBefore(e(s),n),r.remove(n),i||t)},bind:function(n,t,i,r){var u=this,f;if(h.isArray(n)){for(f=n.length;f--;)n[f]=u.bind(n[f],t,i,r);return n}return!u.settings.collect||n!==u.doc&&n!==u.win||u.boundEvents.push([n,t,i,r]),u.events.bind(n,t,i,r||u)},unbind:function(n,t,i){var f=this,r,u;if(h.isArray(n)){for(r=n.length;r--;)n[r]=f.unbind(n[r],t,i);return n}if(f.boundEvents&&(n===f.doc||n===f.win))for(r=f.boundEvents.length;r--;)u=f.boundEvents[r],n!=u[0]||t&&t!=u[1]||i&&i!=u[2]||this.events.unbind(u[0],u[1],u[2]);return this.events.unbind(n,t,i)},fire:function(n,t,i){return this.events.fire(n,t,i)},getContentEditable:function(n){var t;return n&&1==n.nodeType?(t=n.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==n.contentEditable?n.contentEditable:null):null},getContentEditableParent:function(n){for(var i=this.getRoot(),t=null;n&&n!==i&&(t=this.getContentEditable(n),null===t);n=n.parentNode);return t},destroy:function(){var t=this,r,i;if(t.boundEvents){for(r=t.boundEvents.length;r--;)i=t.boundEvents[r],this.events.unbind(i[0],i[1],i[2]);t.boundEvents=null}n.setDocument&&n.setDocument();t.win=t.doc=t.root=t.events=t.frag=null},isChildOf:function(n,t){for(;n;){if(t===n)return!0;n=n.parentNode}return!1},dumpRng:function(n){return"startContainer: "+n.startContainer.nodeName+", startOffset: "+n.startOffset+", endContainer: "+n.endContainer.nodeName+", endOffset: "+n.endOffset},_findSib:function(n,t,i){var u=this,r=t;if(n)for("string"==typeof r&&(r=function(n){return u.is(n,t)}),n=n[i];n;n=n[i])if(r(n))return n;return null}},l.DOM=new l(document),l});i(nt,[o,r],function(n,t){function i(){function a(n,i){function e(){o.remove(f);r&&(r.onreadystatechange=r.onload=r=null);i()}function s(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+n)}var o=u,r,f;f=o.uniqueId();r=document.createElement("script");r.id=f;r.type="text/javascript";r.src=t._addCacheSuffix(n);"onreadystatechange"in r?r.onreadystatechange=function(){/loaded|complete/.test(r.readyState)&&e()}:r.onload=e;r.onerror=s;(document.getElementsByTagName("head")[0]||document.body).appendChild(r)}var v=0,h=1,e=2,n={},c=[],i={},o=[],s=0,l;this.isDone=function(t){return n[t]==e};this.markDone=function(t){n[t]=e};this.add=this.load=function(t,r,u){var f=n[t];f==l&&(c.push(t),n[t]=v);r&&(i[t]||(i[t]=[]),i[t].push({func:r,scope:u||this}))};this.loadQueue=function(n,t){this.loadScripts(c,n,t)};this.loadScripts=function(t,u,c){function v(n){r(i[n],function(n){n.func.call(n.scope)});i[n]=l}var y;o.push({func:u,scope:c||this});(y=function(){var i=f(t);t.length=0;r(i,function(t){return n[t]==e?void v(t):void(n[t]!=h&&(n[t]=h,s++,a(t,function(){n[t]=e;s--;v(t);y()})))});s||(r(o,function(n){n.func.call(n.scope)}),o.length=0)})()}}var u=n.DOM,r=t.each,f=t.grep;return i.ScriptLoader=new i,i});i(ct,[nt,r],function(n,i){function r(){var n=this;n.items=[];n.urls={};n.lookup={}}var u=i.each;return r.prototype={get:function(n){return this.lookup[n]?this.lookup[n].instance:t},dependencies:function(n){var t;return this.lookup[n]&&(t=this.lookup[n].dependencies),t||[]},requireLangPack:function(t,i){var u=r.language;if(u&&r.languageLoad!==!1){if(i)if(i=","+i+",",-1!=i.indexOf(","+u.substr(0,2)+","))u=u.substr(0,2);else if(-1==i.indexOf(","+u+","))return;n.ScriptLoader.add(this.urls[t]+"/langs/"+u+".js")}},add:function(n,t,i){return this.items.push(t),this.lookup[n]={instance:t,dependencies:i},t},createUrl:function(n,t){return"object"==typeof t?t:{prefix:n.prefix,resource:t,suffix:n.suffix}},addComponents:function(t,i){var r=this.urls[t];u(i,function(t){n.ScriptLoader.add(r+"/"+t)})},load:function(i,f,e,o){function c(){var r=h.dependencies(i);u(r,function(n){var i=h.createUrl(f,n);h.load(i.resource,i,t,t)});e&&e.call(o?o:n)}var h=this,s=f;h.urls[i]||("object"==typeof f&&(s=f.prefix+f.resource+f.suffix),0!==s.indexOf("/")&&-1==s.indexOf("://")&&(s=r.baseURL+"/"+s),h.urls[i]=s.substring(0,s.lastIndexOf("/")),h.lookup[i]?c():n.ScriptLoader.add(s,c,o))}},r.PluginManager=new r,r.ThemeManager=new r,r});i(h,[r,s],function(n,t){function r(n,t){var i=n.childNodes;return t--,t>i.length-1?t=i.length-1:0>t&&(t=0),i[t]||n}function i(n){this.walk=function(t,i){function v(n){var t;return t=n[0],3===t.nodeType&&t===e&&k>=t.nodeValue.length&&n.splice(0,1),t=n[n.length-1],0===d&&n.length>0&&t===o&&3===t.nodeType&&n.splice(n.length-1,1),n}function w(n,t,i){for(var r=[];n&&n!=i;n=n[t])r.push(n);return r}function b(n,t){do{if(n.parentNode==t)return n;n=n.parentNode}while(n)}function a(n,t,r){var u=r?"nextSibling":"previousSibling";for(f=n,y=f.parentNode;f&&f!=t;f=y)y=f.parentNode,h=w(f==n?f:f[u],u),h.length&&(r||h.reverse(),i(v(h)))}var e=t.startContainer,k=t.startOffset,o=t.endContainer,d=t.endOffset,s,c,l,f,y,h,p;if(p=n.select("td.mce-item-selected,th.mce-item-selected"),p.length>0)return void u(p,function(n){i([n])});if(1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[k]),1==o.nodeType&&o.hasChildNodes()&&(o=r(o,d)),e==o)return i(v([e]));for(s=n.findCommonAncestor(e,o),f=e;f;f=f.parentNode){if(f===o)return a(e,s,!0);if(f===s)break}for(f=o;f;f=f.parentNode){if(f===e)return a(o,s);if(f===s)break}c=b(e,s)||e;l=b(o,s)||o;a(e,c,!0);h=w(c==e?c:c.nextSibling,"nextSibling",l==o?l.nextSibling:l);h.length&&i(v(h));a(o,l)};this.split=function(n){function f(n,t){return n.splitText(t)}var i=n.startContainer,r=n.startOffset,t=n.endContainer,u=n.endOffset;return i==t&&3==i.nodeType?r>0&&r<i.nodeValue.length&&(t=f(i,r),i=t.previousSibling,u>r?(u-=r,i=t=f(t,u).previousSibling,u=t.nodeValue.length,r=0):u=0):(3==i.nodeType&&r>0&&r<i.nodeValue.length&&(i=f(i,r),r=0),3==t.nodeType&&u>0&&u<t.nodeValue.length&&(t=f(t,u).previousSibling,u=t.nodeValue.length)),{startContainer:i,startOffset:r,endContainer:t,endOffset:u}};this.normalize=function(i){function f(f){function y(i,r){for(var u=new t(i,n.getParent(i.parentNode,n.isBlock)||c);i=u[r?"prev":"next"]();)if("BR"===i.nodeName)return!0}function w(n,t){return n.previousSibling&&n.previousSibling.nodeName==t}function a(i,f){var v,h,a;if(f=f||o,a=n.getParent(f.parentNode,n.isBlock)||c,i&&"BR"==f.nodeName&&p&&n.isEmpty(a))return o=f.parentNode,s=n.nodeIndex(f),void(r=!0);for(v=new t(f,a);e=v[i?"prev":"next"]();){if("false"===n.getContentEditableParent(e))return;if(3===e.nodeType&&e.nodeValue.length>0)return o=e,s=i?e.nodeValue.length:0,void(r=!0);if(n.isBlock(e)||l[e.nodeName.toLowerCase()])return;h=e}u&&h&&(o=h,r=!0,s=0)}var o,s,v,c=n.getRoot(),e,l,h,p;if(o=i[(f?"start":"end")+"Container"],s=i[(f?"start":"end")+"Offset"],p=1==o.nodeType&&s===o.childNodes.length,l=n.schema.getNonEmptyElements(),h=f,1==o.nodeType&&s>o.childNodes.length-1&&(h=!1),9===o.nodeType&&(o=n.getRoot(),s=0),o===c){if(h&&(e=o.childNodes[s>0?s-1:0],e&&(l[e.nodeName]||"TABLE"==e.nodeName)))return;if(o.hasChildNodes()&&(s=Math.min(!h&&s>0?s-1:s,o.childNodes.length-1),o=o.childNodes[s],s=0,o.hasChildNodes()&&!/TABLE/.test(o.nodeName))){e=o;v=new t(o,c);do{if(3===e.nodeType&&e.nodeValue.length>0){s=h?0:e.nodeValue.length;o=e;r=!0;break}if(l[e.nodeName.toLowerCase()]){s=n.nodeIndex(e);o=e.parentNode;"IMG"!=e.nodeName||h||s++;r=!0;break}}while(e=h?v.next():v.prev())}}u&&(3===o.nodeType&&0===s&&a(!0),1===o.nodeType&&(e=o.childNodes[s],e||(e=o.childNodes[s-1]),!e||"BR"!==e.nodeName||w(e,"A")||y(e)||y(e,!0)||a(!0,e)));h&&!u&&3===o.nodeType&&s===o.nodeValue.length&&a(!1);r&&i["set"+(f?"Start":"End")](o,s)}var r,u;return u=i.collapsed,f(!0),u||f(),r&&u&&i.collapse(!0),r}}var u=n.each;return i.compareRanges=function(n,t){if(n&&t){if(!n.item&&!n.duplicate)return n.startContainer==t.startContainer&&n.startOffset==t.startOffset;if(n.item&&t.item&&n.item(0)===t.item(0)||n.isEqual&&t.isEqual&&t.isEqual(n))return!0}return!1},i.getCaretRangeFromPoint=function(n,t,i){var r,u;if(i.caretPositionFromPoint)u=i.caretPositionFromPoint(n,t),r=i.createRange(),r.setStart(u.offsetNode,u.offset),r.collapse(!0);else if(i.caretRangeFromPoint)r=i.caretRangeFromPoint(n,t);else if(i.body.createTextRange){r=i.body.createTextRange();try{r.moveToPoint(n,t);r.collapse(!0)}catch(f){r.collapse(t<i.body.clientHeight)}}return r},i.getNode=function(n,t){return 1==n.nodeType&&n.hasChildNodes()&&(t>=n.childNodes.length&&(t=n.childNodes.length-1),n=n.childNodes[t]),n},i});i(dr,[h,u],function(n,t){return function(i){function f(n){var t,u;if(u=i.$(n).parentsUntil(i.getBody()).add(n),u.length===r.length){for(t=u.length;t>=0&&u[t]===r[t];t--);if(-1===t)return r=u,!0}return r=u,!1}var u,r=[];"onselectionchange"in i.getDoc()||i.on("NodeChange Click MouseUp KeyUp Focus",function(t){var r,f;r=i.selection.getRng();f={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};"nodechange"!=t.type&&n.compareRanges(f,u)||i.fire("SelectionChange");u=f});i.on("contextmenu",function(){i.fire("SelectionChange")});i.on("SelectionChange",function(){var n=i.selection.getStart(!0);(t.range||!i.selection.isCollapsed())&&!f(n)&&i.dom.isChildOf(n,i.getBody())&&i.nodeChanged({selectionChange:!0})});i.on("MouseUp",function(n){n.isDefaultPrevented()||("IMG"==i.selection.getNode().nodeName?setTimeout(function(){i.nodeChanged()},0):i.nodeChanged())});this.nodeChanged=function(n){var r=i.selection,t,u,f;i.initialized&&r&&!i.settings.disable_nodechange&&!i.settings.readonly&&(f=i.getBody(),t=r.getStart()||f,t=t.ownerDocument!=i.getDoc()?i.getBody():t,"IMG"==t.nodeName&&r.isCollapsed()&&(t=t.parentNode),u=[],i.dom.getParent(t,function(n){return n===f?!0:void u.push(n)}),n=n||{},n.element=t,n.parents=u,i.fire("NodeChange",n))}}});i(p,[],function(){function t(n,t,i){var u,r,f=i?"lastChild":"firstChild",e=i?"prev":"next";if(n[f])return n[f];if(n!==t){if(u=n[e])return u;for(r=n.parent;r&&r!==t;r=r.parent)if(u=r[e])return u}}function n(n,t){this.name=n;this.type=t;1===t&&(this.attributes=[],this.attributes.map={})}var i=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return n.prototype={replace:function(n){var t=this;return n.parent&&n.remove(),t.insert(n,t),t.remove(),t},attr:function(n,t){var u=this,i,r,f;if("string"!=typeof n){for(r in n)u.attr(r,n[r]);return u}if(i=u.attributes){if(t!==f){if(null===t){if(n in i.map)for(delete i.map[n],r=i.length;r--;)if(i[r].name===n)return i=i.splice(r,1),u;return u}if(n in i.map){for(r=i.length;r--;)if(i[r].name===n){i[r].value=t;break}}else i.push({name:n,value:t});return i.map[n]=t,u}return i.map[n]}},clone:function(){var r=this,u=new n(r.name,r.type),f,o,e,t,i;if(e=r.attributes){for(i=[],i.map={},f=0,o=e.length;o>f;f++)t=e[f],"id"!==t.name&&(i[i.length]={name:t.name,value:t.value},i.map[t.name]=t.value);u.attributes=i}return u.value=r.value,u.shortEnded=r.shortEnded,u},wrap:function(n){var t=this;return t.parent.insert(n,t),n.append(t),t},unwrap:function(){for(var t=this,i,n=t.firstChild;n;)i=n.next,t.insert(n,t,!0),n=i;t.remove()},remove:function(){var n=this,t=n.parent,i=n.next,r=n.prev;return t&&(t.firstChild===n?(t.firstChild=i,i&&(i.prev=null)):r.next=i,t.lastChild===n?(t.lastChild=r,r&&(r.next=null)):i.prev=r,n.parent=n.next=n.prev=null),n},append:function(n){var t=this,i;return n.parent&&n.remove(),i=t.lastChild,i?(i.next=n,n.prev=i,t.lastChild=n):t.lastChild=t.firstChild=n,n.parent=t,n},insert:function(n,t,i){var r;return n.parent&&n.remove(),r=t.parent||this,i?(t===r.firstChild?r.firstChild=n:t.prev.next=n,n.prev=t.prev,n.next=t,t.prev=n):(t===r.lastChild?r.lastChild=n:t.next.prev=n,n.next=t.next,n.prev=t,t.next=n),n.parent=r,n},getAll:function(n){for(var r=this,u=[],i=r.firstChild;i;i=t(i,r))i.name===n&&u.push(i);return u},empty:function(){var i=this,r,u,n;if(i.firstChild){for(r=[],n=i.firstChild;n;n=t(n,i))r.push(n);for(u=r.length;u--;)n=r[u],n.parent=n.firstChild=n.lastChild=n.next=n.prev=null}return i.firstChild=i.lastChild=null,i},isEmpty:function(n){var e=this,r=e.firstChild,u,f;if(r)do{if(1===r.type){if(r.attributes.map["data-mce-bogus"])continue;if(n[r.name])return!1;for(u=r.attributes.length;u--;)if(f=r.attributes[u].name,"name"===f||0===f.indexOf("data-mce-bookmark"))return!1}if(8===r.type||3===r.type&&!i.test(r.value))return!1}while(r=t(r,e));return!0},walk:function(n){return t(this,null,n)}},n.create=function(t,i){var u,f;if(u=new n(t,r[t]||1),i)for(f in i)u.attr(f,i[f]);return u},n});i(l,[r],function(n){function t(n,t){return n?n.split(t||" "):[]}function s(n){function u(n,i,r){function c(n,t){for(var r={},i=0,u=n.length;u>i;i++)r[n[i]]=t||{};return r}var e,u,o,f=arguments;for(r=r||[],i=i||"","string"==typeof r&&(r=t(r)),u=3;u<f.length;u++)"string"==typeof f[u]&&(f[u]=t(f[u])),r.push.apply(r,f[u]);for(n=t(n),e=n.length;e--;)o=[].concat(l,t(i)),s[n[e]]={attributes:c(o),attributesOrder:o,children:c(r,h)}}function f(n,i){var u,f,r,e;for(n=t(n),u=n.length,i=t(i);u--;)for(f=s[n[u]],r=0,e=i.length;e>r;r++)f.attributes[i[r]]={},f.attributesOrder.push(i[r])}var s={},l,c,o,e,a,v;return r[n]?r[n]:(l=t("id accesskey class dir lang style tabindex title"),c=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),o=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=n&&(l.push.apply(l,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),c.push.apply(c,t("article aside details dialog figure header footer hgroup section nav")),o.push.apply(o,t("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))),"html5-strict"!=n&&(l.push("xml:lang"),v=t("acronym applet basefont big font strike tt"),o.push.apply(o,v),i(v,function(n){u(n,"",o)}),a=t("center dir isindex noframes"),c.push.apply(c,a),e=[].concat(c,o),i(a,function(n){u(n,"",e)})),e=e||[].concat(c,o),u("html","manifest","head body"),u("head","","base command link meta noscript script style title"),u("title hr noscript br"),u("base","href target"),u("link","href rel media hreflang type sizes hreflang"),u("meta","name http-equiv content charset"),u("style","media type scoped"),u("script","src async defer type charset"),u("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",e),u("address dt dd div caption","",e),u("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),u("blockquote","cite",e),u("ol","reversed start type","li"),u("ul","","li"),u("li","value",e),u("dl","","dt dd"),u("a","href target rel media hreflang type",o),u("q","cite",o),u("ins del","cite datetime",e),u("img","src sizes srcset alt usemap ismap width height"),u("iframe","src name width height",e),u("embed","src type width height"),u("object","data type typemustmatch name usemap form width height",e,"param"),u("param","name value"),u("map","name",e,"area"),u("area","alt coords shape href target rel media hreflang type"),u("table","border","caption colgroup thead tfoot tbody tr"+("html4"==n?" col":"")),u("colgroup","span","col"),u("col","span"),u("tbody thead tfoot","","tr"),u("tr","","td th"),u("td","colspan rowspan headers",e),u("th","colspan rowspan headers scope abbr",e),u("form","accept-charset action autocomplete enctype method name novalidate target",e),u("fieldset","disabled form name",e,"legend"),u("label","form for",o),u("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),u("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==n?e:o),u("select","disabled form multiple name required size","option optgroup"),u("optgroup","disabled label","option"),u("option","disabled label selected value"),u("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),u("menu","type label",e,"li"),u("noscript","",e),"html4"!=n&&(u("wbr"),u("ruby","",o,"rt rp"),u("figcaption","",e),u("mark rt rp summary bdi","",o),u("canvas","width height",e),u("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",e,"track source"),u("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",e,"track source"),u("picture","","img source"),u("source","src srcset type media sizes"),u("track","kind src srclang label default"),u("datalist","",o,"option"),u("article section nav aside header footer","",e),u("hgroup","","h1 h2 h3 h4 h5 h6"),u("figure","",e,"figcaption"),u("time","datetime",o),u("dialog","open",e),u("command","type label icon disabled checked radiogroup command"),u("output","for form name",o),u("progress","value max",o),u("meter","value min max low high optimum",o),u("details","open",e,"summary"),u("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=n&&(f("script","language xml:space"),f("style","xml:space"),f("object","declare classid code codebase codetype archive standby align border hspace vspace"),f("embed","align name hspace vspace"),f("param","valuetype type"),f("a","charset name rev shape coords"),f("br","clear"),f("applet","codebase archive code object alt name width height align hspace vspace"),f("img","name longdesc align border hspace vspace"),f("iframe","longdesc frameborder marginwidth marginheight scrolling align"),f("font basefont","size color face"),f("input","usemap align"),f("select","onchange"),f("textarea"),f("h1 h2 h3 h4 h5 h6 div p legend caption","align"),f("ul","type compact"),f("li","type"),f("ol dl menu dir","compact"),f("pre","width xml:space"),f("hr","align noshade size width"),f("isindex","prompt"),f("table","summary width frame rules cellspacing cellpadding align bgcolor"),f("col","width align char charoff valign"),f("colgroup","width align char charoff valign"),f("thead","align char charoff valign"),f("tr","align char charoff valign bgcolor"),f("th","axis align char charoff valign nowrap bgcolor width height"),f("form","accept"),f("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),f("tfoot","align char charoff valign"),f("tbody","align char charoff valign"),f("area","nohref"),f("body","background bgcolor text link vlink alink")),"html4"!=n&&(f("input button select textarea","autofocus"),f("input textarea","placeholder"),f("a","download"),f("link script img","crossorigin"),f("iframe","sandbox seamless allowfullscreen")),i(t("a form meter progress dfn"),function(n){s[n]&&delete s[n].children[n]}),delete s.caption.children.table,r[n]=s,s)}function e(n,t){var r;return n&&(r={},"string"==typeof n&&(n={"*":n}),i(n,function(n,i){r[i]=r[i.toUpperCase()]="map"==t?u(n,/[, ]/):o(n,/[, ]/)})),r}var r={},h={},u=n.makeMap,i=n.each,f=n.extend,o=n.explode,c=n.inArray;return function(n){function v(t,i,e){var o=n[t];return o?o=u(o,/[, ]/,u(o.toUpperCase(),/[, ]/)):(o=r[t],o||(o=u(i," ",u(i.toUpperCase()," ")),o=f(o,e),r[t]=o)),o}function it(n){return new RegExp("^"+n.replace(/([?+*])/g,".$1")+"$")}function y(n){var b,rt,k,ut,r,i,e,a,v,f,d,h,o,s,g,y,nt,tt,w,ft=/[*?+]/;if(n)for(n=t(n,","),l["@"]&&(y=l["@"].attributes,nt=l["@"].attributesOrder),b=0,rt=n.length;rt>b;b++)if(r=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/.exec(n[b])){if(s=r[1],v=r[2],g=r[3],a=r[5],h={},o=[],i={attributes:h,attributesOrder:o},"#"===s&&(i.paddEmpty=!0),"-"===s&&(i.removeEmpty=!0),"!"===r[4]&&(i.removeEmptyAttrs=!0),y){for(tt in y)h[tt]=y[tt];o.push.apply(o,nt)}if(a)for(a=t(a,"|"),k=0,ut=a.length;ut>k;k++)if(r=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/.exec(a[k])){if(e={},d=r[1],f=r[2].replace(/::/g,":"),s=r[3],w=r[4],"!"===d&&(i.attributesRequired=i.attributesRequired||[],i.attributesRequired.push(f),e.required=!0),"-"===d){delete h[f];o.splice(c(o,f),1);continue}s&&("="===s&&(i.attributesDefault=i.attributesDefault||[],i.attributesDefault.push({name:f,value:w}),e.defaultValue=w),":"===s&&(i.attributesForced=i.attributesForced||[],i.attributesForced.push({name:f,value:w}),e.forcedValue=w),"<"===s&&(e.validValues=u(w,"?")));ft.test(f)?(i.attributePatterns=i.attributePatterns||[],e.pattern=it(f),i.attributePatterns.push(e)):(h[f]||o.push(f),h[f]=e)}y||"@"!=v||(y=h,nt=o);g&&(i.outputName=v,l[g]=i);ft.test(v)?(i.pattern=it(v),p.push(i)):l[v]=i}}function rt(n){l={};p=[];y(n);i(d,function(n,t){a[t]=n.children})}function ut(n){var u=/^(~)?(.+)$/;n&&(r.text_block_elements=r.block_elements=null,i(t(n,","),function(n){var o=u.exec(n),s="~"===o[1],e=s?"span":"div",t=o[2],r;(a[t]=a[e],vt[t]=e,s||(w[t.toUpperCase()]={},w[t]={}),l[t])||(r=l[e],r=f({},r),delete r.removeEmptyAttrs,delete r.removeEmpty,l[t]=r);i(a,function(n,i){n[e]&&(a[i]=n=f({},a[i]),n[t]=n[e])})}))}function b(n){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;n&&i(t(n,","),function(n){var u=r.exec(n),e,o;u&&(o=u[1],e=o?a[u[2]]:a[u[2]]={"#comment":{}},e=a[u[2]],i(t(u[3],"|"),function(n){"-"===o?(a[u[2]]=e=f({},a[u[2]]),delete e[n]):e[n]={}}))})}function k(n){var t=l[n],i;if(t)return t;for(i=p.length;i--;)if(t=p[i],t.pattern.test(n))return t}var h=this,l={},a={},p=[],ft,et,d,ot,st,g,ht,ct,w,nt,lt,tt,at,vt={},yt={};n=n||{};d=s(n.schema);n.verify_html===!1&&(n.valid_elements="*[*]");ft=e(n.valid_styles);et=e(n.invalid_styles,"map");ct=e(n.valid_classes,"map");ot=v("whitespace_elements","pre script noscript style textarea video audio iframe object");st=v("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");g=v("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track");ht=v("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");nt=v("non_empty_elements","td th iframe video audio object script",g);lt=v("move_caret_before_on_enter_elements","table",nt);tt=v("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");w=v("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup",tt);at=v("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");i((n.special||"script noscript style textarea").split(" "),function(n){yt[n]=new RegExp("<\/"+n+"[^>]*>","gi")});n.valid_elements?rt(n.valid_elements):(i(d,function(n,t){l[t]={attributes:n.attributes,attributesOrder:n.attributesOrder};a[t]=n.children}),"html5"!=n.schema&&i(t("strong/b em/i"),function(n){n=t(n,"/");l[n[1]].outputName=n[0]}),l.img.attributesDefault=[{name:"alt",value:""}],i(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(n){l[n]&&(l[n].removeEmpty=!0)}),i(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(n){l[n].paddEmpty=!0}),i(t("span"),function(n){l[n].removeEmptyAttrs=!0}));ut(n.custom_elements);b(n.valid_children);y(n.extended_valid_elements);b("+ol[ul|ol],+ul[ul|ol]");n.invalid_elements&&i(o(n.invalid_elements),function(n){l[n]&&delete l[n]});k("span")||y("span[!data-mce-type|*]");h.children=a;h.getValidStyles=function(){return ft};h.getInvalidStyles=function(){return et};h.getValidClasses=function(){return ct};h.getBoolAttrs=function(){return ht};h.getBlockElements=function(){return w};h.getTextBlockElements=function(){return tt};h.getTextInlineElements=function(){return at};h.getShortEndedElements=function(){return g};h.getSelfClosingElements=function(){return st};h.getNonEmptyElements=function(){return nt};h.getMoveCaretBeforeOnEnterElements=function(){return lt};h.getWhiteSpaceElements=function(){return ot};h.getSpecialElements=function(){return yt};h.isValidChild=function(n,t){var i=a[n];return!(!i||!i[t])};h.isValid=function(n,t){var i,r,u=k(n);if(u){if(!t||u.attributes[t])return!0;if(i=u.attributePatterns)for(r=i.length;r--;)if(i[r].pattern.test(n))return!0}return!1};h.getElementRule=k;h.getCustomElements=function(){return vt};h.addValidElements=y;h.setValidElements=rt;h.addCustomElements=ut;h.addValidChildren=b;h.elements=l}});i(lt,[l,c,r],function(n,t,i){function r(n,t,i){var f=1,e,r,u,o;for(o=n.getShortEndedElements(),u=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,u.lastIndex=e=i;r=u.exec(t);){if(e=u.lastIndex,"/"===r[1])f--;else if(!r[1]){if(r[2]in o)continue;f++}if(0===f)break}return e}function u(u,e){function s(){}var o=this;u=u||{};o.schema=e=e||new n;u.fix_self_closing!==!1&&(u.fix_self_closing=!0);f("comment cdata text start end pi doctype".split(" "),function(n){n&&(o[n]=u[n]||s)});o.parse=function(n){function ht(n){for(var i,t=a.length;t--&&a[t].name!==n;);if(t>=0){for(i=a.length-1;i>=t;i--)n=a[i],n.valid&&l.end(n.name);a.length=t}}function gt(n,t,i,r,f){var e,s,o;if(t=t.toLowerCase(),i=t in at?t:st(i||r||f||""),d&&!tt&&0!==t.indexOf("data-")){if(e=vt[t],!e&&it){for(s=it.length;s--&&(e=it[s],!e.pattern.test(t)););-1===s&&(e=null)}if(!e)return;if(e.validValues&&!(i in e.validValues))return}if(ni[t]&&!u.allow_script_urls){o=i.replace(/[\s\u0000-\u001F]+/g,"");try{o=decodeURIComponent(o)}catch(c){o=unescape(o)}if(ti.test(o))return;if(!u.allow_html_data_urls&&ii.test(o)&&!/^data:image\//i.test(o))return}h.map[t]=i;h.push({name:t,value:i})}var l=this,o,s=0,f,et,a=[],h,c,nt,w,tt,ct,lt,at,ot,d,b,v,p,k,vt,it,rt,ut,ft,yt,pt,g,wt,bt,y,kt=0,st=t.decode,dt,ni=i.makeMap("src,href,data,background,formaction,poster"),ti=/((java|vb)script|mhtml):/i,ii=/^data:/i;for(g=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),wt=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,lt=e.getShortEndedElements(),pt=u.self_closing_elements||e.getSelfClosingElements(),at=e.getBoolAttrs(),d=u.validate,ct=u.remove_internals,dt=u.fix_self_closing,bt=e.getSpecialElements();o=g.exec(n);){if(s<o.index&&l.text(st(n.substr(s,o.index-s))),f=o[6])f=f.toLowerCase(),":"===f.charAt(0)&&(f=f.substr(1)),ht(f);else if(f=o[7]){if(f=f.toLowerCase(),":"===f.charAt(0)&&(f=f.substr(1)),ot=f in lt,dt&&pt[f]&&a.length>0&&a[a.length-1].name===f&&ht(f),!d||(b=e.getElementRule(f))){if(v=!0,d&&(vt=b.attributes,it=b.attributePatterns),(k=o[8])?(tt=-1!==k.indexOf("data-mce-type"),tt&&ct&&(v=!1),h=[],h.map={},k.replace(wt,gt)):(h=[],h.map={}),d&&!tt){if(rt=b.attributesRequired,ut=b.attributesDefault,ft=b.attributesForced,yt=b.removeEmptyAttrs,yt&&!h.length&&(v=!1),ft)for(c=ft.length;c--;)p=ft[c],w=p.name,y=p.value,"{$uid}"===y&&(y="mce_"+kt++),h.map[w]=y,h.push({name:w,value:y});if(ut)for(c=ut.length;c--;)p=ut[c],w=p.name,w in h.map||(y=p.value,"{$uid}"===y&&(y="mce_"+kt++),h.map[w]=y,h.push({name:w,value:y}));if(rt){for(c=rt.length;c--&&!(rt[c]in h.map););-1===c&&(v=!1)}if(p=h.map["data-mce-bogus"]){if("all"===p){s=r(e,n,g.lastIndex);g.lastIndex=s;continue}v=!1}}v&&l.start(f,h,ot)}else v=!1;if(et=bt[f]){et.lastIndex=s=o.index+o[0].length;(o=et.exec(n))?(v&&(nt=n.substr(s,o.index-s)),s=o.index+o[0].length):(nt=n.substr(s),s=n.length);v&&(nt.length>0&&l.text(nt,!0),l.end(f));g.lastIndex=s;continue}ot||(k&&k.indexOf("/")==k.length-1?v&&l.end(f):a.push({name:f,valid:v}))}else(f=o[1])?(">"===f.charAt(0)&&(f=" "+f),u.allow_conditional_comments||"[if"!==f.substr(0,3)||(f=" "+f),l.comment(f)):(f=o[2])?l.cdata(f):(f=o[3])?l.doctype(f):(f=o[4])&&l.pi(f,o[5]);s=o.index+o[0].length}for(s<n.length&&l.text(st(n.substr(s))),c=a.length-1;c>=0;c--)f=a[c],f.valid&&l.end(f.name)}}var f=i.each;return u.findEndTag=r,u});i(at,[p,l,lt,r],function(n,t,i,r){var u=r.makeMap,f=r.each,e=r.explode,o=r.extend;return function(r,s){function y(t){var v,i,f,e,y,l,a,c,o,p,b,w,r,k;for(b=u("tr,td,th,tbody,thead,tfoot,table"),p=s.getNonEmptyElements(),w=s.getTextBlockElements(),v=0;v<t.length;v++)if(i=t[v],i.parent&&!i.fixed)if(w[i.name]&&"li"==i.parent.name){for(r=i.next;r&&w[r.name];)r.name="li",r.fixed=!0,i.parent.insert(r,i.parent),r=r.next;i.unwrap(i)}else{for(e=[i],f=i.parent;f&&!s.isValidChild(f.name,i.name)&&!b[f.name];f=f.parent)e.push(f);if(f&&e.length>1){for(e.reverse(),y=l=h.filterNode(e[0].clone()),o=0;o<e.length-1;o++){for(s.isValidChild(l.name,e[o].name)?(a=h.filterNode(e[o].clone()),l.append(a)):a=l,c=e[o].firstChild;c&&c!=e[o+1];)k=c.next,a.append(c),c=k;l=a}y.isEmpty(p)?f.insert(i,e[0],!0):(f.insert(y,e[0],!0),f.insert(i,y));f=e[0];(f.isEmpty(p)||f.firstChild===f.lastChild&&"br"===f.firstChild.name)&&f.empty().remove()}else if(i.parent){if("li"===i.name){if(r=i.prev,r&&("ul"===r.name||"ul"===r.name)){r.append(i);continue}if(r=i.next,r&&("ul"===r.name||"ul"===r.name)){r.insert(i,r.firstChild,!0);continue}i.wrap(h.filterNode(new n("ul",1)));continue}s.isValidChild(i.parent.name,"div")&&s.isValidChild("div",i.name)?i.wrap(h.filterNode(new n("div",1))):"style"===i.name||"script"===i.name?i.empty().remove():i.unwrap()}}}var h=this,v={},c=[],l={},a={};r=r||{};r.validate="validate"in r?r.validate:!0;r.root_name=r.root_name||"body";h.schema=s=s||new t;h.filterNode=function(n){var r,t,i;for((t in v)&&(i=l[t],i?i.push(n):l[t]=[n]),r=c.length;r--;)t=c[r].name,t in n.attributes.map&&(i=a[t],i?i.push(n):a[t]=[n]);return n};h.addNodeFilter=function(n,t){f(e(n),function(n){var i=v[n];i||(v[n]=i=[]);i.push(t)})};h.addAttributeFilter=function(n,t){f(e(n),function(n){for(var i=0;i<c.length;i++)if(c[i].name===n)return void c[i].callbacks.push(t);c.push({name:n,callbacks:[t]})})};h.parse=function(t,f){function wt(){function i(t){t&&(n=t.firstChild,n&&3==n.type&&(n.value=n.value.replace(ut,"")),n=t.lastChild,n&&3==n.type&&(n.value=n.value.replace(ft,"")))}var n=d.firstChild,u,t;if(s.isValidChild(d.name,et.toLowerCase())){for(;n;)u=n.next,3==n.type||1==n.type&&"p"!==n.name&&!g[n.name]&&!n.attr("data-mce-type")?t?t.append(n):(t=k(et,1),t.attr(r.forced_root_block_attrs),d.insert(t,n),t.append(n)):(i(t),t=null),n=u;i(t)}}function k(t,i){var r=new n(t,i),u;return t in v&&(u=l[t],u?u.push(r):l[t]=[r]),r}function ot(n){for(var i,r,t=n.prev;t&&3===t.type;)i=t.value.replace(ft,""),i.length>0?(t.value=i,t=t.prev):(r=t.prev,t.remove(),t=r)}function bt(n){var t,i={};for(t in n)"li"!==t&&"p"!=t&&(i[t]=n[t]);return i}var at,d,e,w,b,it,h,vt,p,rt,tt,g,ut,st=[],nt,ft,yt,ht,ct,lt,pt,et;if(f=f||{},l={},a={},g=o(u("script,style,head,html,body,title,meta,param"),s.getBlockElements()),pt=s.getNonEmptyElements(),lt=s.children,tt=r.validate,et="forced_root_block"in f?f.forced_root_block:r.forced_root_block,ct=s.getWhiteSpaceElements(),ut=/^[ \t\r\n]+/,ft=/[ \t\r\n]+$/,yt=/[ \t\r\n]+/g,ht=/^[ \t\r\n]+$/,at=new i({validate:tt,allow_script_urls:r.allow_script_urls,allow_conditional_comments:r.allow_conditional_comments,self_closing_elements:bt(s.getSelfClosingElements()),cdata:function(n){e.append(k("#cdata",4)).value=n},text:function(n,t){var i;nt||(n=n.replace(yt," "),e.lastChild&&g[e.lastChild.name]&&(n=n.replace(ut,"")));0!==n.length&&(i=k("#text",3),i.raw=!!t,e.append(i).value=n)},comment:function(n){e.append(k("#comment",8)).value=n},pi:function(n,t){e.append(k(n,7)).value=t;ot(e)},doctype:function(n){var t;t=e.append(k("#doctype",10));t.value=n;ot(e)},start:function(n,t,i){var r,f,h,u,o;if(h=tt?s.getElementRule(n):{}){for(r=k(h.outputName||n,1),r.attributes=t,r.shortEnded=i,e.append(r),o=lt[e.name],o&&lt[r.name]&&!o[r.name]&&st.push(r),f=c.length;f--;)u=c[f].name,u in t.map&&(p=a[u],p?p.push(r):a[u]=[r]);g[n]&&ot(r);i||(e=r);!nt&&ct[n]&&(nt=!0)}},end:function(t){var i,f,r,u,o;if(f=tt?s.getElementRule(t):{}){if(g[t]&&!nt){if(i=e.firstChild,i&&3===i.type)if(r=i.value.replace(ut,""),r.length>0)i.value=r,i=i.next;else for(u=i.next,i.remove(),i=u;i&&3===i.type;)r=i.value,u=i.next,(0===r.length||ht.test(r))&&(i.remove(),i=u),i=u;if(i=e.lastChild,i&&3===i.type)if(r=i.value.replace(ft,""),r.length>0)i.value=r,i=i.prev;else for(u=i.prev,i.remove(),i=u;i&&3===i.type;)r=i.value,u=i.prev,(0===r.length||ht.test(r))&&(i.remove(),i=u),i=u}if(nt&&ct[t]&&(nt=!1),(f.removeEmpty||f.paddEmpty)&&e.isEmpty(pt))if(f.paddEmpty)e.empty().append(new n("#text","3")).value=" ";else if(!e.attributes.map.name&&!e.attributes.map.id)return o=e.parent,g[e.name]?e.empty().remove():e.unwrap(),void(e=o);e=e.parent}}},s),d=e=new n(f.context||r.root_name,11),at.parse(t),tt&&st.length&&(f.context?f.invalid=!0:y(st)),et&&("body"==d.name||f.isRootContent)&&wt(),!f.invalid){for(rt in l){for(p=v[rt],w=l[rt],h=w.length;h--;)w[h].parent||w.splice(h,1);for(b=0,it=p.length;it>b;b++)p[b](w,rt,f)}for(b=0,it=c.length;it>b;b++)if(p=c[b],p.name in a){for(w=a[p.name],h=w.length;h--;)w[h].parent||w.splice(h,1);for(h=0,vt=p.callbacks.length;vt>h;h++)p.callbacks[h](w,p.name,f)}}return d};r.remove_trailing_brs&&h.addNodeFilter("br",function(t){var e,v=t.length,r,l=o({},s.getBlockElements()),y=s.getNonEmptyElements(),i,f,u,h,c,a;for(l.body=1,e=0;v>e;e++)if(r=t[e],i=r.parent,l[r.parent.name]&&r===i.lastChild){for(u=r.prev;u;){if(h=u.name,"span"!==h||"bookmark"!==u.attr("data-mce-type")){if("br"!==h)break;if("br"===h){r=null;break}}u=u.prev}r&&(r.remove(),i.isEmpty(y)&&(c=s.getElementRule(i.name),c&&(c.removeEmpty?i.remove():c.paddEmpty&&(i.empty().append(new n("#text",3)).value=" "))))}else{for(f=r;i&&i.firstChild===f&&i.lastChild===f&&(f=i,!l[i.name]);)i=i.parent;f===i&&(a=new n("#text",3),a.value=" ",r.replace(a))}});r.allow_html_in_named_anchor||h.addAttributeFilter("id,name",function(n){for(var r=n.length,i,u,f,t;r--;)if(t=n[r],"a"===t.name&&t.firstChild&&!t.attr("href")){f=t.parent;i=t.lastChild;do u=i.prev,f.insert(i,t),i=u;while(i)}});r.validate&&s.getValidClasses()&&h.addAttributeFilter("class",function(n){for(var h=n.length,u,o,f,e,t,c=s.getValidClasses(),i,r;h--;){for(u=n[h],o=u.attr("class").split(" "),t="",f=0;f<o.length;f++)e=o[f],r=!1,i=c["*"],i&&i[e]&&(r=!0),i=c[u.name],!r&&i&&i[e]&&(r=!0),r&&(t&&(t+=" "),t+=e);t.length||(t=null);u.attr("class",t)}})}});i(fi,[c,r],function(n,t){var i=t.makeMap;return function(t){var r=[],u,o,e,f,s;return t=t||{},u=t.indent,o=i(t.indent_before||""),e=i(t.indent_after||""),f=n.getEncodeFunc(t.entity_encoding||"raw",t.entities),s="html"==t.element_format,{start:function(n,t,i){var c,a,l,h;if(u&&o[n]&&r.length>0&&(h=r[r.length-1],h.length>0&&"\n"!==h&&r.push("\n")),r.push("<",n),t)for(c=0,a=t.length;a>c;c++)l=t[c],r.push(" ",l.name,'="',f(l.value,!0),'"');r[r.length]=!i||s?">":" />";i&&u&&e[n]&&r.length>0&&(h=r[r.length-1],h.length>0&&"\n"!==h&&r.push("\n"))},end:function(n){var t;r.push("<\/",n,">");u&&e[n]&&r.length>0&&(t=r[r.length-1],t.length>0&&"\n"!==t&&r.push("\n"))},text:function(n,t){n.length>0&&(r[r.length]=t?n:f(n))},cdata:function(n){r.push("<![CDATA[",n,"]\]>")},comment:function(n){r.push("<!--",n,"-->")},pi:function(n,t){t?r.push("<?",n," ",f(t),"?>"):r.push("<?",n,"?>");u&&r.push("\n")},doctype:function(n){r.push("<!DOCTYPE",n,">",u?"\n":"")},reset:function(){r.length=0},getContent:function(){return r.join("").replace(/\n$/,"")}}}});i(tt,[fi,l],function(n,t){return function(i,r){var f=this,u=new n(i);i=i||{};i.validate="validate"in i?i.validate:!0;f.schema=r=r||new t;f.writer=u;f.serialize=function(n){function t(n){var y=f[n.type],p,a,i,o,c,s,h,l,v;if(y)y(n);else{if(p=n.name,a=n.shortEnded,i=n.attributes,e&&i&&i.length>1){for(s=[],s.map={},v=r.getElementRule(n.name),h=0,l=v.attributesOrder.length;l>h;h++)o=v.attributesOrder[h],o in i.map&&(c=i.map[o],s.map[o]=c,s.push({name:o,value:c}));for(h=0,l=i.length;l>h;h++)o=i[h].name,o in s.map||(c=i.map[o],s.map[o]=c,s.push({name:o,value:c}));i=s}if(u.start(n.name,i,a),!a){if(n=n.firstChild)do t(n);while(n=n.next);u.end(p)}}}var f,e;return e=i.validate,f={3:function(n){u.text(n.value,n.raw)},8:function(n){u.comment(n.value)},7:function(n){u.pi(n.name,n.value)},10:function(n){u.doctype(n.value)},4:function(n){u.cdata(n.value)},11:function(n){if(n=n.firstChild)do t(n);while(n=n.next)}},u.reset(),1!=n.type||i.inner?f[11](n):t(n),u.getContent()}}});i(ei,[o,at,c,tt,p,l,u,r],function(n,t,i,r,u,f,e,o){var s=o.each,h=o.trim,c=n.DOM;return function(n,u){var l,a,o;return u&&(l=u.dom,a=u.schema),l=l||c,a=a||new f(n),n.entity_encoding=n.entity_encoding||"named",n.remove_trailing_brs="remove_trailing_brs"in n?n.remove_trailing_brs:!0,o=new t(n,a),o.addAttributeFilter("data-mce-tabindex",function(n,t){for(var r=n.length,i;r--;)i=n[r],i.attr("tabindex",i.attributes.map["data-mce-tabindex"]),i.attr(t,null)}),o.addAttributeFilter("src,href,style",function(t,i){for(var f=t.length,u,r,e="data-mce-"+i,o=n.url_converter,s=n.url_converter_scope,h;f--;)u=t[f],r=u.attributes.map[e],r!==h?(u.attr(i,r.length>0?r:null),u.attr(e,null)):(r=u.attributes.map[i],"style"===i?r=l.serializeStyle(l.parseStyle(r),u.name):o&&(r=o.call(s,r,i,u.name)),u.attr(i,r.length>0?r:null))}),o.addAttributeFilter("class",function(n){for(var r=n.length,i,t;r--;)i=n[r],t=i.attr("class"),t&&(t=i.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),i.attr("class",t.length>0?t:null))}),o.addAttributeFilter("data-mce-type",function(n,t,i){for(var u=n.length,r;u--;)r=n[u],"bookmark"!==r.attributes.map["data-mce-type"]||i.cleanup||r.remove()}),o.addNodeFilter("noscript",function(n){for(var r=n.length,t;r--;)t=n[r].firstChild,t&&(t.value=i.decode(t.value))}),o.addNodeFilter("script,style",function(n,t){function f(n){return n.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var e=n.length,i,r,u;e--;)i=n[e],r=i.firstChild?i.firstChild.value:"","script"===t?(u=i.attr("type"),u&&i.attr("type","mce-no/type"==u?null:u.replace(/^mce\-/,"")),r.length>0&&(i.firstChild.value="// <![CDATA[\n"+f(r)+"\n// ]\]>")):r.length>0&&(i.firstChild.value="<!--\n"+f(r)+"\n-->")}),o.addNodeFilter("#comment",function(n){for(var i=n.length,t;i--;)t=n[i],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),o.addNodeFilter("xml:namespace,input",function(n,t){for(var r=n.length,i;r--;)i=n[r],7===i.type?i.remove():1===i.type&&("input"!==t||"type"in i.attributes.map||i.attr("type","text"))}),n.fix_list_elements&&o.addNodeFilter("ul,ol",function(n){for(var r=n.length,t,i;r--;)t=n[r],i=t.parent,("ul"===i.name||"ol"===i.name)&&t.prev&&"li"===t.prev.name&&t.prev.append(t)}),o.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(n,t){for(var i=n.length;i--;)n[i].attr(t,null)}),{schema:a,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:function(t,i){var v=this,f,u,c,y,p;return e.ie&&l.select("script,style,select,map").length>0?(p=t.innerHTML,t=t.cloneNode(!1),l.setHTML(t,p)):t=t.cloneNode(!0),f=t.ownerDocument.implementation,f.createHTMLDocument&&(u=f.createHTMLDocument(""),s("BODY"==t.nodeName?t.childNodes:[t],function(n){u.body.appendChild(u.importNode(n,!0))}),t="BODY"!=t.nodeName?u.body.firstChild:u.body,c=l.doc,l.doc=u),i=i||{},i.format=i.format||"html",i.selection&&(i.forced_root_block=""),i.no_events||(i.node=t,v.onPreProcess(i)),y=new r(n,a),i.content=y.serialize(o.parse(h(i.getInner?t.innerHTML:l.getOuterHTML(t)),i)),i.cleanup||(i.content=i.content.replace(/\uFEFF/g,"")),i.no_events||v.onPostProcess(i),c&&(l.doc=c),i.node=null,i.content},addRules:function(n){a.addValidElements(n)},setRules:function(n){a.setValidElements(n)},onPreProcess:function(n){u&&u.fire("PreProcess",n)},onPostProcess:function(n){u&&u.fire("PostProcess",n)}}}});i(oi,[],function(){function n(n){function i(t,i){var r,c=0,s,a,l,f,e,h,o=-1,u;if(r=t.duplicate(),r.collapse(i),u=r.parentElement(),u.ownerDocument===n.dom.doc){for(;"false"===u.contentEditable;)u=u.parentNode;if(!u.hasChildNodes())return{node:u,inside:1};for(l=u.children,s=l.length-1;s>=c;)if(h=Math.floor((c+s)/2),f=l[h],r.moveToElementText(f),o=r.compareEndPoints(i?"StartToStart":"EndToEnd",t),o>0)s=h-1;else{if(!(0>o))return{node:f};c=h+1}if(0>o)for(f?r.collapse(!1):(r.moveToElementText(u),r.collapse(!0),f=u,a=!0),e=0;0!==r.compareEndPoints(i?"StartToStart":"StartToEnd",t)&&0!==r.move("character",1)&&u==r.parentElement();)e++;else for(r.collapse(!0),e=0;0!==r.compareEndPoints(i?"StartToStart":"StartToEnd",t)&&0!==r.move("character",-1)&&u==r.parentElement();)e++;return{node:f,position:o,offset:e,inside:a}}}function u(){function s(n){var s=i(f,n),r,o,e=0,t,c,h;if(r=s.node,o=s.offset,s.inside&&!r.hasChildNodes())return void u[n?"setStart":"setEnd"](r,0);if(o===c)return void u[n?"setStartBefore":"setEndAfter"](r);if(s.position<0){if(t=s.inside?r.firstChild:r.nextSibling,!t)return void u[n?"setStartAfter":"setEndAfter"](r);if(!o)return void(3==t.nodeType?u[n?"setStart":"setEnd"](t,0):u[n?"setStartBefore":"setEndBefore"](t));for(;t;){if(3==t.nodeType&&(h=t.nodeValue,e+=h.length,e>=o)){r=t;e-=o;e=h.length-e;break}t=t.nextSibling}}else{if(t=r.previousSibling,!t)return u[n?"setStartBefore":"setEndBefore"](r);if(!o)return void(3==r.nodeType?u[n?"setStart":"setEnd"](t,r.nodeValue.length):u[n?"setStartAfter":"setEndAfter"](t));for(;t;){if(3==t.nodeType&&(e+=t.nodeValue.length,e>=o)){r=t;e-=o;break}t=t.previousSibling}}u[n?"setStart":"setEnd"](r,e)}var f=n.getRng(),u=t.createRng(),e,h,o,c,l;if(e=f.item?f.item(0):f.parentElement(),e.ownerDocument!=t.doc)return u;if(h=n.isCollapsed(),f.item)return u.setStart(e.parentNode,t.nodeIndex(e)),u.setEnd(u.startContainer,u.startOffset+1),u;try{s(!0);h||s()}catch(a){if(-2147024809!=a.number)throw a;l=r.getBookmark(2);o=f.duplicate();o.collapse(!0);e=o.parentElement();h||(o=f.duplicate(),o.collapse(!1),c=o.parentElement(),c.innerHTML=c.innerHTML);e.innerHTML=e.innerHTML;r.moveToBookmark(l);f=n.getRng();s(!0);h||s()}return u}var r=this,t=n.dom,f=!1;this.getBookmark=function(r){function e(n){for(var u,r,e=[],i=n.parentNode,f=t.getRoot().parentNode;i!=f&&9!==i.nodeType;){for(u=i.children,r=u.length;r--;)if(n===u[r]){e.push(r);break}n=i;i=i.parentNode}return e}function o(n){var t;return t=i(f,n),t?{position:t.position,offset:t.offset,indexes:e(t.node),inside:t.inside}:void 0}var f=n.getRng(),u={};return 2===r&&(f.item?u.start={ctrl:!0,indexes:e(f.item(0))}:(u.start=o(!0),n.isCollapsed()||(u.end=o()))),u};this.moveToBookmark=function(n){function u(n){for(var u,f,i=t.getRoot(),r=n.length-1;r>=0;r--)f=i.children,u=n[r],u<=f.length-1&&(i=f[u]);return i}function f(t){var e=n[t?"start":"end"],s,f,h,o;e&&(s=e.position>0,f=r.createTextRange(),f.moveToElementText(u(e.indexes)),o=e.offset,o!==h?(f.collapse(e.inside||s),f.moveStart("character",s?-o:o)):f.collapse(t),i.setEndPoint(t?"StartToStart":"EndToStart",f),t&&i.collapse(!0))}var i,r=t.doc.body;n.start&&(n.start.ctrl?(i=r.createControlRange(),i.addElement(u(n.start.indexes)),i.select()):(i=r.createTextRange(),f(!0),f(),i.select()))};this.addRange=function(i){function p(n){var i,y,u,h,v;u=t.create("a");i=n?r:c;y=n?o:s;h=e.duplicate();(i==l||i==l.documentElement)&&(i=a,y=0);3==i.nodeType?(i.parentNode.insertBefore(u,i),h.moveToElementText(u),h.moveStart("character",y),t.remove(u),e.setEndPoint(n?"StartToStart":"EndToEnd",h)):(v=i.childNodes,v.length?(y>=v.length?t.insertAfter(u,v[v.length-1]):i.insertBefore(u,v[y]),h.moveToElementText(u)):i.canHaveHTML&&(i.innerHTML="<span>&#xFEFF;<\/span>",u=i.firstChild,h.moveToElementText(u),h.collapse(f)),e.setEndPoint(n?"StartToStart":"EndToEnd",h),t.remove(u))}var e,h,r,o,c,s,u,l=n.dom.doc,a=l.body,v,y;if(r=i.startContainer,o=i.startOffset,c=i.endContainer,s=i.endOffset,e=a.createTextRange(),r==c&&1==r.nodeType){if(o==s&&!r.hasChildNodes()){if(r.canHaveHTML)return u=r.previousSibling,u&&!u.hasChildNodes()&&t.isBlock(u)?u.innerHTML="&#xFEFF;":u=null,r.innerHTML="<span>&#xFEFF;<\/span><span>&#xFEFF;<\/span>",e.moveToElementText(r.lastChild),e.select(),t.doc.selection.clear(),r.innerHTML="",void(u&&(u.innerHTML=""));o=t.nodeIndex(r);r=r.parentNode}if(o==s-1)try{if(y=r.childNodes[o],h=a.createControlRange(),h.addElement(y),h.select(),v=n.getRng(),v.item&&y===v.item(0))return}catch(w){}}p(!0);p();e.select()};this.getRangeAt=u}return n});i(it,[u],function(n){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(n){return n.shiftKey||n.ctrlKey||n.altKey||this.metaKeyPressed(n)},metaKeyPressed:function(t){return n.mac?t.metaKey:t.ctrlKey&&!t.altKey}}});i(si,[it,r,u],function(n,t,i){return function(r,u){function vt(n){var t=u.settings.object_resizing;return t===!1||i.iOS?!1:("string"!=typeof t&&(t="table,img,div"),"false"===n.getAttribute("data-mce-resize")?!1:u.dom.is(n,t))}function ut(t){var i,r,y,a,v;i=t.screenX-ni;r=t.screenY-ti;s=i*l[2]+p;h=r*l[3]+w;s=5>s?5:s;h=5>h?5:h;y="IMG"==e.nodeName&&u.settings.resize_img_proportional!==!1?!n.modifierPressed(t):n.modifierPressed(t)||"IMG"==e.nodeName&&l[2]*l[3]!=0;y&&(st(i)>st(r)?(h=ht(s*rt),s=ht(h/rt)):(s=ht(h/rt),h=ht(s*rt)));f.setStyles(o,{width:s,height:h});a=l.startPos.x+i;v=l.startPos.y+r;a=a>0?a:0;v=v>0?v:0;f.setStyles(nt,{left:a,top:v,display:"block"});nt.innerHTML=s+" &times; "+h;l[2]<0&&o.clientWidth<=s&&f.setStyle(o,"left",tt+(p-s));l[3]<0&&o.clientHeight<=h&&f.setStyle(o,"top",it+(w-h));i=c.scrollWidth-ii;r=c.scrollHeight-ri;i+r!==0&&f.setStyles(nt,{left:a-i,top:v-r});b||(u.fire("ObjectResizeStart",{target:e,width:p,height:w}),b=!0)}function ft(){function n(n,t){t&&(e.style[n]||!u.schema.isValid(e.nodeName.toLowerCase(),n)?f.setStyle(e,n,t):f.setAttrib(e,n,t))}b=!1;n("width",s);n("height",h);f.unbind(v,"mousemove",ut);f.unbind(v,"mouseup",ft);k!=v&&(f.unbind(k,"mousemove",ut),f.unbind(k,"mouseup",ft));f.remove(o);f.remove(nt);d&&"TABLE"!=e.nodeName||et(e);u.fire("ObjectResized",{target:e,width:s,height:h});f.setAttrib(e,"style",f.getAttrib(e,"style"));u.nodeChanged()}function et(n,t,r){var d,g,et,ot,b;at();d=f.getPos(n,c);tt=d.x;it=d.y;b=n.getBoundingClientRect();g=b.width||b.right-b.left;et=b.height||b.bottom-b.top;e!=n&&(lt(),e=n,s=h=0);ot=u.fire("ObjectSelected",{target:n});vt(n)&&!ot.isDefaultPrevented()?gt(a,function(n,u){function h(t){ni=t.screenX;ti=t.screenY;p=e.clientWidth;w=e.clientHeight;rt=w/p;l=n;n.startPos={x:g*n[0]+tt,y:et*n[1]+it};ii=c.scrollWidth;ri=c.scrollHeight;o=e.cloneNode(!0);f.addClass(o,"mce-clonedresizable");f.setAttrib(o,"data-mce-bogus","all");o.contentEditable=!1;o.unSelectabe=!0;f.setStyles(o,{left:tt,top:it,margin:0});o.removeAttribute("data-mce-selected");c.appendChild(o);f.bind(v,"mousemove",ut);f.bind(v,"mouseup",ft);k!=v&&(f.bind(k,"mousemove",ut),f.bind(k,"mouseup",ft));nt=f.add(c,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+w)}var s,a;return t?void(u==t&&h(r)):(s=f.get("mceResizeHandle"+u),s?f.show(s):(a=c,s=f.add(a,"div",{id:"mceResizeHandle"+u,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+u+"-resize; margin:0; padding:0"}),i.ie&&(s.contentEditable=!1)),n.elm||(f.bind(s,"mousedown",function(n){n.stopImmediatePropagation();n.preventDefault();h(n)}),n.elm=s),void f.setStyles(s,{left:g*n[0]+tt-s.offsetWidth/2,top:et*n[1]+it-s.offsetHeight/2}))}):y();e.setAttribute("data-mce-selected","1")}function y(){var t,n;at();e&&e.removeAttribute("data-mce-selected");for(t in a)n=f.get("mceResizeHandle"+t),n&&(f.unbind(n),f.remove(n))}function ct(n){function u(n,t){if(n)do if(n===t)return!0;while(n=n.parentNode)}var i,t;if(!b)return gt(f.select("img[data-mce-selected],hr[data-mce-selected]"),function(n){n.removeAttribute("data-mce-selected")}),t="mousedown"==n.type?n.target:r.getNode(),t=f.$(t).closest(d?"table":"table,img,hr")[0],u(t,c)&&(kt(),i=r.getStart(!0),u(i,t)&&u(r.getEnd(!0),t)&&(!d||t!=i&&"IMG"!==i.nodeName))?void et(t):void y()}function yt(n,t,i){n&&n.attachEvent&&n.attachEvent("on"+t,i)}function pt(n,t,i){n&&n.detachEvent&&n.detachEvent("on"+t,i)}function wt(n){var t=n.srcElement,r,f,i,o,s,h,c;r=t.getBoundingClientRect();h=ot.clientX-r.left;c=ot.clientY-r.top;for(f in a)if(i=a[f],o=t.offsetWidth*i[0],s=t.offsetHeight*i[1],st(o-h)<8&&st(s-c)<8){l=i;break}b=!0;u.fire("ObjectResizeStart",{target:e,width:e.clientWidth,height:e.clientHeight});u.getDoc().selection.empty();et(t,f,ot)}function bt(n){var t=n.srcElement;if(t!=e){if(u.fire("ObjectSelected",{target:t}),lt(),0===t.id.indexOf("mceResizeHandle"))return void(n.returnValue=!1);("IMG"==t.nodeName||"TABLE"==t.nodeName)&&(y(),e=t,yt(t,"resizestart",wt))}}function lt(){pt(e,"resizestart",wt)}function at(){var t,n;for(t in a)n=a[t],n.elm&&(f.unbind(n.elm),delete n.elm)}function kt(){try{u.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(n){}}function dt(n){var t;if(d){t=v.body.createControlRange();try{return t.addElement(n),t.select(),!0}catch(i){}}}function ui(){e=o=null;d&&(lt(),pt(c,"controlselect",bt))}var f=u.dom,gt=t.each,e,o,nt,a,l,ot,ni,ti,tt,it,p,w,rt,b,s,h,v=u.getDoc(),k=document,d=i.ie&&i.ie<11,st=Math.abs,ht=Math.round,c=u.getBody(),ii,ri,g;return a={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},g=".mce-content-body",u.contentStyles.push(g+" div.mce-resizehandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}"+g+" .mce-resizehandle:hover {background: #000}"+g+" img[data-mce-selected], hr[data-mce-selected] {outline: 1px solid black;resize: none}"+g+" .mce-clonedresizable {position: absolute;"+(i.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+g+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),u.on("init",function(){d?(u.on("ObjectResized",function(n){"TABLE"!=n.target.nodeName&&(y(),dt(n.target))}),yt(c,"controlselect",bt),u.on("mousedown",function(n){ot=n})):(kt(),i.ie>=11&&(u.on("mouseup",function(n){var t=n.target.nodeName;!b&&/^(TABLE|IMG|HR)$/.test(t)&&(u.selection.select(n.target,"TABLE"==t),u.nodeChanged())}),u.dom.bind(c,"mscontrolselect",function(n){/^(TABLE|IMG|HR)$/.test(n.target.nodeName)&&(n.preventDefault(),"IMG"==n.target.tagName&&window.setTimeout(function(){u.selection.select(n.target)},0))})));u.on("nodechange ResizeEditor",ct);u.on("keydown keyup",function(n){e&&"TABLE"==e.nodeName&&ct(n)});u.on("hide",y)}),u.on("remove",at),{isResizable:vt,showResizeRect:et,hideResizeRect:y,updateResizeRect:ct,controlSelect:dt,destroy:ui}}});i(rt,[u,r],function(n,t){function i(i){var r=i.dom;this.getBookmark=function(n,u){function a(n,i){var u=0;return t.each(r.select(n),function(n,t){n==i&&(u=t)}),u}function y(n){function t(t){var i,r,u,f=t?"start":"end";i=n[f+"Container"];r=n[f+"Offset"];1==i.nodeType&&"TR"==i.nodeName&&(u=i.childNodes,i=u[Math.min(t?r:r-1,u.length-1)],i&&(r=t?0:i.childNodes.length,n["set"+(t?"Start":"End")](i,r)))}return t(!0),t(),n}function p(){function t(n,t){var i=n[t?"startContainer":"endContainer"],o=n[t?"startOffset":"endOffset"],h=[],f,s,c=0;if(3==i.nodeType){if(u)for(f=i.previousSibling;f&&3==f.nodeType;f=f.previousSibling)o+=f.nodeValue.length;h.push(o)}else s=i.childNodes,o>=s.length&&s.length&&(c=1,o=Math.max(0,s.length-1)),h.push(r.nodeIndex(s[o],u)+c);for(;i&&i!=e;i=i.parentNode)h.push(r.nodeIndex(i,u));return h}var f=i.getRng(!0),e=r.getRoot(),n={};return n.start=t(f,!0),i.isCollapsed()||(n.end=t(f)),n}var f,s,h,v,e,o,l="&#xFEFF;",c;if(2==n)return o=i.getNode(),e=o?o.nodeName:null,"IMG"==e?{name:e,index:a(e,o)}:i.tridentSel?i.tridentSel.getBookmark(n):p();if(n)return{rng:i.getRng()};if(f=i.getRng(),h=r.uniqueId(),v=i.isCollapsed(),c="overflow:hidden;line-height:0px",f.duplicate||f.item){if(f.item)return o=f.item(0),e=o.nodeName,{name:e,index:a(e,o)};s=f.duplicate();try{f.collapse();f.pasteHTML('<span data-mce-type="bookmark" id="'+h+'_start" style="'+c+'">'+l+"<\/span>");v||(s.collapse(!1),f.moveToElementText(s.parentElement()),0===f.compareEndPoints("StartToEnd",s)&&s.move("character",-1),s.pasteHTML('<span data-mce-type="bookmark" id="'+h+'_end" style="'+c+'">'+l+"<\/span>"))}catch(w){return null}}else{if(o=i.getNode(),e=o.nodeName,"IMG"==e)return{name:e,index:a(e,o)};s=y(f.cloneRange());v||(s.collapse(!1),s.insertNode(r.create("span",{"data-mce-type":"bookmark",id:h+"_end",style:c},l)));f=y(f);f.collapse(!0);f.insertNode(r.create("span",{"data-mce-type":"bookmark",id:h+"_start",style:c},l))}return i.moveToBookmark({id:h,keep:1}),{id:h}};this.moveToBookmark=function(u){function c(n){var i=u[n?"start":"end"],r,t,e,o;if(i){for(e=i[0],t=v,r=i.length-1;r>=1;r--){if(o=t.childNodes,i[r]>o.length-1)return;t=o[i[r]]}3===t.nodeType&&(e=Math.min(i[0],t.nodeValue.length));1===t.nodeType&&(e=Math.min(i[0],t.childNodes.length));n?f.setStart(t,e):f.setEnd(t,e)}return!0}function l(i){var f=r.get(u.id+"_"+i),a,c,v,l,y=u.keep;if(f&&(a=f.parentNode,"start"==i?(y?(a=f.firstChild,c=1):c=r.nodeIndex(f),s=e=a,h=o=c):(y?(a=f.firstChild,c=1):c=r.nodeIndex(f),e=a,o=c),!y)){for(l=f.previousSibling,v=f.nextSibling,t.each(t.grep(f.childNodes),function(n){3==n.nodeType&&(n.nodeValue=n.nodeValue.replace(/\uFEFF/g,""))});f=r.get(u.id+"_"+i);)r.remove(f,1);l&&v&&l.nodeType==v.nodeType&&3==l.nodeType&&!n.opera&&(c=l.nodeValue.length,l.appendData(v.nodeValue),r.remove(v),"start"==i?(s=e=l,h=o=c):(e=l,o=c))}}function a(t){return!r.isBlock(t)||t.innerHTML||n.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t}var f,v,s,e,h,o;if(u)if(u.start){if(f=r.createRng(),v=r.getRoot(),i.tridentSel)return i.tridentSel.moveToBookmark(u);c(!0)&&c()&&i.setRng(f)}else u.id?(l("start"),l("end"),s&&(f=r.createRng(),f.setStart(a(s),h),f.setEnd(a(e),o),i.setRng(f))):u.name?i.select(r.select(u.name)[u.index]):u.rng&&i.setRng(u.rng)}}return i.isBookmarkNode=function(n){return n&&"SPAN"===n.tagName&&"bookmark"===n.getAttribute("data-mce-type")},i});i(hi,[s,oi,si,h,rt,u,r],function(n,i,r,u,f,e,o){function h(n,t,u,e){var o=this;o.dom=n;o.win=t;o.serializer=u;o.editor=e;o.bookmarkManager=new f(o);o.controlSelection=new r(o,e);o.win.getSelection||(o.tridentSel=new i(o))}var s=o.each,c=o.trim,l=e.ie;return h.prototype={setCursorLocation:function(n,t){var i=this,r=i.dom.createRng();n?(r.setStart(n,t),r.setEnd(n,t),i.setRng(r),i.collapse(!1)):(i._moveEndPoint(r,i.editor.getBody(),!0),i.setRng(r))},getContent:function(n){var r=this,i=r.getRng(),u=r.dom.create("body"),s=r.getSel(),f,e,o;return n=n||{},f=e="",n.get=!0,n.format=n.format||"html",n.selection=!0,r.editor.fire("BeforeGetContent",n),"text"==n.format?r.isCollapsed()?"":i.text||(s.toString?s.toString():""):(i.cloneContents?(o=i.cloneContents(),o&&u.appendChild(o)):i.item!==t||i.htmlText!==t?(u.innerHTML="<br>"+(i.item?i.item(0).outerHTML:i.htmlText),u.removeChild(u.firstChild)):u.innerHTML=i.toString(),/^\s/.test(u.innerHTML)&&(f=" "),/\s+$/.test(u.innerHTML)&&(e=" "),n.getInner=!0,n.content=r.isCollapsed()?"":f+r.serializer.serialize(u,n)+e,r.editor.fire("GetContent",n),n.content)},setContent:function(n,t){var r=this,i=r.getRng(),f,u=r.win.document,e,o;if(t=t||{format:"html"},t.set=!0,t.selection=!0,n=t.content=n,t.no_events||r.editor.fire("BeforeSetContent",t),n=t.content,i.insertNode){n+='<span id="__caret">_<\/span>';i.startContainer==u&&i.endContainer==u?u.body.innerHTML=n:(i.deleteContents(),0===u.body.childNodes.length?u.body.innerHTML=n:i.createContextualFragment?i.insertNode(i.createContextualFragment(n)):(e=u.createDocumentFragment(),o=u.createElement("div"),e.appendChild(o),o.outerHTML=n,i.insertNode(e)));f=r.dom.get("__caret");i=u.createRange();i.setStartBefore(f);i.setEndBefore(f);r.setRng(i);r.dom.remove("__caret");try{r.setRng(i)}catch(s){}}else i.item&&(u.execCommand("Delete",!1,null),i=r.getRng()),/^\s+/.test(n)?(i.pasteHTML('<span id="__mce_tmp">_<\/span>'+n),r.dom.remove("__mce_tmp")):i.pasteHTML(n);t.no_events||r.editor.fire("SetContent",t)},getStart:function(n){var u=this,i=u.getRng(),t,e,f,r;if(i.duplicate||i.item){if(i.item)return i.item(0);for(f=i.duplicate(),f.collapse(1),t=f.parentElement(),t.ownerDocument!==u.dom.doc&&(t=u.dom.getRoot()),e=r=i.parentElement();r=r.parentNode;)if(r==t){t=e;break}return t}return t=i.startContainer,1==t.nodeType&&t.hasChildNodes()&&(n&&i.collapsed||(t=t.childNodes[Math.min(t.childNodes.length-1,i.startOffset)])),t&&3==t.nodeType?t.parentNode:t},getEnd:function(n){var u=this,i=u.getRng(),t,r;return i.duplicate||i.item?i.item?i.item(0):(i=i.duplicate(),i.collapse(0),t=i.parentElement(),t.ownerDocument!==u.dom.doc&&(t=u.dom.getRoot()),t&&"BODY"==t.nodeName?t.lastChild||t:t):(t=i.endContainer,r=i.endOffset,1==t.nodeType&&t.hasChildNodes()&&(n&&i.collapsed||(t=t.childNodes[r>0?r-1:r])),t&&3==t.nodeType?t.parentNode:t)},getBookmark:function(n,t){return this.bookmarkManager.getBookmark(n,t)},moveToBookmark:function(n){return this.bookmarkManager.moveToBookmark(n)},select:function(n,t){var i=this,f=i.dom,r=f.createRng(),u;if(i.lastFocusBookmark=null,n){if(!t&&i.controlSelection.controlSelect(n))return;u=f.nodeIndex(n);r.setStart(n.parentNode,u);r.setEnd(n.parentNode,u+1);t&&(i._moveEndPoint(r,n,!0),i._moveEndPoint(r,n));i.setRng(r)}return n},isCollapsed:function(){var t=this,n=t.getRng(),i=t.getSel();return!n||n.item?!1:n.compareEndPoints?0===n.compareEndPoints("StartToEnd",n):!i||n.collapsed},collapse:function(n){var i=this,t=i.getRng(),r;t.item&&(r=t.item(0),t=i.win.document.body.createTextRange(),t.moveToElementText(r));t.collapse(!!n);i.setRng(t)},getSel:function(){var n=this.win;return n.getSelection?n.getSelection():n.document.selection},getRng:function(n){function s(n,t,i){try{return t.compareBoundaryPoints(n,i)}catch(r){return-1}}var i=this,e,t,f,r=i.win.document,o,u;if(!n&&i.lastFocusBookmark)return u=i.lastFocusBookmark,u.startContainer?(t=r.createRange(),t.setStart(u.startContainer,u.startOffset),t.setEnd(u.endContainer,u.endOffset)):t=u,t;if(n&&i.tridentSel)return i.tridentSel.getRangeAt(0);try{(e=i.getSel())&&(t=e.rangeCount>0?e.getRangeAt(0):e.createRange?e.createRange():r.createRange())}catch(h){}if(l&&t&&t.setStart&&r.selection){try{o=r.selection.createRange()}catch(h){}o&&o.item&&(f=o.item(0),t=r.createRange(),t.setStartBefore(f),t.setEndAfter(f))}return t||(t=r.createRange?r.createRange():r.body.createTextRange()),t.setStart&&9===t.startContainer.nodeType&&t.collapsed&&(f=i.dom.getRoot(),t.setStart(f,0),t.setEnd(f,0)),i.selectedRange&&i.explicitRange&&(0===s(t.START_TO_START,t,i.selectedRange)&&0===s(t.END_TO_END,t,i.selectedRange)?t=i.explicitRange:(i.selectedRange=null,i.explicitRange=null)),t},setRng:function(n,t){var r=this,i;if(n)if(n.select)try{n.select()}catch(u){}else if(r.tridentSel){if(n.cloneRange)try{return void r.tridentSel.addRange(n)}catch(u){}}else if(i=r.getSel()){r.explicitRange=n;try{i.removeAllRanges();i.addRange(n)}catch(u){}t===!1&&i.extend&&(i.collapse(n.endContainer,n.endOffset),i.extend(n.startContainer,n.startOffset));r.selectedRange=i.rangeCount>0?i.getRangeAt(0):null}},setNode:function(n){var t=this;return t.setContent(t.dom.getOuterHTML(n)),n},getNode:function(){function e(n,t){for(var i=n;n&&3===n.nodeType&&0===n.length;)n=t?n.nextSibling:n.previousSibling;return n||i}var u=this,n=u.getRng(),i,t=n.startContainer,r=n.endContainer,f=n.startOffset,o=n.endOffset,s=u.dom.getRoot();return n?n.setStart?(i=n.commonAncestorContainer,!n.collapsed&&(t==r&&2>o-f&&t.hasChildNodes()&&(i=t.childNodes[f]),3===t.nodeType&&3===r.nodeType&&(t=t.length===f?e(t.nextSibling,!0):t.parentNode,r=0===o?e(r.previousSibling,!1):r.parentNode,t&&t===r))?t:i&&3==i.nodeType?i.parentNode:i):(i=n.item?n.item(0):n.parentElement(),i.ownerDocument!==u.win.document&&(i=s),i):s},getSelectedBlocks:function(t,i){var o=this,r=o.dom,u,f,e=[],s;if(f=r.getRoot(),t=r.getParent(t||o.getStart(),r.isBlock),i=r.getParent(i||o.getEnd(),r.isBlock),t&&t!=f&&e.push(t),t&&i&&t!=i)for(u=t,s=new n(t,f);(u=s.next())&&u!=i;)r.isBlock(u)&&e.push(u);return i&&t!=i&&i!=f&&e.push(i),e},isForward:function(){var r=this.dom,n=this.getSel(),t,i;return n&&n.anchorNode&&n.focusNode?(t=r.createRng(),t.setStart(n.anchorNode,n.anchorOffset),t.collapse(!0),i=r.createRng(),i.setStart(n.focusNode,n.focusOffset),i.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,i)<=0):!0},normalize:function(){var n=this,t=n.getRng();return e.range&&new u(n.dom).normalize(t)&&n.setRng(t,n.isForward()),t},selectorChanged:function(n,t){var i=this,r;return i.selectorChangedData||(i.selectorChangedData={},r={},i.editor.on("NodeChange",function(n){var f=n.element,t=i.dom,u=t.getParents(f,null,t.getRoot()),e={};s(i.selectorChangedData,function(n,i){s(u,function(f){if(t.is(f,i))return(r[i]||(s(n,function(n){n(!0,{node:f,selector:i,parents:u})}),r[i]=n),e[i]=n,!1)})});s(r,function(n,t){e[t]||(delete r[t],s(n,function(n){n(!1,{node:f,selector:t,parents:u})}))})})),i.selectorChangedData[n]||(i.selectorChangedData[n]=[]),i.selectorChangedData[n].push(t),i},getScrollContainer:function(){for(var t,n=this.dom.getRoot();n&&"BODY"!=n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(n){function s(n){for(var i=0,r=0,t=n;t&&t.nodeType;)i+=t.offsetLeft||0,r+=t.offsetTop||0,t=t.offsetParent;return{x:i,y:r}}var t,f,e=this,o=e.dom,h=o.getRoot(),i,r,u;if("BODY"!=h.nodeName&&(u=e.getScrollContainer(),u))return t=s(n).y-s(u).y,r=u.clientHeight,i=u.scrollTop,void((i>t||t+25>i+r)&&(u.scrollTop=i>t?t:t-r+25));f=o.getViewPort(e.editor.getWin());t=o.getPos(n).y;i=f.y;r=f.h;(t<f.y||t+25>i+r)&&e.editor.getWin().scrollTo(0,i>t?t:t-r+25)},placeCaretAt:function(n,t){var r=this.editor.getDoc(),i,u;if(r.caretPositionFromPoint)u=r.caretPositionFromPoint(n,t),i=r.createRange(),i.setStart(u.offsetNode,u.offset),i.collapse(!0);else if(r.caretRangeFromPoint)i=r.caretRangeFromPoint(n,t);else if(r.body.createTextRange){i=r.body.createTextRange();try{i.moveToPoint(n,t);i.collapse(!0)}catch(f){i.collapse(t<r.body.clientHeight)}}this.setRng(i)},_moveEndPoint:function(t,i,r){var u=i,f=new n(i,u),o=this.dom.schema.getNonEmptyElements();do{if(3==i.nodeType&&0!==c(i.nodeValue).length)return void(r?t.setStart(i,0):t.setEnd(i,i.nodeValue.length));if(o[i.nodeName]&&!/^(TD|TH)$/.test(i.nodeName))return void(r?t.setStartBefore(i):"BR"==i.nodeName?t.setEndBefore(i):t.setEndAfter(i));if(e.ie&&e.ie<11&&this.dom.isBlock(i)&&this.dom.isEmpty(i))return void(r?t.setStart(i,0):t.setEnd(i,0))}while(i=r?f.next():f.prev());"BODY"==u.nodeName&&(r?t.setStart(u,0):t.setEnd(u,u.childNodes.length))},destroy:function(){this.win=null;this.controlSelection.destroy()}},h});i(vt,[rt,r],function(n,t){function i(t){this.compare=function(i,u){function f(n){var i={};return r(t.getAttribs(n),function(r){var u=r.nodeName.toLowerCase();0!==u.indexOf("_")&&"style"!==u&&"data-mce-style"!==u&&(i[u]=t.getAttrib(n,u))}),i}function e(n,t){var r;for(var i in n)if(n.hasOwnProperty(i)){if((r=t[i],"undefined"==typeof r)||n[i]!=r)return!1;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return!1;return!0}return i.nodeName!=u.nodeName?!1:e(f(i),f(u))&&e(t.parseStyle(t.getAttrib(i,"style")),t.parseStyle(t.getAttrib(u,"style")))?!n.isBookmarkNode(i)&&!n.isBookmarkNode(u):!1}}var r=t.each;return i});i(gr,[r],function(n){function i(n,i){function o(n){return n.replace(/%(\w+)/g,"")}var h,u,r=n.dom,s="",f,e;if(e=n.settings.preview_styles,e===!1)return"";if(e||(e="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof i){if(i=n.formatter.get(i),!i)return;i=i[0]}return h=i.block||i.inline||"span",u=r.create(h),t(i.styles,function(n,t){n=o(n);n&&r.setStyle(u,t,n)}),t(i.attributes,function(n,t){n=o(n);n&&r.setAttrib(u,t,n)}),t(i.classes,function(n){n=o(n);r.hasClass(u,n)||r.addClass(u,n)}),n.fire("PreviewFormats"),r.setStyles(u,{position:"absolute",left:-65535}),n.getBody().appendChild(u),f=r.getStyle(n.getBody(),"fontSize",!0),f=/px$/.test(f)?parseInt(f,10):0,t(e.split(" "),function(t){var i=r.getStyle(u,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(i)&&(i=r.getStyle(n.getBody(),t,!0),"#ffffff"==r.toHex(i).toLowerCase())||"color"==t&&"#000000"==r.toHex(i).toLowerCase())){if("font-size"==t&&/em|%$/.test(i)){if(0===f)return;i=parseFloat(i,10)/(/%$/.test(i)?100:1);i=i*f+"px"}"border"==t&&i&&(s+="padding:0 2px;");s+=t+":"+i+";"}}),n.fire("AfterPreviewFormats"),r.remove(u),s}var t=n.each;return{getCssText:i}});i(ci,[s,h,rt,vt,r,gr],function(n,t,i,r,u,f){return function(e){function yt(n){return n.nodeType&&(n=n.nodeName),!!e.schema.getTextBlockElements()[n.toLowerCase()]}function pt(n){return/^(TH|TD)$/.test(n.nodeName)}function it(n,t){return o.getParents(n,t,o.getRoot())}function wt(n){return 1===n.nodeType&&"_mce_caret"===n.id}function li(){rt({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(n,t,i){h(i,function(t,i){o.setAttrib(n,i,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]});h("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(n){rt(n,{block:n,remove:"all"})});rt(e.settings.formats)}function ai(){e.addShortcut("meta+b","bold_desc","Bold");e.addShortcut("meta+i","italic_desc","Italic");e.addShortcut("meta+u","underline_desc","Underline");for(var n=1;6>=n;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]);e.addShortcut("access+8","",["FormatBlock",!1,"div"]);e.addShortcut("access+9","",["FormatBlock",!1,"address"])}function w(n){return n?g[n]:g}function rt(n,t){n&&("string"!=typeof n?h(n,function(n,t){rt(t,n)}):(t=t.length?t:[t],h(t,function(n){n.deep===ot&&(n.deep=!n.selector);n.split===ot&&(n.split=!n.selector||n.inline);n.remove===ot&&n.selector&&!n.inline&&(n.remove="none");n.selector&&n.inline&&(n.mixed=!0,n.block_expand=!0);"string"==typeof n.classes&&(n.classes=n.classes.split(/\s+/))}),g[n]=t))}function vi(n){return n&&g[n]&&delete g[n],g}function ui(n){var t;return e.dom.getParent(n,function(n){return t=e.dom.getStyle(n,"text-decoration"),t&&"none"!==t}),t}function fi(n){var t;1===n.nodeType&&n.parentNode&&1===n.parentNode.nodeType&&(t=ui(n.parentNode),e.dom.getStyle(n,"color")&&t?e.dom.setStyle(n,"text-decoration",t):e.dom.getStyle(n,"text-decoration")===t&&e.dom.setStyle(n,"text-decoration",null))}function d(t,i,r){function k(n,t){if(t=t||u,n){if(t.onformat&&t.onformat(n,t,i,r),h(t.styles,function(t,r){o.setStyle(n,r,b(t,i))}),t.styles){var f=o.getAttrib(n,"style");f&&n.setAttribute("data-mce-style",f)}h(t.attributes,function(t,r){o.setAttrib(n,r,b(t,i))});h(t.classes,function(t){t=b(t,i);o.hasClass(n,t)||o.addClass(n,t)})}}function ot(){function s(t,i){var u=new n(i);for(r=u.current();r;r=u.prev())if(r.childNodes.length>1||r==t||"BR"==r.tagName)return r}var t=e.selection.getRng(),u=t.startContainer,f=t.endContainer,i,o;return u!=f&&0===t.endOffset&&(i=s(u,f),o=3==i.nodeType?i.length:i.childNodes.length,t.setEnd(i,o)),t}function it(n,r,e){var b=[],s,d,w=!0;s=u.inline||u.block;d=o.create(s);k(d);lt.walk(n,function(n){function c(n){var l,nt,rt,g,it;return it=w,l=n.nodeName.toLowerCase(),nt=n.parentNode.nodeName.toLowerCase(),1===n.nodeType&&tt(n)&&(it=w,w="true"===tt(n),g=!0),p(l,"br")?(r=0,void(u.block&&o.remove(n))):u.wrapper&&y(n,t,i)?void(r=0):w&&!g&&u.block&&!u.wrapper&&yt(l)&&at(nt,s)?(n=o.rename(n,s),k(n),b.push(n),void(r=0)):u.selector&&(h(f,function(t){"collapsed"in t&&t.collapsed!==et||o.is(n,t.selector)&&!wt(n)&&(k(n,t),rt=!0)}),!u.inline||rt)?void(r=0):void(!w||g||!at(s,l)||!at(nt,s)||!e&&3===n.nodeType&&1===n.nodeValue.length&&65279===n.nodeValue.charCodeAt(0)||wt(n)||u.inline&&a(n)?(r=0,h(st(n.childNodes),c),g&&(w=it),r=0):(r||(r=o.clone(d,v),n.parentNode.insertBefore(r,n),b.push(r)),r.appendChild(n)))}var r;h(n,c)});u.links===!0&&h(b,function(n){function t(n){"A"===n.nodeName&&k(n,u);h(st(n.childNodes),t)}t(n)});h(b,function(n){function e(n){var t=0;return h(n.childNodes,function(n){ut(n)||l(n)||t++}),t}function s(n){var t,i;return h(n.childNodes,function(n){if(1==n.nodeType&&!l(n)&&!wt(n))return(t=n,v)}),t&&!l(t)&&dt(t,u)&&(i=o.clone(t,v),k(i),o.replace(i,n,c),o.remove(t,1)),i||n}var r;if(r=e(n),(b.length>1||!a(n))&&0===r)return void o.remove(n,1);if(u.inline||u.wrapper){if(u.exact||1!==r||(n=s(n)),h(f,function(t){h(o.select(t.inline,n),function(n){l(n)||ct(t,i,n,t.exact?n:null)})}),y(n.parentNode,t,i))return o.remove(n,1),n=0,c;u.merge_with_parents&&o.getParent(n.parentNode,function(r){if(y(r,t,i))return(o.remove(n,1),n=0,c)});n&&u.merge_siblings!==!1&&(n=ei(ti(n),n),n=ei(n,ti(n,c)))}})}var f=w(t),u=f[0],rt,g,et=!r&&s.isCollapsed(),nt;u&&(r?r.nodeType?(g=o.createRng(),g.setStartBefore(r),g.setEndAfter(r),it(ft(g,f),null,!0)):it(r,null,!0):et&&u.inline&&!o.select("td.mce-item-selected,th.mce-item-selected").length?si("apply",t,i):(nt=e.selection.getNode(),vt||!f[0].defaultBlock||o.getParent(nt,o.isBlock)||d(f[0].defaultBlock),e.selection.setRng(ot()),rt=s.getBookmark(),it(ft(s.getRng(c),f),rt),u.styles&&(u.styles.color||u.styles.textDecoration)&&(ci(nt,fi,"childNodes"),fi(nt)),s.moveToBookmark(rt),hi(s.getRng(c)),e.nodeChanged()))}function bt(n,t,i,r){function nt(n){var r,i,e,s,o;if(1===n.nodeType&&tt(n)&&(s=k,k="true"===tt(n),o=!0),r=st(n.childNodes),k&&!o)for(i=0,e=u.length;e>i&&!ct(u[i],t,n,n);i++);if(f.deep&&r.length){for(i=0,e=r.length;e>i;i++)nt(r[i]);o&&(k=s)}}function ut(i){var u;return h(it(i.parentNode).reverse(),function(i){var f;u||"_start"==i.id||"_end"==i.id||(f=y(i,n,t,r),f&&f.split!==!1&&(u=i))}),u}function ot(n,i,r,e){var h,s,c,y,l,p;if(n){for(p=n.parentNode,h=i.parentNode;h&&h!=p;h=h.parentNode){for(s=o.clone(h,v),l=0;l<u.length;l++)if(ct(u[l],t,s,s)){s=0;break}s&&(c&&s.appendChild(c),y||(y=s),c=s)}!e||f.mixed&&a(n)||(i=o.split(n,i));c&&(r.parentNode.insertBefore(c,r),y.appendChild(r))}return i}function p(n){return ot(ut(n),n,n,!0)}function d(n){var i=o.get(n?"_start":"_end"),t=i[n?"firstChild":"lastChild"];return l(t)&&(t=t[n?"firstChild":"lastChild"]),3==t.nodeType&&0===t.data.length&&(t=n?i.previousSibling||i.nextSibling:i.nextSibling||i.previousSibling),o.remove(i,!0),t}function g(n){var t,i,r=n.commonAncestorContainer;if(n=ft(n,u,c),f.split){if(t=oi(n,c),i=oi(n),t!=i){if(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),r&&/^T(HEAD|BODY|FOOT|R)$/.test(r.nodeName)&&pt(i)&&i.firstChild&&(i=i.firstChild||i),o.isChildOf(t,i)&&!pt(t)&&!pt(i))return t=ht(t,"span",{id:"_start","data-mce-type":"bookmark"}),p(t),void(t=d(c));t=ht(t,"span",{id:"_start","data-mce-type":"bookmark"});i=ht(i,"span",{id:"_end","data-mce-type":"bookmark"});p(t);p(i);t=d(c);i=d()}else t=i=p(t);n.startContainer=t.parentNode?t.parentNode:t;n.startOffset=et(t);n.endContainer=i.parentNode?i.parentNode:i;n.endOffset=et(i)+1}lt.walk(n,function(n){h(n,function(n){nt(n);1===n.nodeType&&"underline"===e.dom.getStyle(n,"text-decoration")&&n.parentNode&&"underline"===ui(n.parentNode)&&ct({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,n)})})}var u=w(n),f=u[0],rt,b,k=!0;return i?void(i.nodeType?(b=o.createRng(),b.setStartBefore(i),b.setEndAfter(i),g(b)):g(i)):void(s.isCollapsed()&&f.inline&&!o.select("td.mce-item-selected,th.mce-item-selected").length?si("remove",n,t,r):(rt=s.getBookmark(),g(s.getRng(c)),s.moveToBookmark(rt),f.inline&&kt(n,t,s.getStart())&&hi(s.getRng(!0)),e.nodeChanged()))}function yi(n,t,i){var r=w(n);!kt(n,t,i)||"toggle"in r[0]&&!r[0].toggle?d(n,t,i):bt(n,t,i)}function y(n,t,i,r){function h(n,t,u){var e,h,f=t[u],s;if(t.onmatch)return t.onmatch(n,t,u);if(f)if(f.length===ot){for(e in f)if(f.hasOwnProperty(e)){if(h="attributes"===u?o.getAttrib(n,e):gt(n,e),r&&!h&&!t.exact)return;if((!r||t.exact)&&!p(h,ni(b(f[e],i),e)))return}}else for(s=0;s<f.length;s++)if("attributes"===u?o.getAttrib(n,f[s]):gt(n,f[s]))return t;return t}var e=w(t),f,u,s;if(e&&n)for(u=0;u<e.length;u++)if(f=e[u],dt(n,f)&&h(n,f,"attributes")&&h(n,f,"styles")){if(s=f.classes)for(u=0;u<s.length;u++)if(!o.hasClass(n,s[u]))return;return f}}function kt(n,t,i){function r(i){var r=o.getRoot();return i===r?!1:(i=o.getParent(i,function(i){return i.parentNode===r||!!y(i,n,t,!0)}),y(i,n,t))}var u;return i?r(i):(i=s.getNode(),r(i)?c:(u=s.getStart(),u!=i&&r(u)?c:v))}function pi(n,t){var i,r=[],u={};return i=s.getStart(),o.getParent(i,function(i){for(var f,e=0;e<n.length;e++)f=n[e],!u[f]&&y(i,f,t)&&(u[f]=!0,r.push(f))},o.getRoot()),r}function wi(n){var i=w(n),e,u,r,t,f;if(i)for(e=s.getStart(),u=it(e),t=i.length-1;t>=0;t--){if(f=i[t].selector,!f||i[t].defaultBlock)return c;for(r=u.length-1;r>=0;r--)if(o.is(u[r],f))return c}return v}function bi(n,t,i){var r;return k||(k={},r={},e.on("NodeChange",function(n){var t=it(n.element),i={};t=u.grep(t,function(n){return 1==n.nodeType&&!n.getAttribute("data-mce-bogus")});h(k,function(n,u){h(t,function(f){if(y(f,u,{},n.similar))return(r[u]||(h(n,function(n){n(!0,{node:f,format:u,parents:t})}),r[u]=n),i[u]=n,!1)})});h(r,function(u,f){i[f]||(delete r[f],h(u,function(i){i(!1,{node:n.element,format:f,parents:t})}))})})),h(n.split(","),function(n){k[n]||(k[n]=[],k[n].similar=i);k[n].push(t)}),this}function ki(n){return f.getCssText(e,n)}function dt(n,t){return p(n,t.inline)?c:p(n,t.block)?c:t.selector?1==n.nodeType&&o.is(n,t.selector):void 0}function p(n,t){return n=n||"",t=t||"",n=""+(n.nodeName||n),t=""+(t.nodeName||t),n.toLowerCase()==t.toLowerCase()}function gt(n,t){return ni(o.getStyle(n,t),t)}function ni(n,t){return("color"==t||"backgroundColor"==t)&&(n=o.toHex(n)),"fontWeight"==t&&700==n&&(n="bold"),"fontFamily"==t&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+n}function b(n,t){return"string"!=typeof n?n=n(t):t&&(n=n.replace(/%(\w+)/g,function(n,i){return t[i]||n})),n}function ut(n){return n&&3===n.nodeType&&/^([\t \r\n]+|)$/.test(n.nodeValue)}function ht(n,t,i){var r=o.create(t,i);return n.parentNode.insertBefore(r,n),r.appendChild(n),r}function ft(t,i,r){function b(n){function y(n){return"BR"==n.nodeName&&n.getAttribute("data-mce-bogus")&&!n.nextSibling}var r,t,e,s,v;if(r=t=n?f:u,s=n?"previousSibling":"nextSibling",v=o.getRoot(),3==r.nodeType&&!ut(r)&&(n?c>0:h<r.nodeValue.length))return r;for(;;){if(!i[0].block_expand&&a(t))return t;for(e=t[s];e;e=e[s])if(!l(e)&&!ut(e)&&!y(e))return t;if(t.parentNode==v){r=t;break}t=t.parentNode}return r}function k(n,t){for(t===ot&&(t=3===n.nodeType?n.length:n.childNodes.length);n&&n.hasChildNodes();)n=n.childNodes[t],n&&(t=3===n.nodeType?n.length:n.childNodes.length);return{node:n,offset:t}}function d(n){for(var t=n;t;){if(1===t.nodeType&&tt(t))return"false"===tt(t)?t:n;t=t.parentNode}return n}function g(t,i,u){function c(n,t){var i,f,e=n.nodeValue;return"undefined"==typeof t&&(t=u?e.length:0),u?(i=e.lastIndexOf(" ",t),f=e.lastIndexOf(" ",t),i=i>f?i:f,-1===i||r||i++):(i=e.indexOf(" ",t),f=e.indexOf(" ",t),i=-1!==i&&(-1===f||f>i)?i:f),i}var l,f,s,h;if(3===t.nodeType){if(s=c(t,i),-1!==s)return{container:t,offset:s};h=t}for(l=new n(t,o.getParent(t,a)||e.getBody());f=l[u?"prev":"next"]();)if(3===f.nodeType){if(h=f,s=c(f),-1!==s)return{container:f,offset:s}}else if(a(f))break;if(h)return(i=u?0:h.length,{container:h,offset:i})}function nt(n,r){var f,u,e,s;for(3==n.nodeType&&0===n.nodeValue.length&&n[r]&&(n=n[r]),f=it(n),u=0;u<f.length;u++)for(e=0;e<i.length;e++)if(s=i[e],!("collapsed"in s&&s.collapsed!==t.collapsed)&&o.is(f[u],s.selector))return f[u];return n}function rt(n,t){var r,u=o.getRoot();if(i[0].wrapper||(r=o.getParent(n,i[0].block,u)),r||(r=o.getParent(3==n.nodeType?n.parentNode:n,function(n){return n!=u&&yt(n)})),r&&i[0].wrapper&&(r=it(r,"ul,ol").reverse()[0]||r),!r)for(r=n;r[t]&&!a(r[t])&&(r=r[t],!p(r,"br")););return r||n}var w,s,y,f=t.startContainer,c=t.startOffset,u=t.endContainer,h=t.endOffset;if(1==f.nodeType&&f.hasChildNodes()&&(w=f.childNodes.length-1,f=f.childNodes[c>w?w:c],3==f.nodeType&&(c=0)),1==u.nodeType&&u.hasChildNodes()&&(w=u.childNodes.length-1,u=u.childNodes[h>w?w:h-1],3==u.nodeType&&(h=u.nodeValue.length)),f=d(f),u=d(u),(l(f.parentNode)||l(f))&&(f=l(f)?f:f.parentNode,f=f.nextSibling||f,3==f.nodeType&&(c=0)),(l(u.parentNode)||l(u))&&(u=l(u)?u:u.parentNode,u=u.previousSibling||u,3==u.nodeType&&(h=u.length)),i[0].inline&&(t.collapsed&&(y=g(f,c,!0),y&&(f=y.container,c=y.offset),y=g(u,h),y&&(u=y.container,h=y.offset)),s=k(u,h),s.node)){for(;s.node&&0===s.offset&&s.node.previousSibling;)s=k(s.node.previousSibling);s.node&&s.offset>0&&3===s.node.nodeType&&" "===s.node.nodeValue.charAt(s.offset-1)&&s.offset>1&&(u=s.node,u.splitText(s.offset-1))}return(i[0].inline||i[0].block_expand)&&(i[0].inline&&3==f.nodeType&&0!==c||(f=b(!0)),i[0].inline&&3==u.nodeType&&h!==u.nodeValue.length||(u=b())),i[0].selector&&i[0].expand!==v&&!i[0].inline&&(f=nt(f,"previousSibling"),u=nt(u,"nextSibling")),(i[0].block||i[0].selector)&&(f=rt(f,"previousSibling"),u=rt(u,"nextSibling"),i[0].block&&(a(f)||(f=b(!0)),a(u)||(u=b()))),1==f.nodeType&&(c=et(f),f=f.parentNode),1==u.nodeType&&(h=et(u)+1,u=u.parentNode),{startContainer:f,startOffset:c,endContainer:u,endOffset:h}}function di(n,t){return t.links&&"A"==n.tagName}function ct(n,t,i,r){var u,f,e;if(!dt(i,n)&&!di(i,n))return v;if("all"!=n.remove)for(h(n.styles,function(u,f){u=ni(b(u,t),f);"number"==typeof f&&(f=u,r=0);(n.remove_similar||!r||p(gt(r,f),u))&&o.setStyle(i,f,"");e=1}),e&&""===o.getAttrib(i,"style")&&(i.removeAttribute("style"),i.removeAttribute("data-mce-style")),h(n.attributes,function(n,u){var f;if(n=b(n,t),"number"==typeof u&&(u=n,r=0),!r||p(o.getAttrib(r,u),n)){if("class"==u&&(n=o.getAttrib(i,u),n&&(f="",h(n.split(/\s+/),function(n){/mce\-\w+/.test(n)&&(f+=(f?" ":"")+n)}),f)))return void o.setAttrib(i,u,f);"class"==u&&i.removeAttribute("className");nr.test(u)&&i.removeAttribute("data-mce-"+u);i.removeAttribute(u)}}),h(n.classes,function(n){n=b(n,t);(!r||o.hasClass(r,n))&&o.removeClass(i,n)}),f=o.getAttribs(i),u=0;u<f.length;u++)if(0!==f[u].nodeName.indexOf("_"))return v;if("none"!=n.remove)return(gi(i,n),c)}function gi(n,t){function r(n,t,i){return n=ti(n,t,i),!n||"BR"==n.nodeName||a(n)}var u=n.parentNode,i;t.block&&(vt?u==o.getRoot()&&(t.list_block&&p(n,t.list_block)||h(st(n.childNodes),function(n){at(vt,n.nodeName.toLowerCase())?i?i.appendChild(n):(i=ht(n,vt),o.setAttribs(i,e.settings.forced_root_block_attrs)):i=0})):a(n)&&!a(u)&&(r(n,v)||r(n.firstChild,c,1)||n.insertBefore(o.create("br"),n.firstChild),r(n,c)||r(n.lastChild,v,1)||n.appendChild(o.create("br"))));t.selector&&t.inline&&!p(t.inline,n)||o.remove(n,1)}function ti(n,t,i){if(n)for(t=t?"nextSibling":"previousSibling",n=i?n:n[t];n;n=n[t])if(1==n.nodeType||!ut(n))return n}function ei(n,t){function u(n,t){for(i=n;i;i=i[t]){if(3==i.nodeType&&0!==i.nodeValue.length)return n;if(1==i.nodeType&&!l(i))return i}return n}var i,f,e=new r(o);if(n&&t&&(n=u(n,"previousSibling"),t=u(t,"nextSibling"),e.compare(n,t))){for(i=n.nextSibling;i&&i!=t;)f=i,i=i.nextSibling,n.appendChild(f);return o.remove(t),h(st(t.childNodes),function(t){n.appendChild(t)}),n}return t}function oi(t,i){var r,u,f;return r=t[i?"startContainer":"endContainer"],u=t[i?"startOffset":"endOffset"],1==r.nodeType&&(f=r.childNodes.length-1,!i&&u&&u--,r=r.childNodes[u>f?f:u]),3===r.nodeType&&i&&u>=r.nodeValue.length&&(r=new n(r,e.getBody()).next()||r),3!==r.nodeType||i||0!==u||(r=new n(r,e.getBody()).prev()||r),r}function si(t,i,r,u){function l(n){var t=o.create("span",{id:h,"data-mce-bogus":!0,style:g?"color:red":""});return n&&t.appendChild(e.getDoc().createTextNode(nt)),t}function a(n,t){for(;n;){if(3===n.nodeType&&n.nodeValue!==nt||n.childNodes.length>1)return!1;t&&1===n.nodeType&&t.push(n);n=n.firstChild}return!0}function f(n){for(;n;){if(n.id===h)return n;n=n.parentNode}}function v(t){var i;if(t)for(i=new n(t,t),t=i.current();t;t=i.next())if(3===t.nodeType)return t}function c(n,t){var r,i;if(n)i=s.getRng(!0),a(n)?(t!==!1&&(i.setStartBefore(n),i.setEndBefore(n)),o.remove(n)):(r=v(n),r.nodeValue.charAt(0)===nt&&(r.deleteData(0,1),i.startContainer==r&&i.startOffset>0&&i.setStart(r,i.startOffset-1),i.endContainer==r&&i.endOffset>0&&i.setEnd(r,i.endOffset-1)),o.remove(n,1)),s.setRng(i);else if(n=f(s.getStart()),!n)for(;n=o.get(h);)c(n,!1)}function b(){var n,t,o,u,h,c,e;n=s.getRng(!0);u=n.startOffset;c=n.startContainer;e=c.nodeValue;t=f(s.getStart());t&&(o=v(t));e&&u>0&&u<e.length&&/\w/.test(e.charAt(u))&&/\w/.test(e.charAt(u-1))?(h=s.getBookmark(),n.collapse(!0),n=ft(n,w(i)),n=lt.split(n),d(i,r,n),s.moveToBookmark(h)):(t&&o.nodeValue===nt?d(i,r,t):(t=l(!0),o=t.firstChild,n.insertNode(t),u=1,d(i,r,t)),s.setCursorLocation(o,u))}function k(){var t=s.getRng(!0),e,b,k,a,n,f,v=[],h,c,p;for(e=t.startContainer,b=t.startOffset,n=e,3==e.nodeType&&(b!=e.nodeValue.length&&(a=!0),n=n.parentNode);n;){if(y(n,i,r,u)){f=n;break}n.nextSibling&&(a=!0);v.push(n);n=n.parentNode}if(f)if(a)k=s.getBookmark(),t.collapse(!0),t=ft(t,w(i),!0),t=lt.split(t),bt(i,r,t),s.moveToBookmark(k);else{for(c=l(),n=c,h=v.length-1;h>=0;h--)n.appendChild(o.clone(v[h],!1)),n=n.firstChild;n.appendChild(o.doc.createTextNode(nt));n=n.firstChild;p=o.getParent(f,yt);p&&o.isEmpty(p)?f.parentNode.replaceChild(c,f):o.insertAfter(c,f);s.setCursorLocation(n,1);o.isEmpty(f)&&o.remove(f)}}function p(){var n;n=f(s.getStart());n&&!o.isEmpty(n)&&ci(n,function(n){1!=n.nodeType||n.id===h||o.isEmpty(n)||o.setAttrib(n,"data-mce-bogus",null)},"childNodes")}var h="_mce_caret",g=e.settings.caret_debug;e._hasCaretEvents||(ri=function(){var n=[],t;if(a(f(s.getStart()),n))for(t=n.length;t--;)o.setAttrib(n[t],"data-mce-bogus","1")},ii=function(n){var t=n.keyCode;c();(8==t&&s.isCollapsed()||37==t||39==t)&&c(f(s.getStart()));p()},e.on("SetContent",function(n){n.selection&&p()}),e._hasCaretEvents=!0);"apply"==t?b():k()}function hi(t){var i=t.startContainer,u=t.startOffset,c,f,r,e,h;if(3==i.nodeType&&u>=i.nodeValue.length&&(u=et(i),i=i.parentNode,c=!0),1==i.nodeType)for(e=i.childNodes,i=e[Math.min(u,e.length-1)],f=new n(i,o.getParent(i,o.isBlock)),(u>e.length-1||c)&&f.next(),r=f.current();r;r=f.next())if(3==r.nodeType&&!ut(r))return h=o.create("a",{"data-mce-bogus":"all"},nt),r.parentNode.insertBefore(h,r),t.setStart(r,0),s.setRng(t),void o.remove(h)}var g={},o=e.dom,s=e.selection,lt=new t(o),at=e.schema.isValidChild,a=o.isBlock,vt=e.settings.forced_root_block,et=o.nodeIndex,nt="﻿",nr=/^(src|href|style)$/,v=!1,c=!0,k,ot,tt=o.getContentEditable,ii,ri,l=i.isBookmarkNode,h=u.each,st=u.grep,ci=u.walk,tr=u.extend;tr(this,{get:w,register:rt,unregister:vi,apply:d,remove:bt,toggle:yi,match:kt,matchAll:pi,matchNode:y,canApply:wi,formatChanged:bi,getCssText:ki});li();ai();e.on("BeforeGetContent",function(n){ri&&"raw"!=n.format&&ri()});e.on("mouseup keydown",function(n){ii&&ii(n)})}});i(li,[it,u,r,lt],function(n,t,i,r){var f=i.trim,u;return u=new RegExp('<span[^>]+data-mce-bogus[^>]+>[​﻿]+<\\/span>|\\s?data-mce-selected="[^"]+"',"gi"),function(n){function l(){for(var t=n.getContent({format:"raw",no_events:1}),e=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,h,i,o,s,l=n.schema,t=t.replace(u,""),c=l.getShortEndedElements();s=e.exec(t);)i=e.lastIndex,o=s[0].length,h=c[s[1]]?i:r.findEndTag(l,t,i),t=t.substring(0,i-o)+t.substring(h),e.lastIndex=i-o;return f(t)}function h(t){n.isNotDirty=!t}function s(n){e.typing=!1;e.add({},n)}var e=this,o=0,i=[],v,a,c=0;return n.on("init",function(){e.add()}),n.on("BeforeExecCommand",function(n){var t=n.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&e.beforeChange()}),n.on("ExecCommand",function(n){var t=n.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&s(n)}),n.on("ObjectResizeStart",function(){e.beforeChange()}),n.on("SaveContent ObjectResized blur",s),n.on("DragEnd",s),n.on("KeyUp",function(r){var u=r.keyCode;(u>=33&&36>=u||u>=37&&40>=u||45==u||13==u||r.ctrlKey)&&(s(),n.nodeChanged());(46==u||8==u||t.mac&&(91==u||93==u))&&n.nodeChanged();a&&e.typing&&(n.isDirty()||(h(i[0]&&l()!=i[0].content),n.isNotDirty||n.fire("change",{level:i[0],lastLevel:null})),n.fire("TypingUndo"),a=!1,n.nodeChanged())}),n.on("KeyDown",function(n){var t=n.keyCode,i;if(t>=33&&36>=t||t>=37&&40>=t||45==t)return void(e.typing&&s(n));i=n.ctrlKey&&!n.altKey||n.metaKey;(16>t||t>20)&&224!=t&&91!=t&&!e.typing&&!i&&(e.beforeChange(),e.typing=!0,e.add({},n),a=!0)}),n.on("MouseDown",function(n){e.typing&&s(n)}),n.addShortcut("meta+z","","Undo"),n.addShortcut("meta+y,meta+shift+z","","Redo"),n.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||n.nodeChanged()}),e={data:i,typing:!1,beforeChange:function(){c||(v=n.selection.getBookmark(2,!0))},add:function(t,r){var u,s=n.settings,f,e;if((t=t||{},t.content=l(),c||n.removed)||(f=i[o],n.fire("BeforeAddUndo",{level:t,lastLevel:f,originalEvent:r}).isDefaultPrevented())||f&&f.content==t.content)return null;if(i[o]&&(i[o].beforeBookmark=v),s.custom_undo_redo_levels&&i.length>s.custom_undo_redo_levels){for(u=0;u<i.length-1;u++)i[u]=i[u+1];i.length--;o=i.length}return t.bookmark=n.selection.getBookmark(2,!0),o<i.length-1&&(i.length=o+1),i.push(t),o=i.length-1,e={level:t,lastLevel:f,originalEvent:r},n.fire("AddUndo",e),o>0&&(h(!0),n.fire("change",e)),t},undo:function(){var t;return e.typing&&(e.add(),e.typing=!1),o>0&&(t=i[--o],0===o&&h(!1),n.setContent(t.content,{format:"raw"}),n.selection.moveToBookmark(t.beforeBookmark),n.fire("undo",{level:t})),t},redo:function(){var t;return o<i.length-1&&(t=i[++o],n.setContent(t.content,{format:"raw"}),n.selection.moveToBookmark(t.bookmark),h(!0),n.fire("redo",{level:t})),t},clear:function(){i=[];o=0;e.typing=!1;n.fire("ClearUndos")},hasUndo:function(){return o>0||e.typing&&i[0]&&l()!=i[0].content},hasRedo:function(){return o<i.length-1&&!this.typing},transact:function(n){e.beforeChange();try{c++;n()}finally{c--}e.add()}}}});i(ai,[s,h,u],function(n,t,i){var r=i.ie&&i.ie<11;return function(u){function l(l){function lt(n){return n&&f.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&"true"!==f.getContentEditable(n)}function at(n){var t;f.isBlock(n)&&(t=o.getRng(),n.appendChild(f.create("span",null," ")),o.select(n),n.lastChild.outerHTML="",o.setRng(t))}function yt(n){var t=n,i=[],r;if(t){for(;t=t.firstChild;){if(f.isBlock(t))return;1!=t.nodeType||c[t.nodeName.toLowerCase()]||i.push(t)}for(r=i.length;r--;)t=i[r],!t.hasChildNodes()||t.firstChild==t.lastChild&&""===t.firstChild.nodeValue?f.remove(t):"A"==t.nodeName&&" "===(t.innerText||t.textContent)&&f.remove(t)}}function ut(t){function l(n){for(;n;){if(1==n.nodeType||3==n.nodeType&&n.data&&/[\r\n\s]/.test(n.data))return n;n=n.nextSibling}}var e,u,r,s=t,h,c;if(t){if((i.ie&&i.ie<9&&v&&v.firstChild&&v.firstChild==v.lastChild&&"BR"==v.firstChild.tagName&&f.remove(v.firstChild),/^(LI|DT|DD)$/.test(t.nodeName))&&(c=l(t.firstChild),c&&/^(UL|OL|DL)$/.test(c.nodeName)&&t.insertBefore(f.doc.createTextNode(" "),t.firstChild)),r=f.createRng(),i.ie||t.normalize(),t.hasChildNodes()){for(e=new n(t,t);u=e.current();){if(3==u.nodeType){r.setStart(u,0);r.setEnd(u,0);break}if(a[u.nodeName.toLowerCase()]){r.setStartBefore(u);r.setEndBefore(u);break}s=u;u=e.next()}u||(r.setStart(s,0),r.setEnd(s,0))}else"BR"==t.nodeName?t.nextSibling&&f.isBlock(t.nextSibling)?((!ct||9>ct)&&(h=f.create("br"),t.parentNode.insertBefore(h,t)),r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)):(r.setStart(t,0),r.setEnd(t,0));o.setRng(r);f.remove(h);o.scrollIntoView(t)}}function ht(n){var t=e.forced_root_block;t&&t.toLowerCase()===n.tagName.toLowerCase()&&f.setAttribs(n,e.forced_root_block_attrs)}function ft(n){var u=y,t,i,o,h=s.getTextInlineElements();if(n||"TABLE"==it?(t=f.create(n||w),ht(t)):t=v.cloneNode(!1),o=t,e.keep_styles!==!1)do if(h[u.nodeName]){if("_mce_caret"==u.id)continue;i=u.cloneNode(!1);f.setAttrib(i,"id","");t.hasChildNodes()?(i.appendChild(t.firstChild),t.appendChild(i)):(o=i,t.appendChild(i))}while(u=u.parentNode);return r||(o.innerHTML='<br data-mce-bogus="1">'),t}function vt(t){var i,r,u;if(3==y.nodeType&&(t?d>0:d<y.nodeValue.length))return!1;if(y.parentNode==v&&rt&&!t||t&&1==y.nodeType&&y==v.firstChild)return!0;if("TABLE"===y.nodeName||y.previousSibling&&"TABLE"==y.previousSibling.nodeName)return rt&&!t||!rt&&t;for(i=new n(y,v),3==y.nodeType&&(t&&0===d?i.prev():t||d!=y.nodeValue.length||i.next());r=i.current();){if(1===r.nodeType){if(!r.getAttribute("data-mce-bogus")&&(u=r.nodeName.toLowerCase(),c[u]&&"br"!==u))return!1}else if(3===r.nodeType&&!/^[ \t\r\n]*$/.test(r.nodeValue))return!1;t?i.prev():i.next()}return!0}function pt(n,t){var r,e,o,i,c,l,h=w||"P";if(e=f.getParent(n,f.isBlock),l=u.getBody().nodeName.toLowerCase(),!e||!lt(e)){if(e=e||ot,!e.hasChildNodes())return r=f.create(h),ht(r),e.appendChild(r),k.setStart(r,0),k.setEnd(r,0),r;for(i=n;i.parentNode!=e;)i=i.parentNode;for(;i&&!f.isBlock(i);)o=i,i=i.previousSibling;if(o&&s.isValidChild(l,h.toLowerCase())){for(r=f.create(h),ht(r),o.parentNode.insertBefore(r,o),i=o;i&&!f.isBlock(i);)c=i.nextSibling,r.appendChild(i),i=c;k.setStart(n,t);k.setEnd(n,t)}}return n}function wt(){function n(n){for(var t=b[n?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[n?"nextSibling":"previousSibling"];return t===v}function t(){var n=b.parentNode;return/^(LI|DT|DD)$/.test(n.nodeName)?n:b}var i=b.parentNode.nodeName;/^(OL|UL|LI)$/.test(i)&&(w="LI");p=w?ft(w):f.create("BR");n(!0)&&n()?"LI"==i?f.insertAfter(p,t()):f.replace(p,b):n(!0)?"LI"==i?(f.insertAfter(p,t()),p.appendChild(f.doc.createTextNode(" ")),p.appendChild(b)):b.parentNode.insertBefore(p,b):n()?(f.insertAfter(p,t()),at(p)):(b=t(),tt=k.cloneRange(),tt.setStartAfter(v),tt.setEndAfter(b),g=tt.extractContents(),"LI"==w&&"LI"==g.firstChild.nodeName?(p=g.firstChild,f.insertAfter(g,b)):(f.insertAfter(g,b),f.insertAfter(p,b)));f.remove(v);ut(p);h.add()}function et(){u.execCommand("InsertLineBreak",!1,l)}function bt(n){do 3===n.nodeType&&(n.nodeValue=n.nodeValue.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)}function kt(n){for(var i=f.getRoot(),r,t=n;t!==i&&"false"!==f.getContentEditable(t);)"true"===f.getContentEditable(t)&&(r=t),t=t.parentNode;return t!==i?r:i}function dt(n){var t;r||(n.normalize(),t=n.lastChild,(!t||/^(left|right)$/gi.test(f.getStyle(t,"float",!0)))&&f.add(n,"br"))}var k,tt,ot,y,d,v,ct,nt,p,g,b,it,st,w,rt;if(k=o.getRng(!0),!l.isDefaultPrevented()){if(!k.collapsed)return void u.execCommand("Delete");if(new t(f).normalize(k),y=k.startContainer,d=k.startOffset,w=(e.force_p_newlines?"p":"")||e.forced_root_block,w=w?w.toUpperCase():"",ct=f.doc.documentMode,nt=l.shiftKey,1==y.nodeType&&y.hasChildNodes()&&(rt=d>y.childNodes.length-1,y=y.childNodes[Math.min(d,y.childNodes.length-1)]||y,d=rt&&3==y.nodeType?y.nodeValue.length:0),ot=kt(y)){if(h.beforeChange(),!f.isBlock(ot)&&ot!=f.getRoot())return void((!w||nt)&&et());if((w&&!nt||!w&&nt)&&(y=pt(y,d)),v=f.getParent(y,f.isBlock),b=v?f.getParent(v.parentNode,f.isBlock):null,it=v?v.nodeName.toUpperCase():"",st=b?b.nodeName.toUpperCase():"","LI"!=st||l.ctrlKey||(v=b,it=st),/^(LI|DT|DD)$/.test(it)){if(!w&&nt)return void et();if(f.isEmpty(v))return void wt()}if("PRE"==it&&e.br_in_pre!==!1){if(!nt)return void et()}else if(!w&&!nt&&"LI"!=it||w&&nt)return void et();w&&v===u.getBody()||(w=w||"P",vt()?(p=/^(H[1-6]|PRE|FIGURE)$/.test(it)&&"HGROUP"!=st?ft(w):ft(),e.end_container_on_empty_block&&lt(b)&&f.isEmpty(v)?p=f.split(b,v):f.insertAfter(p,v),ut(p)):vt(!0)?(p=v.parentNode.insertBefore(ft(),v),at(p),ut(v)):(tt=k.cloneRange(),tt.setEndAfter(v),g=tt.extractContents(),bt(g),p=g.firstChild,f.insertAfter(g,v),yt(p),dt(v),ut(p)),f.setAttrib(p,"id",""),u.fire("NewBlock",{newBlock:p}),h.add())}}}var f=u.dom,o=u.selection,e=u.settings,h=u.undoManager,s=u.schema,c=s.getNonEmptyElements(),a=s.getMoveCaretBeforeOnEnterElements();u.on("keydown",function(n){13==n.keyCode&&l(n)!==!1&&n.preventDefault()})}});i(vi,[],function(){return function(n){function e(){var e=t.getStart(),h=n.getBody(),o,w,c,b,l,a,v,k=-16777215,d,p,s,g,y;if(y=i.forced_root_block,e&&1===e.nodeType&&y){for(;e&&e!=h;){if(f[e.nodeName])return;e=e.parentNode}if(o=t.getRng(),o.setStart){w=o.startContainer;c=o.startOffset;b=o.endContainer;l=o.endOffset;try{p=n.getDoc().activeElement===h}catch(nt){}}else o.item&&(e=o.item(0),o=n.getDoc().body.createTextRange(),o.moveToElementText(e)),p=o.parentElement().ownerDocument===n.getDoc(),s=o.duplicate(),s.collapse(!0),c=-1*s.move("character",k),s.collapsed||(s=o.duplicate(),s.collapse(!1),l=-1*s.move("character",k)-c);for(e=h.firstChild,g=h.nodeName.toLowerCase();e;)if((3===e.nodeType||1==e.nodeType&&!f[e.nodeName])&&u.isValidChild(g,y.toLowerCase())){if(3===e.nodeType&&0===e.nodeValue.length){v=e;e=e.nextSibling;r.remove(v);continue}a||(a=r.create(y,n.settings.forced_root_block_attrs),e.parentNode.insertBefore(a,e),d=!0);v=e;e=e.nextSibling;a.appendChild(v)}else a=null,e=e.nextSibling;if(d&&p){if(o.setStart)o.setStart(w,c),o.setEnd(b,l),t.setRng(o);else try{o=n.getDoc().body.createTextRange();o.moveToElementText(h);o.collapse(!0);o.moveStart("character",c);l>0&&o.moveEnd("character",l);o.select()}catch(nt){}n.nodeChanged()}}}var i=n.settings,r=n.dom,t=n.selection,u=n.schema,f=u.getBlockElements();i.forced_root_block&&n.on("NodeChange",e)}});i(yi,[tt,u,r,vt,h,s],function(n,i,r,u,f,e){var s=r.each,h=r.extend,v=r.map,y=r.inArray,c=r.explode,p=i.gecko,w=i.ie,l=i.ie&&i.ie<11,o=!0,a=!1;return function(r){function ot(n,t,i,u){var o,e,f=0;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(n)||u&&u.skip_focus||r.focus(),u=h({},u),u=r.fire("BeforeExecCommand",{command:n,ui:t,value:i}),u.isDefaultPrevented())return!1;if(e=n.toLowerCase(),o=g.exec[e])return o(e,t,i),r.fire("ExecCommand",{command:n,ui:t,value:i}),!0;if(s(r.plugins,function(u){if(u.execCommand&&u.execCommand(n,t,i))return(r.fire("ExecCommand",{command:n,ui:t,value:i}),f=!0,!1)}),f)return f;if(r.theme&&r.theme.execCommand&&r.theme.execCommand(n,t,i))return r.fire("ExecCommand",{command:n,ui:t,value:i}),!0;try{f=r.getDoc().execCommand(n,t,i)}catch(c){}return f?(r.fire("ExecCommand",{command:n,ui:t,value:i}),!0):!1}function it(n){var t;if(!r._isHidden()){if(n=n.toLowerCase(),t=g.state[n])return t(n);try{return r.getDoc().queryCommandState(n)}catch(i){}return!1}}function ct(n){var t;if(!r._isHidden()){if(n=n.toLowerCase(),t=g.value[n])return t(n);try{return r.getDoc().queryCommandValue(n)}catch(i){}}}function rt(n,t){t=t||"exec";s(n,function(n,i){s(i.toLowerCase().split(","),function(i){g[t][i]=n})})}function lt(n,t,i){n=n.toLowerCase();g.exec[n]=function(n,u,f,e){return t.call(i||r,u,f,e)}}function at(n){if(n=n.toLowerCase(),g.exec[n])return!0;try{return r.getDoc().queryCommandSupported(n)}catch(t){}return!1}function vt(n,t,i){n=n.toLowerCase();g.state[n]=function(){return t.call(i||r)}}function yt(n,t,i){n=n.toLowerCase();g.value[n]=function(){return t.call(i||r)}}function pt(n){return n=n.toLowerCase(),!!g.exec[n]}function ut(n,i,u){return i===t&&(i=a),u===t&&(u=null),r.getDoc().execCommand(n,i,u)}function st(n){return d.match(n)}function nt(n,i){d.toggle(n,i?{value:i}:t);r.nodeChanged()}function ft(n){ht=k.getBookmark(n)}function et(){k.moveToBookmark(ht)}var b,k,d,g={state:{},exec:{},value:{}},tt=r.settings,ht;r.on("PreInit",function(){b=r.dom;k=r.selection;tt=r.settings;d=r.formatter});h(this,{execCommand:ot,queryCommandState:it,queryCommandValue:ct,queryCommandSupported:at,addCommands:rt,addCommand:lt,addQueryStateHandler:vt,addQueryValueHandler:yt,hasCustomCommand:pt});rt({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){r.undoManager.add()},"Cut,Copy,Paste":function(n){var f=r.getDoc(),u,t;try{ut(n)}catch(e){u=o}(u||!f.queryCommandSupported(n))&&(t=r.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),i.mac&&(t=t.replace(/Ctrl\+/g,"⌘+")),r.windowManager.alert(t))},unlink:function(){if(k.isCollapsed()){var n=k.getNode();return void("A"==n.tagName&&r.dom.remove(n,!0))}d.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(n){var t=n.substring(7);"full"==t&&(t="justify");s("left,center,right,justify".split(","),function(n){t!=n&&d.remove("align"+n)});nt("align"+t);ot("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(n){var t,i;ut(n);t=b.getParent(k.getNode(),"ol,ul");t&&(i=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)&&(ft(),b.split(i,t),et()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(n){nt(n)},"ForeColor,HiliteColor,FontName":function(n,t,i){nt(n,i)},FontSize:function(n,t,i){var r,u;i>=1&&7>=i&&(u=c(tt.font_size_style_values),r=c(tt.font_size_classes),i=r?r[i-1]||i:u[i-1]||i);nt(n,i)},RemoveFormat:function(n){d.remove(n)},mceBlockQuote:function(){nt("blockquote")},FormatBlock:function(n,t,i){return nt(i||"p")},mceCleanup:function(){var n=k.getBookmark();r.setContent(r.getContent({cleanup:o}),{cleanup:o});k.moveToBookmark(n)},mceRemoveNode:function(n,t,i){var u=i||k.getNode();u!=r.getBody()&&(ft(),r.dom.remove(u,o),et())},mceSelectNodeDepth:function(n,t,i){var u=0;b.getParent(k.getNode(),function(n){if(1==n.nodeType&&u++==i)return(k.select(n),a)},r.getBody())},mceSelectNode:function(n,t,i){k.select(i)},mceInsertContent:function(t,i,f){function ut(n){function u(n){return t[n]&&3==t[n].nodeType}var i,t,r;return i=k.getRng(!0),t=i.startContainer,r=i.startOffset,3==t.nodeType&&(r>0?n=n.replace(/^&nbsp;/," "):u("previousSibling")||(n=n.replace(/^ /,"&nbsp;")),r<t.length?n=n.replace(/&nbsp;(<br>|)$/," "):u("nextSibling")||(n=n.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),n}function ft(){var i,n,t;i=k.getRng(!0);n=i.startContainer;t=i.startOffset;3==n.nodeType&&i.collapsed&&(" "===n.data[t]?(n.deleteData(t,1),/[\u00a0| ]$/.test(f)||(f+=" ")):" "===n.data[t-1]&&(n.deleteData(t-1,1),/[\u00a0| ]$/.test(f)||(f=" "+f)))}function et(n){if(tt)for(e=n.firstChild;e;e=e.walk(!0))st[e.name]&&e.attr("data-mce-new","true")}function ot(){if(tt){var n=r.getBody(),t=new u(b);s(b.select("*[data-mce-new]"),function(i){i.removeAttribute("data-mce-new");for(var r=i.parentNode;r&&r!=n;r=r.parentNode)t.compare(r,i)&&b.remove(i,!0)})}}var g,p,o,a,y,d,c,h,e,l,nt,tt,st=r.schema.getTextInlineElements(),rt,v,it;if("string"!=typeof f&&(tt=f.merge,f=f.content),/^ | $/.test(f)&&(f=ut(f)),g=r.parser,p=new n({},r.schema),nt='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;<\/span>',d={content:f,format:"html",selection:!0},r.fire("BeforeSetContent",d),f=d.content,-1==f.indexOf("{$caret}")&&(f+="{$caret}"),f=f.replace(/\{\$caret\}/,nt),h=k.getRng(),rt=h.startContainer||(h.parentElement?h.parentElement():null),v=r.getBody(),rt===v&&k.isCollapsed()&&b.isBlock(v.firstChild)&&b.isEmpty(v.firstChild)&&(h=b.createRng(),h.setStart(v.firstChild,0),h.setEnd(v.firstChild,0),k.setRng(h)),k.isCollapsed()||(r.getDoc().execCommand("Delete",!1,null),ft()),o=k.getNode(),it={context:o.nodeName.toLowerCase()},y=g.parse(f,it),et(y),e=y.lastChild,"mce_marker"==e.attr("id"))for(c=e,e=e.prev;e;e=e.walk(!0))if(3==e.type||!b.isBlock(e.name)){r.schema.isValidChild(e.parent.name,"span")&&e.parent.insert(c,e,"br"===e.name);break}if(it.invalid){for(k.setContent(nt),o=k.getNode(),a=r.getBody(),9==o.nodeType?o=e=a:e=o;e!==a;)o=e,e=e.parentNode;f=o==a?a.innerHTML:b.getOuterHTML(o);f=p.serialize(g.parse(f.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return p.serialize(y)})));o==a?b.setHTML(a,f):b.setOuterHTML(o,f)}else f=p.serialize(y),e=o.firstChild,l=o.lastChild,!e||e===l&&"BR"===e.nodeName?b.setHTML(o,f):k.setContent(f);ot();c=b.get("mce_marker");k.scrollIntoView(c);h=b.createRng();e=c.previousSibling;e&&3==e.nodeType?(h.setStart(e,e.nodeValue.length),w||(l=c.nextSibling,l&&3==l.nodeType&&(e.appendData(l.data),l.parentNode.removeChild(l)))):(h.setStartBefore(c),h.setEndBefore(c));b.remove(c);k.setRng(h);r.fire("SetContent",d);r.addVisual()},mceInsertRawHTML:function(n,t,i){k.setContent("tiny_mce_marker");r.setContent(r.getContent().replace(/tiny_mce_marker/g,function(){return i}))},mceToggleFormat:function(n,t,i){nt(i)},mceSetContent:function(n,t,i){r.setContent(i)},"Indent,Outdent":function(n){var t,u,i;t=tt.indentation;u=/[a-z%]+$/i.exec(t);t=parseInt(t,10);it("InsertUnorderedList")||it("InsertOrderedList")?ut(n):(tt.forced_root_block||b.getParent(k.getNode(),b.isBlock)||d.apply("div"),s(k.getSelectedBlocks(),function(f){if("LI"!=f.nodeName){var e=r.getParam("indent_use_margin",!1)?"margin":"padding";e+="rtl"==b.getStyle(f,"direction",!0)?"Right":"Left";"outdent"==n?(i=Math.max(0,parseInt(f.style[e]||0,10)-t),b.setStyle(f,e,i?i+u:"")):(i=parseInt(f.style[e]||0,10)+t+u,b.setStyle(f,e,i))}}))},mceRepaint:function(){if(p)try{ft(o);k.getSel()&&k.getSel().selectAllChildren(r.getBody());k.collapse(o);et()}catch(n){}},InsertHorizontalRule:function(){r.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){r.hasVisual=!r.hasVisual;r.addVisual()},mceReplaceContent:function(n,t,i){r.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,k.getContent({format:"text"})))},mceInsertLink:function(n,t,i){var r;"string"==typeof i&&(i={href:i});r=b.getParent(k.getNode(),"a");i.href=i.href.replace(" ","%20");r&&i.href||d.remove("link");i.href&&d.apply("link",i,r)},selectAll:function(){var t=b.getRoot(),n;k.getRng().setStart?(n=b.createRng(),n.setStart(t,0),n.setEnd(t,t.childNodes.length),k.setRng(n)):(n=k.getRng(),n.item||(n.moveToElementText(t),n.select()))},"delete":function(){ut("Delete");var n=r.getBody();b.isEmpty(n)&&(r.setContent(""),n.firstChild&&b.isBlock(n.firstChild)?r.selection.setCursorLocation(n.firstChild,0):r.selection.setCursorLocation(n,0))},mceNewDocument:function(){r.setContent("")},InsertLineBreak:function(n,t,i){function it(){for(var t=new e(u,c),n,i=r.schema.getNonEmptyElements();n=t.next();)if(i[n.nodeName.toLowerCase()]||n.length>0)return!0}var w=i,s,d,v,h=k.getRng(!0),a,u,g,p;new f(b).normalize(h);a=h.startOffset;u=h.startContainer;1==u.nodeType&&u.hasChildNodes()&&(g=a>u.childNodes.length-1,u=u.childNodes[Math.min(a,u.childNodes.length-1)]||u,a=g&&3==u.nodeType?u.nodeValue.length:0);var c=b.getParent(u,b.isBlock),nt=c?c.nodeName.toUpperCase():"",y=c?b.getParent(c.parentNode,b.isBlock):null,tt=y?y.nodeName.toUpperCase():"",rt=w&&w.ctrlKey;return"LI"!=tt||rt||(c=y,nt=tt),u&&3==u.nodeType&&a>=u.nodeValue.length&&(l||it()||(s=b.create("br"),h.insertNode(s),h.setStartAfter(s),h.setEndAfter(s),d=!0)),s=b.create("br"),h.insertNode(s),p=b.doc.documentMode,l&&"PRE"==nt&&(!p||8>p)&&s.parentNode.insertBefore(b.doc.createTextNode("\r"),s),v=b.create("span",{},"&nbsp;"),s.parentNode.insertBefore(v,s),k.scrollIntoView(v),b.remove(v),d?(h.setStartBefore(s),h.setEndBefore(s)):(h.setStartAfter(s),h.setEndAfter(s)),k.setRng(h),r.undoManager.add(),o}});rt({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(n){var t="align"+n.substring(7),i=k.isCollapsed()?[b.getParent(k.getNode(),b.isBlock)]:k.getSelectedBlocks(),r=v(i,function(n){return!!d.matchNode(n,t)});return-1!==y(r,o)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(n){return st(n)},mceBlockQuote:function(){return st("blockquote")},Outdent:function(){var n;return tt.inline_styles&&((n=b.getParent(k.getStart(),b.isBlock))&&parseInt(n.style.paddingLeft,10)>0||(n=b.getParent(k.getEnd(),b.isBlock))&&parseInt(n.style.paddingLeft,10)>0)?o:it("InsertUnorderedList")||it("InsertOrderedList")||!tt.inline_styles&&!!b.getParent(k.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(n){var t=b.getParent(k.getNode(),"ul,ol");return t&&("insertunorderedlist"===n&&"UL"===t.tagName||"insertorderedlist"===n&&"OL"===t.tagName)}},"state");rt({"FontSize,FontName":function(n){var i=0,t;return(t=b.getParent(k.getNode(),"span"))&&(i="fontsize"==n?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),i}},"value");rt({Undo:function(){r.undoManager.undo()},Redo:function(){r.undoManager.redo()}})}});i(yt,[r],function(n){function t(n,f){var e=this,o,s,h;if(n=r(n),f=e.settings=f||{},o=f.base_uri,/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n))return void(e.source=n);h=0===n.indexOf("//");0!==n.indexOf("/")||h||(n=(o?o.protocol||"http":"http")+"://mce_host"+n);/^[\w\-]*:?\/\//.test(n)||(s=f.base_uri?f.base_uri.path:new t(location.href).directory,""===f.base_uri.protocol?n="//mce_host"+e.toAbsPath(s,n):(n=/([^#?]*)([#?]?.*)/.exec(n),n=(o&&o.protocol||"http")+"://mce_host"+e.toAbsPath(s,n[1])+n[2]));n=n.replace(/@@/g,"(mce_at)");n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);i(u,function(t,i){var r=n[i];r&&(r=r.replace(/\(mce_at\)/g,"@@"));e[t]=r});o&&(e.protocol||(e.protocol=o.protocol),e.userInfo||(e.userInfo=o.userInfo),e.port||"mce_host"!==e.host||(e.port=o.port),e.host&&"mce_host"!==e.host||(e.host=o.host),e.source="");h&&(e.protocol="")}var i=n.each,r=n.trim,u="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),f={ftp:21,http:80,https:443,mailto:25};return t.prototype={setPath:function(n){var t=this;n=/^(.*?)\/?(\w+)?$/.exec(n);t.path=n[0];t.directory=n[1];t.file=n[2];t.source="";t.getURI()},toRelative:function(n){var i=this,u,r,f;return"./"===n?n:(n=new t(n,{base_uri:i}),"mce_host"!=n.host&&i.host!=n.host&&n.host||i.port!=n.port||i.protocol!=n.protocol&&""!==n.protocol)?n.getURI():(r=i.getURI(),f=n.getURI(),r==f||"/"==r.charAt(r.length-1)&&r.substr(0,r.length-1)==f?r:(u=i.toRelPath(i.path,n.path),n.query&&(u+="?"+n.query),n.anchor&&(u+="#"+n.anchor),u))},toAbsolute:function(n,i){return n=new t(n,{base_uri:this}),n.getURI(i&&this.isSameOrigin(n))},isSameOrigin:function(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;var t=f[this.protocol];if(t&&(this.port||t)==(n.port||t))return!0}return!1},toRelPath:function(n,t){var r,f=0,e="",i,u;if(n=n.substring(0,n.lastIndexOf("/")),n=n.split("/"),r=t.split("/"),n.length>=r.length)for(i=0,u=n.length;u>i;i++)if(i>=r.length||n[i]!=r[i]){f=i+1;break}if(n.length<r.length)for(i=0,u=r.length;u>i;i++)if(i>=n.length||n[i]!=r[i]){f=i+1;break}if(1===f)return t;for(i=0,u=n.length-(f-1);u>i;i++)e+="../";for(i=f-1,u=r.length;u>i;i++)e+=i!=f-1?"/"+r[i]:r[i];return e},toAbsPath:function(n,t){var r,e=0,f=[],o,u;for(o=/\/$/.test(t)?"/":"",n=n.split("/"),t=t.split("/"),i(n,function(n){n&&f.push(n)}),n=f,r=t.length-1,f=[];r>=0;r--)0!==t[r].length&&"."!==t[r]&&(".."!==t[r]?e>0?e--:f.push(t[r]):e++);return r=n.length-e,u=0>=r?f.reverse().join("/"):n.slice(0,r).join("/")+"/"+f.reverse().join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u},getURI:function(n){var i,t=this;return(!t.source||n)&&(i="",n||(i+=t.protocol?t.protocol+"://":"//",t.userInfo&&(i+=t.userInfo+"@"),t.host&&(i+=t.host),t.port&&(i+=":"+t.port)),t.path&&(i+=t.path),t.query&&(i+="?"+t.query),t.anchor&&(i+="#"+t.anchor),t.source=i),t.source}},t});i(w,[r],function(n){function r(){}var t=n.each,f=n.extend,u,i;return r.extend=u=function(n){function r(){var t,r,u,n=this;if(!i&&(n.init&&n.init.apply(n,arguments),r=n.Mixins))for(t=r.length;t--;)u=r[t],u.init&&u.init.apply(n,arguments)}function l(){return this}function a(n,t){return function(){var i=this,u=i._super,r;return i._super=e[n],r=t.apply(i,arguments),i._super=u,r}}var c=this,e=c.prototype,h,o,s;i=!0;h=new c;i=!1;n.Mixins&&(t(n.Mixins,function(t){t=t;for(var i in t)"init"!==i&&(n[i]=t[i])}),e.Mixins&&(n.Mixins=e.Mixins.concat(n.Mixins)));n.Methods&&t(n.Methods.split(","),function(t){n[t]=l});n.Properties&&t(n.Properties.split(","),function(t){var i="_"+t;n[t]=function(n){var t=this,r;return n!==r?(t[i]=n,t):t[i]}});n.Statics&&t(n.Statics,function(n,t){r[t]=n});n.Defaults&&e.Defaults&&(n.Defaults=f({},e.Defaults,n.Defaults));for(o in n)s=n[o],h[o]="function"==typeof s&&e[o]?a(o,s):s;return r.prototype=h,r.constructor=r,r.extend=u,r},r});i(pt,[r],function(n){function t(t){function u(){return!1}function e(){return!0}function c(n,r){var c,f,l,s;if(n=n.toLowerCase(),r=r||{},r.type=n,r.target||(r.target=o),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=e},r.stopPropagation=function(){r.isPropagationStopped=e},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=e},r.isDefaultPrevented=u,r.isPropagationStopped=u,r.isImmediatePropagationStopped=u),t.beforeFire&&t.beforeFire(r),c=i[n])for(f=0,l=c.length;l>f;f++){if(s=c[f],s.once&&h(n,s.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(s.func.call(o,r)===!1)return r.preventDefault(),r}return r}function s(t,e,o,s){var h,c,l;if(e===!1&&(e=u),e)for(e={func:e},s&&n.extend(e,s),c=t.toLowerCase().split(" "),l=c.length;l--;)t=c[l],h=i[t],h||(h=i[t]=[],f(t,!0)),o?h.unshift(e):h.push(e);return r}function h(n,t){var o,u,s,h,e;if(n)for(h=n.toLowerCase().split(" "),o=h.length;o--;){if(n=h[o],u=i[n],!n){for(s in i)f(s,!1),delete i[s];return r}if(u){if(t)for(e=u.length;e--;)u[e].func===t&&(u=u.slice(0,e).concat(u.slice(e+1)),i[n]=u);else u.length=0;u.length||(f(n,!1),delete i[n])}}else{for(n in i)f(n,!1);i={}}return r}function l(n,t,i){return s(n,t,i,{once:!0})}function a(n){return n=n.toLowerCase(),!(!i[n]||0===i[n].length)}var r=this,o,i={},f;t=t||{};o=t.scope||r;f=t.toggleEvent||u;r.fire=c;r.on=s;r.off=h;r.once=l;r.has=a}var i=n.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchend"," ");return t.isNative=function(n){return!!i[n.toLowerCase()]},t});i(wt,[w],function(n){function u(n){for(var i=[],t=n.length,r;t--;)r=n[t],r.__checked||(i.push(r),r.__checked=1);for(t=i.length;t--;)delete i[t].__checked;return i}var f=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=/^\s*|\s*$/g,t,r=n.extend({init:function(n){function r(n){if(n)return(n=n.toLowerCase(),function(t){return"*"===n||t.type===n})}function u(n){if(n)return function(t){return t._name===n}}function o(n){if(n)return(n=n.split("."),function(t){for(var i=n.length;i--;)if(!t.hasClass(n[i]))return!1;return!0})}function s(n,t,i){if(n)return function(r){var u=r[n]?r[n]():"";return t?"="===t?u===i:"*="===t?u.indexOf(i)>=0:"~="===t?(" "+u+" ").indexOf(" "+i+" ")>=0:"!="===t?u!=i:"^="===t?0===u.indexOf(i):"$="===t?u.substr(u.length-i.length)===i:!1:!!i}}function h(n){var i;if(n)return(n=/(?:not\((.+)\))|(.+)/i.exec(n),n[1]?(i=t(n[1],[]),function(n){return!l(n,i)}):(n=n[2],function(t,i,r){return"first"===n?0===i:"last"===n?i===r-1:"even"===n?i%2==0:"odd"===n?i%2==1:t[n]?t[n]():!1}))}function c(n,t,i){function l(n){n&&t.push(n)}var c;return c=f.exec(n.replace(e,"")),l(r(c[1])),l(u(c[2])),l(o(c[3])),l(s(c[4],c[5],c[6])),l(h(c[7])),t.psuedo=!!c[7],t.direct=i,t}function t(n,r){var e=[],o,u,f;do if(i.exec(""),u=i.exec(n),u&&(n=u[3],e.push(u[1]),u[2])){o=u[3];break}while(u);for(o&&t(o,r),n=[],f=0;f<e.length;f++)">"!=e[f]&&n.push(c(e[f],[],">"===e[f-1]));return r.push(n),r}var l=this.match;this._selectors=t(n,[])},match:function(n,t){var f,v,u,e,c,r,o,s,h,y,l,a,i;for(t=t||this._selectors,f=0,v=t.length;v>f;f++){for(c=t[f],e=c.length,i=n,a=0,u=e-1;u>=0;u--)for(s=c[u];i;){if(s.psuedo)for(l=i.parent().items(),h=y=l.length;h--&&l[h]!==i;);for(r=0,o=s.length;o>r;r++)if(!s[r](i,h,y)){r=o+1;break}if(r===o){a++;break}if(u===e-1)break;i=i.parent()}if(a===e)return!0}return!1},find:function(n){function e(n,t,r){for(var f,s,u,c=t[r],o=0,h=n.length;h>o;o++){for(u=n[o],f=0,s=c.length;s>f;f++)if(!c[f](u,o,h)){f=s+1;break}if(f===s)r==t.length-1?i.push(u):u.items&&e(u.items(),t,r+1);else if(c.direct)return;u.items&&e(u.items(),t,r)}}var i=[],f,o,s=this._selectors;if(n.items){for(f=0,o=s.length;o>f;f++)e(n.items(),s[f],0);o>1&&(i=u(i))}return t||(t=r.Collection),new t(i)}});return r});i(bt,[r,wt,w],function(n,t,i){var r,u,f=Array.prototype.push,e=Array.prototype.slice;return u={length:0,init:function(n){n&&this.add(n)},add:function(t){var i=this;return n.isArray(t)?f.apply(i,t):t instanceof r?i.add(t.toArray()):f.call(i,t),i},set:function(n){var t=this,r=t.length,i;for(t.length=0,t.add(n),i=t.length;r>i;i++)delete t[i];return t},filter:function(n){var e=this,i,o,s=[],u,f;for("string"==typeof n?(n=new t(n),f=function(t){return n.match(t)}):f=n,i=0,o=e.length;o>i;i++)u=e[i],f(u)&&s.push(u);return new r(s)},slice:function(){return new r(e.apply(this,arguments))},eq:function(n){return-1===n?this.slice(n):this.slice(n,+n+1)},each:function(t){return n.each(this,t),this},toArray:function(){return n.toArray(this)},indexOf:function(n){for(var i=this,t=i.length;t--&&i[t]!==n;);return t},reverse:function(){return new r(n.toArray(this).reverse())},hasClass:function(n){return this[0]?this[0].hasClass(n):!1},prop:function(n,t){var r=this,u,i;return t!==u?(r.each(function(i){i[n]&&i[n](t)}),r):(i=r[0],i&&i[n]?i[n]():void 0)},exec:function(t){var i=this,r=n.toArray(arguments).slice(1);return i.each(function(n){n[t]&&n[t].apply(n,r)}),i},remove:function(){for(var n=this.length;n--;)this[n].remove();return this}},n.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),function(t){u[t]=function(){var i=n.toArray(arguments);return this.each(function(n){t in n&&n[t].apply(n,i)}),this}}),n.each("text name disabled active selected checked visible parent value data".split(" "),function(n){u[n]=function(t){return this.prop(n,t)}}),r=i.extend(u),t.Collection=r,r});i(f,[r,o],function(n,t){var i=0;return{id:function(){return"mceu_"+i++},createFragment:function(n){return t.DOM.createFragment(n)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(n){var i,r,t;return n.getBoundingClientRect?(t=n.getBoundingClientRect(),i=Math.max(t.width||t.right-t.left,n.offsetWidth),r=Math.max(t.height||t.bottom-t.bottom,n.offsetHeight)):(i=n.offsetWidth,r=n.offsetHeight),{width:i,height:r}},getPos:function(n,i){return t.DOM.getPos(n,i)},getViewPort:function(n){return t.DOM.getViewPort(n)},get:function(n){return document.getElementById(n)},addClass:function(n,i){return t.DOM.addClass(n,i)},removeClass:function(n,i){return t.DOM.removeClass(n,i)},hasClass:function(n,i){return t.DOM.hasClass(n,i)},toggleClass:function(n,i,r){return t.DOM.toggleClass(n,i,r)},css:function(n,i,r){return t.DOM.setStyle(n,i,r)},getRuntimeStyle:function(n,i){return t.DOM.getStyle(n,i,!0)},on:function(n,i,r,u){return t.DOM.bind(n,i,r,u)},off:function(n,i,r){return t.DOM.unbind(n,i,r)},fire:function(n,i,r){return t.DOM.fire(n,i,r)},innerHtml:function(n,i){t.DOM.setHTML(n,i)}}});i(a,[w,r,pt,bt,f],function(n,t,i,r,u){function e(n){return n._eventDispatcher||(n._eventDispatcher=new i({scope:n,toggleEvent:function(t,r){r&&i.isNative(t)&&(n._nativeEvents||(n._nativeEvents={}),n._nativeEvents[t]=!0,n._rendered&&n.bindPendingEvents())}})),n._eventDispatcher}var s="onmousewheel"in document,h=!1,o="mce-",f=n.extend({Statics:{classPrefix:o},isRtl:function(){return f.rtl},classPrefix:o,init:function(n){var i=this,r,f;if(i.settings=n=t.extend({},i.Defaults,n),i._id=n.id||u.id(),i._text=i._name="",i._width=i._height=0,i._aria={role:n.role},this._elmCache={},r=n.classes)for(r=r.split(" "),r.map={},f=r.length;f--;)r.map[r[f]]=!0;i._classes=r||[];i.visible(!0);t.each("title text width height name classes visible disabled active value".split(" "),function(t){var r=n[t],u;r!==u?i[t](r):i["_"+t]===u&&(i["_"+t]=!1)});i.on("click",function(){if(i.disabled())return!1});n.classes&&t.each(n.classes.split(" "),function(n){i.addClass(n)});i.settings=n;i._borderBox=i.parseBox(n.border);i._paddingBox=i.parseBox(n.padding);i._marginBox=i.parseBox(n.margin);n.hidden&&i.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml",getContainerElm:function(){return document.body},getParentCtrl:function(n){for(var t,i=this.getRoot().controlIdLookup;n&&i&&!(t=i[n.id]);)n=n.parentNode;return t},parseBox:function(n){var t,i=10;if(n)return"number"==typeof n?(n=n||0,{top:n,left:n,bottom:n,right:n}):(n=n.split(" "),t=n.length,1===t?n[1]=n[2]=n[3]=n[0]:2===t?(n[2]=n[0],n[3]=n[1]):3===t&&(n[3]=n[1]),{top:parseInt(n[0],i)||0,right:parseInt(n[1],i)||0,bottom:parseInt(n[2],i)||0,left:parseInt(n[3],i)||0})},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(n,t){function r(t){var i=document.defaultView;return i?(t=t.replace(/[A-Z]/g,function(n){return"-"+n}),i.getComputedStyle(n,null).getPropertyValue(t)):n.currentStyle[t]}function i(n){var t=parseFloat(r(n),10);return isNaN(t)?0:t}return{top:i(t+"TopWidth"),right:i(t+"RightWidth"),bottom:i(t+"BottomWidth"),left:i(t+"LeftWidth")}},initLayoutRect:function(){var n=this,t=n.settings,f,p,o=n.getEl(),i,r,s,h,e,c,l,a;f=n._borderBox=n._borderBox||n.measureBox(o,"border");n._paddingBox=n._paddingBox||n.measureBox(o,"padding");n._marginBox=n._marginBox||n.measureBox(o,"margin");a=u.getSize(o);c=t.minWidth;l=t.minHeight;s=c||a.width;h=l||a.height;i=t.width;r=t.height;e=t.autoResize;e="undefined"!=typeof e?e:!i&&!r;i=i||s;r=r||h;var v=f.left+f.right,y=f.top+f.bottom,w=t.maxWidth||65535,b=t.maxHeight||65535;return n._layoutRect=p={x:t.x||0,y:t.y||0,w:i,h:r,deltaW:v,deltaH:y,contentW:i-v,contentH:r-y,innerW:i-v,innerH:r-y,startMinWidth:c||0,startMinHeight:l||0,minW:Math.min(s,w),minH:Math.min(h,b),maxW:w,maxH:b,autoResize:e,scrollW:0},n._lastLayoutRect={},p},layoutRect:function(n){var e=this,t=e._layoutRect,u,i,o,s,r,h;return t||(t=e.initLayoutRect()),n?(o=t.deltaW,s=t.deltaH,n.x!==r&&(t.x=n.x),n.y!==r&&(t.y=n.y),n.minW!==r&&(t.minW=n.minW),n.minH!==r&&(t.minH=n.minH),i=n.w,i!==r&&(i=i<t.minW?t.minW:i,i=i>t.maxW?t.maxW:i,t.w=i,t.innerW=i-o),i=n.h,i!==r&&(i=i<t.minH?t.minH:i,i=i>t.maxH?t.maxH:i,t.h=i,t.innerH=i-s),i=n.innerW,i!==r&&(i=i<t.minW-o?t.minW-o:i,i=i>t.maxW-o?t.maxW-o:i,t.innerW=i,t.w=i+o),i=n.innerH,i!==r&&(i=i<t.minH-s?t.minH-s:i,i=i>t.maxH-s?t.maxH-s:i,t.innerH=i,t.h=i+s),n.contentW!==r&&(t.contentW=n.contentW),n.contentH!==r&&(t.contentH=n.contentH),u=e._lastLayoutRect,(u.x!==t.x||u.y!==t.y||u.w!==t.w||u.h!==t.h)&&(h=f.repaintControls,h&&h.map&&!h.map[e._id]&&(h.push(e),h.map[e._id]=!0),u.x=t.x,u.y=t.y,u.w=t.w,u.h=t.h),e):t},repaint:function(){var i=this,u,f,n,e,o=0,s=0,t,r;r=document.createRange?function(n){return n}:Math.round;u=i.getEl().style;n=i._layoutRect;t=i._lastRepaintRect||{};e=i._borderBox;o=e.left+e.right;s=e.top+e.bottom;n.x!==t.x&&(u.left=r(n.x)+"px",t.x=n.x);n.y!==t.y&&(u.top=r(n.y)+"px",t.y=n.y);n.w!==t.w&&(u.width=r(n.w-o)+"px",t.w=n.w);n.h!==t.h&&(u.height=r(n.h-s)+"px",t.h=n.h);i._hasBody&&n.innerW!==t.innerW&&(f=i.getEl("body").style,f.width=r(n.innerW)+"px",t.innerW=n.innerW);i._hasBody&&n.innerH!==t.innerH&&(f=f||i.getEl("body").style,f.height=r(n.innerH)+"px",t.innerH=n.innerH);i._lastRepaintRect=t;i.fire("repaint",{},!1)},on:function(n,t){function r(n){var t,r;return"string"!=typeof n?n:function(u){return t||i.parentsAndSelf().each(function(i){var u=i.settings.callbacks;if(u&&(t=u[n]))return(r=i,!1)}),t.call(r,u)}}var i=this;return e(i).on(n,r(t)),i},off:function(n,t){return e(this).off(n,t),this},fire:function(n,t,i){var u=this,r;if(t=t||{},t.control||(t.control=u),t=e(u).fire(n,t),i!==!1&&u.parent)for(r=u.parent();r&&!t.isPropagationStopped();)r.fire(n,t,!1),r=r.parent();return t},hasEventListeners:function(n){return e(this).has(n)},parents:function(n){for(var u=this,i=new r,t=u.parent();t;t=t.parent())i.add(t);return n&&(i=i.filter(n)),i},parentsAndSelf:function(n){return new r(this).add(this.parents(n))},next:function(){var n=this.parent().items();return n[n.indexOf(this)+1]},prev:function(){var n=this.parent().items();return n[n.indexOf(this)-1]},findCommonAncestor:function(n,t){for(var i;n;){for(i=t;i&&n!=i;)i=i.parent();if(n==i)break;n=n.parent()}return n},hasClass:function(n,t){var i=this._classes[t||"control"];return n=this.classPrefix+n,i&&!!i.map[n]},addClass:function(n,t){var r=this,i,u;return n=this.classPrefix+n,i=r._classes[t||"control"],i||(i=[],i.map={},r._classes[t||"control"]=i),i.map[n]||(i.map[n]=n,i.push(n),r._rendered&&(u=r.getEl(t),u&&(u.className=i.join(" ")))),r},removeClass:function(n,t){var r=this,i,u,f;if(n=this.classPrefix+n,i=r._classes[t||"control"],i&&i.map[n])for(delete i.map[n],u=i.length;u--;)i[u]===n&&i.splice(u,1);return r._rendered&&(f=r.getEl(t),f&&(f.className=i.join(" "))),r},toggleClass:function(n,t,i){var r=this;return t?r.addClass(n,i):r.removeClass(n,i),r},classes:function(n){var t=this._classes[n||"control"];return t?t.join(" "):""},innerHtml:function(n){return u.innerHtml(this.getEl(),n),this},getEl:function(n){var t=n?this._id+"-"+n:this._id;return this._elmCache[t]||(this._elmCache[t]=u.get(t)),this._elmCache[t]},visible:function(n){var t=this,i;return"undefined"!=typeof n?(t._visible!==n&&(t._rendered&&(t.getEl().style.display=n?"":"none"),t._visible=n,i=t.parent(),i&&(i._lastRect=null),t.fire(n?"show":"hide")),t):t._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(n){}return this},blur:function(){return this.getEl().blur(),this},aria:function(n,t){var i=this,r=i.getEl(i.ariaTarget);return"undefined"==typeof t?i._aria[n]:(i._aria[n]=t,i._rendered&&r.setAttribute("role"==n?n:"aria-"+n,t),i)},encode:function(n,t){return t!==!1&&(n=this.translate(n)),(n||"").replace(/[&<>"]/g,function(n){return"&#"+n.charCodeAt(0)+";"})},translate:function(n){return f.translate?f.translate(n):n},before:function(n){var t=this,i=t.parent();return i&&i.insert(n,i.items().indexOf(t),!0),t},after:function(n){var t=this,i=t.parent();return i&&i.insert(n,i.items().indexOf(t)),t},remove:function(){var n=this,t=n.getEl(),i=n.parent(),r,f,e,o;if(n.items)for(e=n.items().toArray(),f=e.length;f--;)e[f].remove();return i&&i.items&&(r=[],i.items().each(function(t){t!==n&&r.push(t)}),i.items().set(r),i._lastRect=null),n._eventsRoot&&n._eventsRoot==n&&u.off(t),o=n.getRoot().controlIdLookup,o&&delete o[n._id],t&&t.parentNode&&t.parentNode.removeChild(t),n._rendered=!1,n},renderBefore:function(n){var t=this;return n.parentNode.insertBefore(u.createFragment(t.renderHtml()),n),t.postRender(),t},renderTo:function(n){var t=this;return n=n||t.getContainerElm(),n.appendChild(u.createFragment(t.renderHtml())),t.postRender(),t},postRender:function(){var n=this,i=n.settings,e,r,f,t,o,s,h;for(t in i)0===t.indexOf("on")&&n.on(t.substr(2),i[t]);if(n._eventsRoot){for(f=n.parent();!o&&f;f=f.parent())o=f._eventsRoot;if(o)for(t in o._nativeEvents)n._nativeEvents[t]=!0}n.bindPendingEvents();i.style&&(e=n.getEl(),e&&(e.setAttribute("style",i.style),e.style.cssText=i.style));n._visible||u.css(n.getEl(),"display","none");n.settings.border&&(r=n.borderBox(),u.css(n.getEl(),{"border-top-width":r.top,"border-right-width":r.right,"border-bottom-width":r.bottom,"border-left-width":r.left}));s=n.getRoot();s.controlIdLookup||(s.controlIdLookup={});s.controlIdLookup[n._id]=n;for(h in n._aria)n.aria(h,n._aria[h]);n.fire("postrender",{},!1)},scrollIntoView:function(n){function c(n,t){for(var u,i=n,r=u=0;i&&i!=t&&i.nodeType;)r+=i.offsetLeft||0,u+=i.offsetTop||0,i=i.offsetParent;return{x:r,y:u}}var i=this.getEl(),t=i.parentNode,r,u,f,e,o,s,h=c(i,t);return r=h.x,u=h.y,f=i.offsetWidth,e=i.offsetHeight,o=t.clientWidth,s=t.clientHeight,"end"==n?(r-=o-f,u-=s-e):"center"==n&&(r-=o/2-f/2,u-=s/2-e/2),t.scrollLeft=r,t.scrollTop=u,this},bindPendingEvents:function(){function a(n){var i=t.getParentCtrl(n.target);i&&i.fire(n.type,n)}function v(){var t=n._lastHoverCtrl;t&&(t.fire("mouseleave",{target:t.getEl()}),t.parents().each(function(n){n.fire("mouseleave",{target:n.getEl()})}),n._lastHoverCtrl=null)}function y(i){var u=t.getParentCtrl(i.target),f=n._lastHoverCtrl,e=0,r,s,o;if(u!==f){if(n._lastHoverCtrl=u,s=u.parents().toArray().reverse(),s.push(u),f){for(o=f.parents().toArray().reverse(),o.push(f),e=0;e<o.length&&s[e]===o[e];e++);for(r=o.length-1;r>=e;r--)f=o[r],f.fire("mouseleave",{target:f.getEl()})}for(r=e;r<s.length;r++)u=s[r],u.fire("mouseenter",{target:u.getEl()})}}function l(n){n.preventDefault();"mousewheel"==n.type?(n.deltaY=-1/40*n.wheelDelta,n.wheelDeltaX&&(n.deltaX=-1/40*n.wheelDeltaX)):(n.deltaX=0,n.deltaY=n.detail);n=t.fire("wheel",n)}var t=this,i,o,f,n,c,r,e;if(t._rendered=!0,c=t._nativeEvents){for(f=t.parents().toArray(),f.unshift(t),i=0,o=f.length;!n&&o>i;i++)n=f[i]._eventsRoot;for(n||(n=f[f.length-1]||t),t._eventsRoot=n,o=i,i=0;o>i;i++)f[i]._eventsRoot=n;e=n._delegates;e||(e=n._delegates={});for(r in c){if(!c)return!1;"wheel"!==r||h?("mouseenter"===r||"mouseleave"===r?n._hasMouseEnter||(u.on(n.getEl(),"mouseleave",v),u.on(n.getEl(),"mouseover",y),n._hasMouseEnter=1):e[r]||(u.on(n.getEl(),r,a),e[r]=!0),c[r]=!1):s?u.on(t.getEl(),"mousewheel",l):u.on(t.getEl(),"DOMMouseScroll",l)}}},getRoot:function(){for(var t,r,n=this,i=[];n;){if(n.rootControl){t=n.rootControl;break}i.push(n);t=n;n=n.parent()}for(t||(t=this),r=i.length;r--;)i[r].rootControl=t;return t},reflow:function(){return this.repaint(),this}});return f});i(b,[],function(){var n={},t;return{add:function(t,i){n[t.toLowerCase()]=i},has:function(t){return!!n[t.toLowerCase()]},create:function(i,r){var u,f,e;if(!t){e=tinymce.ui;for(f in e)n[f.toLowerCase()]=e[f];t=!0}if("string"==typeof i?(r=r||{},r.type=i):(r=i,i=r.type),i=i.toLowerCase(),u=n[i],!u)throw new Error("Could not find control by type: "+i);return u=new u(r),u.type=i,u}}});i(pi,[],function(){return function(n){function f(n){return n=n||t,n&&n.getAttribute("role")}function e(n){for(var r,i=n||t;i=i.parentNode;)if(r=f(i))return r}function c(n){var i=t;if(i)return i.getAttribute("aria-"+n)}function l(n){var t=n.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t}function y(n){return l(n)&&!n.hidden?!0:/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell)$/.test(f(n))?!0:!1}function u(n){function t(n){if(1==n.nodeType&&"none"!=n.style.display){y(n)&&i.push(n);for(var r=0;r<n.childNodes.length;r++)t(n.childNodes[r])}}var i=[];return t(n||s.getEl()),i}function a(n){var u,t,i;for(n=n||r,t=n.parents().toArray(),t.unshift(n),i=0;i<t.length&&(u=t[i],!u.settings.ariaRoot);i++);return u}function p(n){var t=a(n),i=u(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?h(t.lastAriaIndex,i):h(0,i)}function h(n,t){return 0>n?n=t.length-1:n>=t.length&&(n=0),t[n]&&t[n].focus(),n}function i(n,i){var f=-1,e=a(),r;for(i=i||u(e.getEl()),r=0;r<i.length;r++)i[r]===t&&(f=r);f+=n;e.lastAriaIndex=h(f,i)}function w(){var n=e();"tablist"==n?i(-1,u(t.parentNode)):r.parent().submenu?v():i(-1)}function b(){var r=f(),n=e();"tablist"==n?i(1,u(t.parentNode)):"menuitem"==r&&"menu"==n&&c("haspopup")?o():i(1)}function k(){i(-1)}function d(){var n=f(),t=e();"menuitem"==n&&"menubar"==t?o():"button"==n&&c("haspopup")?o({key:"down"}):i(1)}function g(n){var f=e(),t;"tablist"==f?(t=u(r.getEl("body"))[0],t&&t.focus()):i(n.shiftKey?-1:1)}function v(){r.fire("cancel")}function o(n){n=n||{};r.fire("click",{target:t,aria:n})}var s=n.root,t,r;try{t=document.activeElement}catch(nt){t=document.body}return r=s.getParentCtrl(t),s.on("keydown",function(n){function i(n,i){l(t)||i(n)!==!1&&n.preventDefault()}if(!n.isDefaultPrevented())switch(n.keyCode){case 37:i(n,w);break;case 39:i(n,b);break;case 38:i(n,k);break;case 40:i(n,d);break;case 27:v();break;case 14:case 13:case 32:i(n,o);break;case 9:g(n)!==!1&&n.preventDefault()}}),s.on("focusin",function(n){t=n.target;r=n.control}),{focusFirst:p}}});i(v,[a,bt,wt,b,pi,r,f],function(n,t,i,r,u,f,e){var o={};return n.extend({layout:"",innerClass:"container-inner",init:function(n){var i=this;i._super(n);n=i.settings;i._fixed=n.fixed;i._items=new t;i.isRtl()&&i.addClass("rtl");i.addClass("container");i.addClass("container-body","body");n.containerCls&&i.addClass(n.containerCls);i._layout=r.create((n.layout||i.layout)+"layout");i.settings.items&&i.add(i.settings.items);i._hasBody=!0},items:function(){return this._items},find:function(n){return n=o[n]=o[n]||new i(n),n.find(this)},add:function(n){var t=this;return t.items().add(t.create(n)).parent(t),t},focus:function(n){var t=this,i,u,r;return n&&(u=t.keyboardNav||t.parents().eq(-1)[0].keyboardNav)?void u.focusFirst(t):(r=t.find("*"),t.statusbar&&r.add(t.statusbar.items()),r.each(function(n){return n.settings.autofocus?(i=null,!1):void(n.canFocus&&(i=i||n))}),i&&i.focus(),t)},replace:function(n,t){for(var i,u=this.items(),r=u.length;r--;)if(u[r]===n){u[r]=t;break}r>=0&&(i=t.getEl(),i&&i.parentNode.removeChild(i),i=n.getEl(),i&&i.parentNode.removeChild(i));t.parent(this)},create:function(t){var u=this,i,e=[];return f.isArray(t)||(t=[t]),f.each(t,function(t){t&&(t instanceof n||("string"==typeof t&&(t={type:t}),i=f.extend({},u.settings.defaults,t),t.type=i.type=i.type||t.type||u.settings.defaultType||(i.defaults?i.defaults.type:null),t=r.create(i)),e.push(t))}),e},renderNew:function(){var n=this;return n.items().each(function(t,i){var r,u;t.parent(n);t._rendered||(r=n.getEl("body"),u=e.createFragment(t.renderHtml()),r.hasChildNodes()&&i<=r.childNodes.length-1?r.insertBefore(u,r.childNodes[i]):r.appendChild(u),t.postRender())}),n._layout.applyClasses(n),n._lastRect=null,n},append:function(n){return this.add(n).renderNew()},prepend:function(n){var t=this;return t.items().set(t.create(n).concat(t.items().toArray())),t.renderNew()},insert:function(n,t,i){var u=this,r,f,e;return n=u.create(n),r=u.items(),!i&&t<r.length-1&&(t+=1),t>=0&&t<r.length&&(f=r.slice(0,t).toArray(),e=r.slice(t).toArray(),r.set(f.concat(n,e))),u.renderNew()},fromJSON:function(n){var t=this;for(var i in n)t.find("#"+i).value(n[i]);return t},toJSON:function(){var t=this,n={};return t.find("*").each(function(t){var i=t.name(),r=t.value();i&&"undefined"!=typeof r&&(n[i]=r)}),n},preRender:function(){},renderHtml:function(){var n=this,t=n._layout,i=this.settings.role;return n.preRender(),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes()+'"'+(i?' role="'+this.settings.role+'"':"")+'><div id="'+n._id+'-body" class="'+n.classes("body")+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"},postRender:function(){var n=this,t;return n.items().exec("postRender"),n._super(),n._layout.postRender(n),n._rendered=!0,n.settings.style&&e.css(n.getEl(),n.settings.style),n.settings.border&&(t=n.borderBox(),e.css(n.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),n.parent()||(n.keyboardNav=new u({root:n})),n},initLayoutRect:function(){var n=this,t=n._super();return n._layout.recalc(n),t},recalc:function(){var t=this,n=t._layoutRect,i=t._lastRect;if(!i||i.w!=n.w||i.h!=n.h)return(t._layout.recalc(t),n=t.layoutRect(),t._lastRect={x:n.x,y:n.y,w:n.w,h:n.h},!0)},reflow:function(){var t;if(this.visible()){for(n.repaintControls=[],n.repaintControls.map={},this.recalc(),t=n.repaintControls.length;t--;)n.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint();n.repaintControls=[]}return this}})});i(k,[f],function(n){function t(){var f=document,n,t,r,e,o,u,s,h,i=Math.max;return n=f.documentElement,t=f.body,r=i(n.scrollWidth,t.scrollWidth),e=i(n.clientWidth,t.clientWidth),o=i(n.offsetWidth,t.offsetWidth),u=i(n.scrollHeight,t.scrollHeight),s=i(n.clientHeight,t.clientHeight),h=i(n.offsetHeight,t.offsetHeight),{width:o>r?e:r,height:h>u?s:u}}return function(i,r){function o(){return u.getElementById(r.handle||i)}var f,u=document,h,c,e,s,l,a;r=r||{};c=function(i){var v=t(),c,y;i.preventDefault();h=i.button;c=o();l=i.screenX;a=i.screenY;y=window.getComputedStyle?window.getComputedStyle(c,null).getPropertyValue("cursor"):c.runtimeStyle.cursor;f=u.createElement("div");n.css(f,{position:"absolute",top:0,left:0,width:v.width,height:v.height,zIndex:2147483647,opacity:.0001,cursor:y});u.body.appendChild(f);n.on(u,"mousemove",s);n.on(u,"mouseup",e);r.start(i)};s=function(n){return n.button!==h?e(n):(n.deltaX=n.screenX-l,n.deltaY=n.screenY-a,n.preventDefault(),void r.drag(n))};e=function(t){n.off(u,"mousemove",s);n.off(u,"mouseup",e);f.parentNode.removeChild(f);r.stop&&r.stop(t)};this.destroy=function(){n.off(o())};n.on(o(),"mousedown",c)}});i(wi,[f,k],function(n,t){return{init:function(){var n=this;n.on("repaint",n.renderScroll)},renderScroll:function(){function r(){function e(t,e,o,s,h,c){var a,v,k,y,d,w,l,p,b;if(v=i.getEl("scroll"+t)){if(p=e.toLowerCase(),b=o.toLowerCase(),i.getEl("absend")&&n.css(i.getEl("absend"),p,i.layoutRect()[s]-1),!h)return void n.css(v,"display","none");n.css(v,"display","block");a=i.getEl("body");k=i.getEl("scroll"+t+"t");y=a["client"+o]-2*u;y-=r&&f?v["client"+c]:0;d=a["scroll"+o];w=y/d;l={};l[p]=a["offset"+e]+u;l[b]=y;n.css(v,l);l={};l[p]=a["scroll"+e]*w;l[b]=y*w;n.css(k,l)}}var r,f,t;t=i.getEl("body");r=t.scrollWidth>t.clientWidth;f=t.scrollHeight>t.clientHeight;e("h","Left","Width","contentW",r,"Height");e("v","Top","Height","contentH",f,"Width")}function f(){function r(r,f,e,o,s){var l,h=i._id+"-scroll"+r,c=i.classPrefix;i.getEl().appendChild(n.createFragment('<div id="'+h+'" class="'+c+"scrollbar "+c+"scrollbar-"+r+'"><div id="'+h+'t" class="'+c+'scrollbar-thumb"><\/div><\/div>'));i.draghelper=new t(h+"t",{start:function(){l=i.getEl("body")["scroll"+f];n.addClass(n.get(h),c+"active")},drag:function(n){var c,a,v,h,t=i.layoutRect();a=t.contentW>t.innerW;v=t.contentH>t.innerH;h=i.getEl("body")["client"+e]-2*u;h-=a&&v?i.getEl("scroll"+r)["client"+s]:0;c=h/i.getEl("body")["scroll"+e];i.getEl("body")["scroll"+f]=l+n["delta"+o]/c},stop:function(){n.removeClass(n.get(h),c+"active")}})}i.addClass("scroll");r("v","Top","Height","Y","Width");r("h","Left","Width","X","Height")}var i=this,u=2;i.settings.autoScroll&&(i._hasScroll||(i._hasScroll=!0,f(),i.on("wheel",function(n){var t=i.getEl("body");t.scrollLeft+=10*(n.deltaX||0);t.scrollTop+=10*n.deltaY;r()}),n.on(i.getEl("body"),"scroll",r)),r())}}});i(ut,[v,wi],function(n,t){return n.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var n=this,i=n._layout,t=n.settings.html;return n.preRender(),i.preRender(n),"undefined"==typeof t?t='<div id="'+n._id+'-body" class="'+n.classes("body")+'">'+i.renderHtml(n)+"<\/div>":("function"==typeof t&&(t=t.call(n)),n._hasBody=!1),'<div id="'+n._id+'" class="'+n.classes()+'" hidefocus="1" tabindex="-1" role="group">'+(n._preBodyHtml||"")+t+"<\/div>"}})});i(kt,[f],function(n){function t(t,i,r){var v,h,u,f,o,s,c,l,a,e;return a=n.getViewPort(),h=n.getPos(i),u=h.x,f=h.y,t._fixed&&"static"==n.getRuntimeStyle(document.body,"position")&&(u-=a.x,f-=a.y),v=t.getEl(),e=n.getSize(v),o=e.width,s=e.height,e=n.getSize(i),c=e.width,l=e.height,r=(r||"").split(""),"b"===r[0]&&(f+=l),"r"===r[1]&&(u+=c),"c"===r[0]&&(f+=Math.round(l/2)),"c"===r[1]&&(u+=Math.round(c/2)),"b"===r[3]&&(f-=s),"r"===r[4]&&(u-=o),"c"===r[3]&&(f-=Math.round(s/2)),"c"===r[4]&&(u-=Math.round(o/2)),{x:u,y:f,w:o,h:s}}return{testMoveRel:function(i,r){for(var u,f=n.getViewPort(),e=0;e<r.length;e++)if(u=t(this,i,r[e]),this._fixed){if(u.x>0&&u.x+u.w<f.w&&u.y>0&&u.y+u.h<f.h)return r[e]}else if(u.x>f.x&&u.x+u.w<f.w+f.x&&u.y>f.y&&u.y+u.h<f.h+f.y)return r[e];return r[0]},moveRel:function(n,i){"string"!=typeof i&&(i=this.testMoveRel(n,i));var r=t(this,n,i);return this.moveTo(r.x,r.y)},moveBy:function(n,t){var i=this,r=i.layoutRect();return i.moveTo(r.x+n,r.y+t),i},moveTo:function(t,i){function e(n,t,i){return 0>n?0:n+i>t?(n=t-i,0>n?0:n):n}var r=this,u,f;return r.settings.constrainToViewport&&(u=n.getViewPort(window),f=r.layoutRect(),t=e(t,u.w+u.x,f.w),i=e(i,u.h+u.y,f.h)),r._rendered?r.layoutRect({x:t,y:i}).repaint():(r.settings.x=t,r.settings.y=i),r.fire("move",{x:t,y:i}),r}}});i(bi,[f],function(n){return{resizeToContent:function(){this._layoutRect.autoResize=!0;this._lastRect=null;this.reflow()},resizeTo:function(t,i){if(1>=t||1>=i){var r=n.getWindowSize();t=1>=t?t*r.w:t;i=1>=i?i*r.h:i}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:i,w:t,h:i}).reflow()},resizeBy:function(n,t){var i=this,r=i.layoutRect();return i.resizeTo(r.w+n,r.h+t)}}});i(d,[ut,kt,bi,f],function(n,t,i,r){function y(){function n(n,t){for(;n;){if(n==t)return!0;n=n.parent()}}s||(s=function(t){var f,i,r;if(2!=t.button)for(f=u.length;f--;)if(i=u[f],r=i.getParentCtrl(t.target),i.settings.autohide){if(r&&(n(r,i)||i.parent()===r))continue;t=i.fire("autohide",{target:t.target});t.isDefaultPrevented()||i.hide()}},r.on(document,"click",s))}function p(){h||(h=function(){for(var n=u.length;n--;)a(u[n])},r.on(window,"scroll",h))}function w(){if(!c){var n=document.documentElement,t=n.clientWidth,i=n.clientHeight;c=function(){document.all&&t==n.clientWidth&&i==n.clientHeight||(t=n.clientWidth,i=n.clientHeight,e.hideAll())};r.on(window,"resize",c)}}function a(n){function i(t,i){for(var r,f=0;f<u.length;f++)if(u[f]!=n)for(r=u[f].parent();r&&(r=r.parent());)r==n&&u[f].fixed(t).moveBy(0,i).repaint()}var t=r.getViewPort().y;n.settings.autofix&&(n._fixed?n._autoFixY>t&&(n.fixed(!1).layoutRect({y:n._autoFixY}).repaint(),i(!1,n._autoFixY-t)):(n._autoFixY=n.layoutRect().y,n._autoFixY<t&&(n.fixed(!0).layoutRect({y:0}).repaint(),i(!0,t-n._autoFixY))))}function o(n,t){var i,u=e.zIndex||65535,s,o;if(n)f.push(t);else for(i=f.length;i--;)f[i]===t&&f.splice(i,1);if(f.length)for(i=0;i<f.length;i++)f[i].modal&&(u++,s=f[i]),f[i].getEl().style.zIndex=u,f[i].zIndex=u,u++;o=document.getElementById(t.classPrefix+"modal-block");s?r.css(o,"z-index",s.zIndex-1):o&&(o.parentNode.removeChild(o),l=!1);e.currentZIndex=u}function v(n){for(var t=u.length;t--;)u[t]===n&&u.splice(t,1);for(t=f.length;t--;)f[t]===n&&f.splice(t,1)}var s,h,c,u=[],f=[],l,e=n.extend({Mixins:[t,i],init:function(n){var t=this;t._super(n);t._eventsRoot=t;t.addClass("floatpanel");n.autohide&&(y(),w(),u.push(t));n.autofix&&(p(),t.on("move",function(){a(this)}));t.on("postrender show",function(n){if(n.control==t){var i,u=t.classPrefix;t.modal&&!l&&(i=r.createFragment('<div id="'+u+'modal-block" class="'+u+"reset "+u+'fade"><\/div>'),i=i.firstChild,t.getContainerElm().appendChild(i),setTimeout(function(){r.addClass(i,u+"in");r.addClass(t.getEl(),u+"in")},0),l=!0);o(!0,t)}});t.on("show",function(){t.parents().each(function(n){if(n._fixed)return(t.fixed(!0),!1)})});n.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"><\/div>',t.addClass("popover").addClass("bottom").addClass(t.isRtl()?"end":"start"))},fixed:function(n){var t=this,i;return t._fixed!=n&&(t._rendered&&(i=r.getViewPort(),n?t.layoutRect().y-=i.y:t.layoutRect().y+=i.y),t.toggleClass("fixed",n),t._fixed=n),t},show:function(){for(var t=this,i=t._super(),n=u.length;n--&&u[n]!==t;);return-1===n&&u.push(t),i},hide:function(){return v(this),o(!1,this),this._super()},hideAll:function(){e.hideAll()},close:function(){var n=this;return n.fire("close").isDefaultPrevented()||(n.remove(),o(!1,n)),n},remove:function(){v(this);this._super()},postRender:function(){var n=this;return n.settings.bodyRole&&this.getEl("body").setAttribute("role",n.settings.bodyRole),n._super()}});return e.hideAll=function(){for(var t,n=u.length;n--;)t=u[n],t&&t.settings.autohide&&(t.hide(),u.splice(n,1))},e});i(dt,[d,ut,f,k],function(n,t,i,r){return n.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(n){var i=this;i._super(n);i.isRtl()&&i.addClass("rtl");i.addClass("window");i._fixed=!0;n.buttons&&(i.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:i.isRtl()?"start":"end",defaults:{type:"button"},items:n.buttons}),i.statusbar.addClass("foot"),i.statusbar.parent(i));i.on("click",function(n){-1!=n.target.className.indexOf(i.classPrefix+"close")&&i.close()});i.on("cancel",function(){i.close()});i.aria("describedby",i.describedBy||i._id+"-none");i.aria("label",n.title);i._fullscreen=!1},recalc:function(){var n=this,f=n.statusbar,t,r,u,e;n._fullscreen&&(n.layoutRect(i.getWindowSize()),n.layoutRect().contentH=n.layoutRect().innerH);n._super();t=n.layoutRect();n.settings.title&&!n._fullscreen&&(r=t.headerW,r>t.w&&(u=t.x-Math.max(0,r/2),n.layoutRect({w:r,x:u}),e=!0));f&&(f.layoutRect({w:n.layoutRect().innerW}).recalc(),r=f.layoutRect().minW+t.deltaW,r>t.w&&(u=t.x-Math.max(0,r-t.w),n.layoutRect({w:r,x:u}),e=!0));e&&n.recalc()},initLayoutRect:function(){var t=this,n=t._super(),r=0,e,u,f;return t.settings.title&&!t._fullscreen&&(e=t.getEl("head"),u=i.getSize(e),n.headerW=u.width,n.headerH=u.height,r+=n.headerH),t.statusbar&&(r+=t.statusbar.layoutRect().h),n.deltaH+=r,n.minH+=r,n.h+=r,f=i.getWindowSize(),n.x=Math.max(0,f.w/2-n.w/2),n.y=Math.max(0,f.h/2-n.h/2),n},renderHtml:function(){var n=this,f=n._layout,t=n._id,r=n.classPrefix,i=n.settings,e="",o="",u=i.html;return n.preRender(),f.preRender(n),i.title&&(e='<div id="'+t+'-head" class="'+r+'window-head"><div id="'+t+'-title" class="'+r+'title">'+n.encode(i.title)+'<\/div><button type="button" class="'+r+'close" aria-hidden="true">×<\/button><div id="'+t+'-dragh" class="'+r+'dragh"><\/div><\/div>'),i.url&&(u='<iframe src="'+i.url+'" tabindex="-1"><\/iframe>'),"undefined"==typeof u&&(u=f.renderHtml(n)),n.statusbar&&(o=n.statusbar.renderHtml()),'<div id="'+t+'" class="'+n.classes()+'" hidefocus="1"><div class="'+n.classPrefix+'reset" role="application">'+e+'<div id="'+t+'-body" class="'+n.classes("body")+'">'+u+"<\/div>"+o+"<\/div><\/div>"},fullscreen:function(n){var t=this,e=document.documentElement,o,u=t.classPrefix,r,f;return n!=t._fullscreen&&((i.on(window,"resize",function(){var r,n;t._fullscreen&&(o?t._timer||(t._timer=setTimeout(function(){var n=i.getWindowSize();t.moveTo(0,0).resizeTo(n.w,n.h);t._timer=0},50)):(r=(new Date).getTime(),n=i.getWindowSize(),t.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-r>50&&(o=!0)))}),r=t.layoutRect(),t._fullscreen=n,n)?(t._initial={x:r.x,y:r.y,w:r.w,h:r.h},t._borderBox=t.parseBox("0"),t.getEl("head").style.display="none",r.deltaH-=r.headerH+2,i.addClass(e,u+"fullscreen"),i.addClass(document.body,u+"fullscreen"),t.addClass("fullscreen"),f=i.getWindowSize(),t.moveTo(0,0).resizeTo(f.w,f.h)):(t._borderBox=t.parseBox(t.settings.border),t.getEl("head").style.display="",r.deltaH+=r.headerH,i.removeClass(e,u+"fullscreen"),i.removeClass(document.body,u+"fullscreen"),t.removeClass("fullscreen"),t.moveTo(t._initial.x,t._initial.y).resizeTo(t._initial.w,t._initial.h))),t.reflow()},postRender:function(){var n=this,t;setTimeout(function(){n.addClass("in")},0);n._super();n.statusbar&&n.statusbar.postRender();n.focus();this.dragHelper=new r(n._id+"-dragh",{start:function(){t={x:n.layoutRect().x,y:n.layoutRect().y}},drag:function(i){n.moveTo(t.x+i.deltaX,t.y+i.deltaY)}});n.on("submit",function(t){t.isDefaultPrevented()||n.close()})},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var n=this,t=n.classPrefix;n.dragHelper.destroy();n._super();n.statusbar&&this.statusbar.remove();n._fullscreen&&(i.removeClass(document.documentElement,t+"fullscreen"),i.removeClass(document.body,t+"fullscreen"))},getContentWindow:function(){var n=this.getEl().getElementsByTagName("iframe")[0];return n?n.contentWindow:null}})});i(ki,[dt],function(n){var t=n.extend({init:function(n){n={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}};this._super(n)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(i){function r(n,t,i){return{type:"button",text:n,subtype:i?"primary":"",onClick:function(n){n.control.parents()[1].close();f(t)}}}var u,f=i.callback||function(){};switch(i.buttons){case t.OK_CANCEL:u=[r("Ok",!0,!0),r("Cancel",!1)];break;case t.YES_NO:case t.YES_NO_CANCEL:u=[r("Yes",1,!0),r("No",0)];i.buttons==t.YES_NO_CANCEL&&u.push(r("Cancel",-1));break;default:u=[r("Ok",!0,!0)]}return new n({padding:20,x:i.x,y:i.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:u,title:i.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:i.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:i.onClose,onCancel:function(){f(!1)}}).renderTo(document.body).reflow()},alert:function(n,i){return"string"==typeof n&&(n={text:n}),n.callback=i,t.msgBox(n)},confirm:function(n,i){return"string"==typeof n&&(n={text:n}),n.callback=i,n.buttons=t.OK_CANCEL,t.msgBox(n)}}});return t});i(di,[dt,ki],function(n,t){return function(i){function f(){if(r.length)return r[r.length-1]}var u=this,r=[];u.windows=r;i.on("remove",function(){for(var n=r.length;n--;)r[n].close()});u.open=function(t,u){var f;return i.editorManager.setActive(i),t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){f.find("form")[0].submit()}},{text:"Cancel",onclick:function(){f.close()}}]),f=new n(t),r.push(f),f.on("close",function(){for(var n=r.length;n--;)r[n]===f&&r.splice(n,1);r.length||i.focus()}),t.data&&f.on("postRender",function(){this.find("*").each(function(n){var i=n.name();i in t.data&&n.value(t.data[i])})}),f.features=t||{},f.params=u||{},1===r.length&&i.nodeChanged(),f.renderTo().reflow()};u.alert=function(n,r,u){t.alert(n,function(){r?r.call(u||this):i.focus()})};u.confirm=function(n,i,r){t.confirm(n,function(n){i.call(r||this,n)})};u.close=function(){f()&&f().close()};u.getParams=function(){return f()?f().params:null};u.setParams=function(n){f()&&(f().params=n)};u.getWindows=function(){return r}}});i(gi,[it,h,s,p,c,u,r],function(n,t,i,r,u,f,e){return function(o){function l(n,t){try{o.getDoc().execCommand(n,!1,t)}catch(i){}}function w(){var n=o.getDoc().documentMode;return n?n:6}function c(n){return n.isDefaultPrevented()}function g(n){var t;n.dataTransfer&&(o.selection.isCollapsed()&&"IMG"==n.target.tagName&&h.select(n.target),t=o.selection.getContent(),t.length>0&&n.dataTransfer.setData(st,d+escape(t)))}function nt(n){var t,i;return n.dataTransfer&&(t=n.dataTransfer.getData(st),t&&t.indexOf(d)>=0&&(i=unescape(t.substr(d.length)))),i}function tt(n){o.queryCommandSupported("mceInsertClipboardContent")?o.execCommand("mceInsertClipboardContent",!1,{content:n}):o.execCommand("mceInsertContent",!1,n)}function ht(){function w(n){var t=r.schema.getBlockElements(),i=o.getBody();if("BR"!=n.nodeName)return!1;for(n=n;n!=i&&!t[n.nodeName];n=n.parentNode)if(n.nextSibling)return!1;return!0}function y(n,t){for(var i=n.nextSibling;i&&i!=t;i=i.nextSibling)if((3!=i.nodeType||0!==a.trim(i.data).length)&&i!==t)return!1;return i===t}function h(n,t,u){for(var f,o=r.schema.getNonEmptyElements(),e=new i(u||n,n);f=e[t?"next":"prev"]();)if(o[f.nodeName]&&!w(f)||3==f.nodeType&&f.data.length>0)return f}function b(n){var s,u,i,e,c;if(!n.collapsed&&(s=r.getParent(t.getNode(n.startContainer,n.startOffset),r.isBlock),u=r.getParent(t.getNode(n.endContainer,n.endOffset),r.isBlock),c=o.schema.getTextBlockElements(),s!=u&&c[s.nodeName]&&c[u.nodeName]&&"false"!==r.getContentEditable(s)&&"false"!==r.getContentEditable(u)))return n.deleteContents(),i=h(s,!1),e=h(u,!0),r.isEmpty(u)||a(s).append(u.childNodes),a(u).remove(),i?1==i.nodeType?"BR"==i.nodeName?(n.setStartBefore(i),n.setEndBefore(i)):(n.setStartAfter(i),n.setEndAfter(i)):(n.setStart(i,i.data.length),n.setEnd(i,i.data.length)):e&&(1==e.nodeType?(n.setStartBefore(e),n.setEndBefore(e)):(n.setStart(e,0),n.setEnd(e,0))),f.setRng(n),!0}function k(n,i){var u,f,s,e,c,l;if(!n.collapsed)return n;if(c=n.startContainer,l=n.startOffset,3==c.nodeType)if(i){if(l<c.data.length)return n}else if(l>0)return n;if(u=t.getNode(n.startContainer,n.startOffset),s=r.getParent(u,r.isBlock),f=h(o.getBody(),i,u),e=r.getParent(f,r.isBlock),!u||!f)return n;if(e&&s!=e)if(i){if(!y(s,e))return n;1==u.nodeType?"BR"==u.nodeName?n.setStartBefore(u):n.setStartAfter(u):n.setStart(u,u.data.length);1==f.nodeType?n.setEnd(f,0):n.setEndBefore(f)}else{if(!y(e,s))return n;1==f.nodeType?"BR"==f.nodeName?n.setStartBefore(f):n.setStartAfter(f):n.setStart(f,f.data.length);1==u.nodeType?n.setEnd(u,0):n.setEndBefore(u)}return n}function d(n){var t=f.getRng();return t=k(t,n),b(t)?!0:void 0}function u(n){var i,t,u;d(n)||(e.each(o.getBody().getElementsByTagName("*"),function(n){"SPAN"==n.tagName&&n.setAttribute("mce-data-marked",1);!n.hasAttribute("data-mce-style")&&n.hasAttribute("style")&&o.dom.setAttrib(n,"style",o.dom.getAttrib(n,"style"))}),i=new l(function(){}),i.observe(o.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),o.getDoc().execCommand(n?"ForwardDelete":"Delete",!1,null),t=o.selection.getRng(),u=t.startContainer.parentNode,e.each(i.takeRecords(),function(n){if(r.isChildOf(n.target,o.getBody())){if("style"==n.attributeName){var i=n.target.getAttribute("data-mce-style");i?n.target.setAttribute("style",i):n.target.removeAttribute("style")}e.each(n.addedNodes,function(n){if("SPAN"==n.nodeName&&!n.getAttribute("mce-data-marked")){var f,i;n==u&&(f=t.startOffset,i=n.firstChild);r.remove(n,!0);i&&(t.setStart(i,f),t.setEnd(i,f),o.selection.setRng(t))}})}}),i.disconnect(),e.each(o.dom.select("span[mce-data-marked]"),function(n){n.removeAttribute("mce-data-marked")}))}var it=o.getDoc(),r=o.dom,f=o.selection,l=window.MutationObserver,p,s;l||(p=!0,l=function(){function t(n){var t=n.relatedNode||n.target;i.push({target:t,addedNodes:[t]})}function r(n){var t=n.relatedNode||n.target;i.push({target:t,attributeName:n.attrName})}var i=[],n;this.observe=function(i){n=i;n.addEventListener("DOMSubtreeModified",t,!1);n.addEventListener("DOMNodeInsertedIntoDocument",t,!1);n.addEventListener("DOMNodeInserted",t,!1);n.addEventListener("DOMAttrModified",r,!1)};this.disconnect=function(){n.removeEventListener("DOMSubtreeModified",t,!1);n.removeEventListener("DOMNodeInsertedIntoDocument",t,!1);n.removeEventListener("DOMNodeInserted",t,!1);n.removeEventListener("DOMAttrModified",r,!1)};this.takeRecords=function(){return i}});o.on("keydown",function(n){var t=n.keyCode==ft,r=n.ctrlKey||n.metaKey;if(!c(n)&&(t||n.keyCode==v)){var i=o.selection.getRng(),f=i.startContainer,e=i.startOffset;if(!r&&i.collapsed&&3==f.nodeType&&(t?e<f.data.length:e>0))return;n.preventDefault();r&&o.selection.getSel().modify("extend",t?"forward":"backward",n.metaKey?"lineboundary":"word");u(t)}});o.on("keypress",function(t){if(!c(t)&&!f.isCollapsed()&&t.charCode&&!n.metaKeyPressed(t)){var e,s,i,l,h,v;e=o.selection.getRng();v=String.fromCharCode(t.charCode);t.preventDefault();s=a(e.startContainer).parents().filter(function(n,t){return!!o.schema.getTextInlineElements()[t.nodeName]});u(!0);s=s.filter(function(n,t){return!a.contains(o.getBody(),t)});s.length?(i=r.createFragment(),s.each(function(n,t){t=t.cloneNode(!1);i.hasChildNodes()?(t.appendChild(i.firstChild),i.appendChild(t)):(h=t,i.appendChild(t));i.appendChild(t)}),h.appendChild(o.getDoc().createTextNode(v)),l=r.getParent(e.startContainer,r.isBlock),r.isEmpty(l)?a(l).empty().append(i):e.insertNode(i),e.setStart(h.firstChild,1),e.setEnd(h.firstChild,1),o.selection.setRng(e)):o.selection.setContent(v)}});o.addCommand("Delete",function(){u()});o.addCommand("ForwardDelete",function(){u(!0)});p||(o.on("dragstart",function(n){s=f.getRng();g(n)}),o.on("drop",function(n){if(!c(n)){var i=nt(n);i&&(n.preventDefault(),window.setTimeout(function(){var r=t.getCaretRangeFromPoint(n.x,n.y,it);s&&(f.setRng(s),s=null);u();f.setRng(r);tt(i)},0))}}),o.on("cut",function(n){!c(n)&&n.clipboardData&&(n.preventDefault(),n.clipboardData.clearData(),n.clipboardData.setData("text/html",o.selection.getContent()),n.clipboardData.setData("text/plain",o.selection.getContent({format:"text"})),u(!0))}))}function ct(){function n(n){var t=s.create("body"),i=n.cloneContents();return t.appendChild(i),h.serializer.serialize(t,{format:"html"})}function i(i){var r,f,u,e;return i.setStart?(f=n(i),u=s.createRng(),u.selectNode(o.getBody()),e=n(u),f===e):i.item?!1:(r=i.duplicate(),r.moveToElementText(o.getBody()),t.compareRanges(i,r))}o.on("keydown",function(n){var u=n.keyCode,r,t;if(!c(n)&&(u==ft||u==v)){if(r=o.selection.isCollapsed(),t=o.getBody(),r&&!s.isEmpty(t))return;if(!r&&!i(o.selection.getRng()))return;n.preventDefault();o.setContent("");t.firstChild&&s.isBlock(t.firstChild)?o.selection.setCursorLocation(t.firstChild,0):o.selection.setCursorLocation(t,0);o.nodeChanged()}})}function it(){o.shortcuts.add("meta+a",null,"SelectAll")}function lt(){o.settings.content_editable||(s.bind(o.getDoc(),"focusin",function(){h.setRng(h.getRng())}),s.bind(o.getDoc(),"mousedown mouseup",function(n){n.target==o.getDoc().documentElement&&(o.getBody().focus(),"mousedown"==n.type?h.placeCaretAt(n.clientX,n.clientY):h.setRng(h.getRng()))}))}function rt(){o.on("keydown",function(n){if(!c(n)&&n.keyCode===v){if(!o.getBody().getElementsByTagName("hr").length)return;if(h.isCollapsed()&&0===h.getRng(!0).startOffset){var i=h.getNode(),t=i.previousSibling;if("HR"==i.nodeName)return s.remove(i),void n.preventDefault();t&&t.nodeName&&"hr"===t.nodeName.toLowerCase()&&(s.remove(t),n.preventDefault())}}})}function at(){window.Range.prototype.getClientRects||o.on("mousedown",function(n){if(!c(n)&&"HTML"===n.target.nodeName){var t=o.getBody();t.blur();setTimeout(function(){t.focus()},0)}})}function vt(){o.on("click",function(n){var t=n.target;/^(IMG|HR)$/.test(t.nodeName)&&(n.preventDefault(),h.getSel().setBaseAndExtent(t,0,t,1),o.nodeChanged());"A"==t.nodeName&&s.hasClass(t,"mce-item-anchor")&&(n.preventDefault(),h.select(t))})}function yt(){function n(){var n=s.getAttribs(h.getStart().cloneNode(!1));return function(){var t=h.getStart();t!==o.getBody()&&(s.setAttrib(t,"style",null),y(n,function(n){t.setAttributeNode(n.cloneNode(!0))}))}}function t(){return!h.isCollapsed()&&s.getParent(h.getStart(),s.isBlock)!=s.getParent(h.getEnd(),s.isBlock)}o.on("keypress",function(i){var r;if(!c(i)&&(8==i.keyCode||46==i.keyCode)&&t())return(r=n(),o.getDoc().execCommand("delete",!1,null),r(),i.preventDefault(),!1)});s.bind(o.getDoc(),"cut",function(i){var r;!c(i)&&t()&&(r=n(),setTimeout(function(){r()},0))})}function pt(){document.body.setAttribute("role","application")}function b(){o.on("keydown",function(n){if(!c(n)&&n.keyCode===v&&h.isCollapsed()&&0===h.getRng(!0).startOffset){var t=h.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return n.preventDefault(),!1}})}function wt(){w()>7||(l("RespectVisibilityInDesign",!0),o.contentStyles.push(".mceHideBrInPre pre br {display: none}"),s.addClass(o.getBody(),"mceHideBrInPre"),k.addNodeFilter("pre",function(n){for(var e=n.length,u,f,i,t;e--;)for(u=n[e].getAll("br"),f=u.length;f--;)i=u[f],t=i.prev,t&&3===t.type&&"\n"!=t.value.charAt(t.value-1)?t.value+="\n":i.parent.insert(new r("#text",3),i,!0).value="\n"}),et.addNodeFilter("pre",function(n){for(var u=n.length,i,r,f,t;u--;)for(i=n[u].getAll("br"),r=i.length;r--;)f=i[r],t=f.prev,t&&3==t.type&&(t.value=t.value.replace(/\r?\n$/,""))}))}function bt(){s.bind(o.getBody(),"mouseup",function(){var t,n=h.getNode();"IMG"==n.nodeName&&((t=s.getStyle(n,"width"))&&(s.setAttrib(n,"width",t.replace(/[^0-9%]+/g,"")),s.setStyle(n,"width","")),(t=s.getStyle(n,"height"))&&(s.setAttrib(n,"height",t.replace(/[^0-9%]+/g,"")),s.setStyle(n,"height","")))})}function kt(){o.on("keydown",function(t){var r,u,f,e,i;if(!c(t)&&t.keyCode==n.BACKSPACE&&(r=h.getRng(),u=r.startContainer,f=r.startOffset,e=s.getRoot(),i=u,r.collapsed&&0===f)){for(;i&&i.parentNode&&i.parentNode.firstChild==i&&i.parentNode!=e;)i=i.parentNode;"BLOCKQUOTE"===i.tagName&&(o.formatter.toggle("blockquote",null,i),r=s.createRng(),r.setStart(u,0),r.setEnd(u,0),h.setRng(r))}})}function dt(){function n(){o._refreshContentEditable();l("StyleWithCSS",!1);l("enableInlineTableEditing",!1);p.object_resizing||l("enableObjectResizing",!1)}p.readonly||o.on("BeforeExecCommand MouseDown",n)}function gt(){function n(){y(s.select("a"),function(n){var t=n.parentNode,i=s.getRoot();if(t.lastChild===n){for(;t&&!s.isBlock(t);){if(t.parentNode.lastChild!==t||t===i)return;t=t.parentNode}s.add(t,"br",{"data-mce-bogus":1})}})}o.on("SetContent ExecCommand",function(t){("setcontent"==t.type||"mceInsertLink"===t.command)&&n()})}function ni(){p.forced_root_block&&o.on("init",function(){l("DefaultParagraphSeparator",p.forced_root_block)})}function ti(){o.on("Undo Redo SetContent",function(n){n.initial||o.execCommand("mceRepaint")})}function ii(){o.on("keydown",function(n){var t;c(n)||n.keyCode!=v||(t=o.getDoc().selection.createRange(),t&&t.item&&(n.preventDefault(),o.undoManager.beforeChange(),s.remove(t.item(0)),o.undoManager.add()))})}function ri(){var n;w()>=10&&(n="",y("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,i){n+=(i>0?",":"")+t+":empty"}),o.contentStyles.push(n+"{padding-right: 1px !important}"))}function ui(){w()<9&&(k.addNodeFilter("noscript",function(n){for(var r=n.length,t,i;r--;)t=n[r],i=t.firstChild,i&&t.attr("data-mce-innertext",i.value)}),et.addNodeFilter("noscript",function(n){for(var f=n.length,i,t,e;f--;)i=n[f],t=n[f].firstChild,t?t.value=u.decode(t.value):(e=i.attributes.map["data-mce-innertext"],e&&(i.attr("data-mce-innertext",null),t=new r("#text",3),t.value=e,t.raw=!0,i.append(t)))}))}function fi(){function f(n,t){var i=o.createTextRange();try{i.moveToPoint(n,t)}catch(r){i=null}return i}function e(n){var r;n.button?(r=f(n.x,n.y),r&&(r.compareEndPoints("StartToStart",t)>0?r.setEndPoint("StartToStart",t):r.setEndPoint("EndToEnd",t),r.select())):i()}function i(){var u=n.selection.createRange();t&&!u.item&&0===u.compareEndPoints("StartToEnd",u)&&t.select();s.unbind(n,"mouseup",i);s.unbind(n,"mousemove",e);t=r=0}var n=s.doc,o=n.body,r,t,u;n.documentElement.unselectable=!0;s.bind(n,"mousedown contextmenu",function(o){if("HTML"===o.target.nodeName){if(r&&i(),u=n.documentElement,u.scrollHeight>u.clientHeight)return;r=1;t=f(o.x,o.y);t&&(s.bind(n,"mouseup",i),s.bind(n,"mousemove",e),s.getRoot().focus(),t.select())}})}function ei(){o.on("keyup focusin mouseup",function(t){65==t.keyCode&&n.metaKeyPressed(t)||h.normalize()},!0)}function oi(){o.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function si(){o.inline||o.on("keydown",function(){document.activeElement==document.body&&o.getWin().focus()})}function ut(){o.inline||(o.contentStyles.push("body {min-height: 150px}"),o.on("click",function(n){if("HTML"==n.target.nodeName){var t;t=o.selection.getRng();o.getBody().focus();o.selection.setRng(t);o.selection.normalize();o.nodeChanged()}}))}function hi(){f.mac&&o.on("keydown",function(t){n.metaKeyPressed(t)&&(37==t.keyCode||39==t.keyCode)&&(t.preventDefault(),o.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","lineboundary"))})}function ci(){l("AutoUrlDetect",!1)}function li(){o.inline||o.on("focus blur beforegetcontent",function(){var n=o.dom.create("br");o.getBody().appendChild(n);n.parentNode.removeChild(n)},!0)}function ai(){o.on("click",function(n){var t=n.target;do if("A"===t.tagName)return void n.preventDefault();while(t=t.parentNode)});o.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function vi(){o.on("touchstart",function(n){var r,u,i,t;r=n.target;u=(new Date).getTime();t=n.changedTouches;!t||t.length>1||(i=t[0],o.once("touchend",function(n){var t=n.changedTouches[0],f;(new Date).getTime()-u>500||Math.abs(i.clientX-t.clientX)>5||Math.abs(i.clientY-t.clientY)>5||(f={target:r},y("pageX pageY clientX clientY screenX screenY".split(" "),function(n){f[n]=t[n]}),f=o.fire("click",f),f.isDefaultPrevented()||(o.selection.placeCaretAt(t.clientX,t.clientY),o.nodeChanged()))}))})}function yi(){o.on("init",function(){o.dom.bind(o.getBody(),"submit",function(n){n.preventDefault()})})}function pi(){k.addNodeFilter("br",function(n){for(var t=n.length;t--;)"Apple-interchange-newline"==n[t].attr("class")&&n[t].remove()})}function wi(){o.on("dragstart",function(n){g(n)});o.on("drop",function(n){var i,r;c(n)||(i=nt(n),i&&(n.preventDefault(),r=t.getCaretRangeFromPoint(n.x,n.y,o.getDoc()),h.setRng(r),tt(i)))})}var y=e.each,a=o.$,v=n.BACKSPACE,ft=n.DELETE,s=o.dom,h=o.selection,p=o.settings,k=o.parser,et=o.serializer,bi=f.gecko,ot=f.ie,ki=f.webkit,d="data:text/mce-internal,",st=ot?"Text":"URL";kt();ct();ei();ki&&(ht(),lt(),vt(),ni(),yi(),b(),pi(),vi(),f.iOS?(si(),ut(),ai()):it());ot&&f.ie<11&&(rt(),pt(),wt(),bt(),ii(),ri(),ui(),fi());f.ie>=11&&(ut(),li(),b());f.ie&&(it(),ci(),wi());bi&&(rt(),at(),yt(),dt(),gt(),ti(),oi(),hi(),b())}});i(ft,[pt],function(n){function t(t){return t._eventDispatcher||(t._eventDispatcher=new n({scope:t,toggleEvent:function(i,r){n.isNative(i)&&t.toggleNativeEvent&&t.toggleNativeEvent(i,r)}})),t._eventDispatcher}return{fire:function(n,i,r){var f=this,u;if(f.removed&&"remove"!==n)return i;if(i=t(f).fire(n,i,r),r!==!1&&f.parent)for(u=f.parent();u&&!i.isPropagationStopped();)u.fire(n,i,!1),u=u.parent();return i},on:function(n,i,r){return t(this).on(n,i,r)},off:function(n,i){return t(this).off(n,i)},once:function(n,i){return t(this).once(n,i)},hasEventListeners:function(n){return t(this).has(n)}}});i(nr,[ft,o,r],function(n,t,i){function u(n,t){return"selectionchange"==t?n.getDoc():!n.inline&&/^mouse|click|contextmenu|drop|dragover|dragend/.test(t)?n.getDoc().documentElement:n.settings.event_root?(n.eventRoot||(n.eventRoot=f.select(n.settings.event_root)[0]),n.eventRoot):n.getBody()}function e(n,t){var e=u(n,t),i;if(n.delegates||(n.delegates={}),!n.delegates[t])if(n.settings.event_root){if(r||(r={},n.editorManager.on("removeEditor",function(){var t;if(!n.editorManager.activeEditor&&r){for(t in r)n.dom.unbind(u(n,t));r=null}})),r[t])return;i=function(i){for(var e,o=i.target,r=n.editorManager.editors,u=r.length;u--;)e=r[u].getBody(),(e===o||f.isChildOf(o,e))&&(r[u].hidden||r[u].fire(t,i))};r[t]=i;f.bind(e,t,i)}else i=function(i){n.hidden||n.fire(t,i)},f.bind(e,t,i),n.delegates[t]=i}var f=t.DOM,r,o={bindPendingEventDelegates:function(){var n=this;i.each(n._pendingNativeEvents,function(t){e(n,t)})},toggleNativeEvent:function(n,t){var i=this;i.settings.readonly||"focus"!=n&&"blur"!=n&&(t?i.initialized?e(i,n):i._pendingNativeEvents?i._pendingNativeEvents.push(n):i._pendingNativeEvents=[n]:i.initialized&&(i.dom.unbind(u(i,n),n,i.delegates[n]),delete i.delegates[n]))},unbindAllNativeEvents:function(){var n=this,t;if(n.delegates){for(t in n.delegates)n.dom.unbind(u(n,t),t,n.delegates[t]);delete n.delegates}n.inline||(n.getBody().onload=null,n.dom.unbind(n.getWin()),n.dom.unbind(n.getDoc()));n.dom.unbind(n.getBody());n.dom.unbind(n.getContainer())}};return i.extend({},n,o)});i(tr,[r,u],function(n,t){var i=n.each,r=n.explode,f={f9:120,f10:121,f11:122},u=n.makeMap("alt,ctrl,shift,meta,access");return function(e){function s(n,o,s,h){var a,l,c;c={func:s,scope:h||e,desc:e.translate(o)};i(r(n,"+"),function(n){n in u?c[n]=!0:/^[0-9]{2,}$/.test(n)?c.keyCode=parseInt(n,10):(c.charCode=n.charCodeAt(0),c.keyCode=f[n]||n.toUpperCase().charCodeAt(0))});a=[c.keyCode];for(l in u)c[l]?a.push(l):c[l]=!1;return c.id=a.join(","),c.access&&(c.alt=!0,t.mac?c.ctrl=!0:c.shift=!0),c.meta&&(t.mac?c.meta=!0:(c.ctrl=!0,c.meta=!1)),c}var h=this,o={};e.on("keyup keypress keydown",function(n){(n.altKey||n.ctrlKey||n.metaKey)&&!n.isDefaultPrevented()&&i(o,function(t){if(t.ctrl==n.ctrlKey&&t.meta==n.metaKey&&t.alt==n.altKey&&t.shift==n.shiftKey&&(n.keyCode==t.keyCode||n.charCode&&n.charCode==t.charCode))return(n.preventDefault(),"keydown"==n.type&&t.func.call(t.scope),!0)})});h.add=function(t,u,f,h){var c;return c=f,"string"==typeof f?f=function(){e.execCommand(c,!1,null)}:n.isArray(c)&&(f=function(){e.execCommand(c[0],c[1],c[2])}),i(r(t.toLowerCase()),function(n){var t=s(n,u,f,h);o[t.id]=t}),!0};h.remove=function(n){var t=s(n);return o[t.id]?(delete o[t.id],!0):!1}}});i(ir,[o,g,ct,dr,p,ei,tt,hi,ci,li,ai,vi,yi,yt,nt,y,di,l,at,gi,u,r,nr,tr],function(n,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt){function ct(n,t,u){var f=this,e,o;e=f.documentBaseUrl=u.documentBaseURL;o=u.baseURI;f.settings=t=lt({id:n,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:f.convertURL,url_converter_scope:f,ie7_compat:!0},t);r.language=t.language||"en";r.languageLoad=t.language_load;r.baseURL=u.baseURL;f.id=t.id=n;f.isNotDirty=!0;f.plugins={};f.documentBaseURI=new y(t.document_base_url||e,{base_uri:o});f.baseURI=o;f.contentCSS=[];f.contentStyles=[];f.shortcuts=new rt(f);f.loadedCSS={};f.editorCommands=new v(f);t.target&&(f.targetElm=t.target);f.suffix=u.suffix;f.editorManager=u;f.inline=t.inline;t.cache_suffix&&(nt.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,""));u.fire("SetupEditor",f);f.execCallback("setup",f);f.$=i.overrideDefaults(function(){return{context:f.inline?f.getBody():f.getDoc(),element:f.getBody()}})}var ut=n.DOM,ht=r.ThemeManager,et=r.PluginManager,lt=tt.extend,ft=tt.each,yt=tt.explode,pt=tt.inArray,ot=tt.trim,at=tt.resolve,wt=w.Event,vt=nt.gecko,st=nt.ie;return ct.prototype={render:function(){function f(){ut.unbind(window,"ready",f);n.render()}function e(){var r=p.ScriptLoader,i;(t.language&&"en"!=t.language&&!t.language_url&&(t.language_url=n.editorManager.baseURL+"/langs/"+t.language+".js"),t.language_url&&r.add(t.language_url),t.theme&&"function"!=typeof t.theme&&"-"!=t.theme.charAt(0)&&!ht.urls[t.theme])&&(i=t.theme_url,i=i?n.documentBaseURI.toAbsolute(i):"themes/"+t.theme+"/theme"+u+".js",ht.load(t.theme,i));tt.isArray(t.plugins)&&(t.plugins=t.plugins.join(" "));ft(t.external_plugins,function(n,i){et.load(i,n);t.plugins+=" "+i});ft(t.plugins.split(/[ ,]/),function(n){if(n=ot(n),n&&!et.urls[n])if("-"==n.charAt(0)){n=n.substr(1,n.length);var t=et.dependencies(n);ft(t,function(n){var t={prefix:"plugins/",resource:n,suffix:"/plugin"+u+".js"};n=et.createUrl(t,n);et.load(n.resource,n)})}else et.load(n,{prefix:"plugins/",resource:n,suffix:"/plugin"+u+".js"})});r.loadQueue(function(){n.removed||n.init()})}var n=this,t=n.settings,r=n.id,u=n.suffix,i;if(!wt.domLoaded)return void ut.bind(window,"ready",f);n.getElement()&&nt.contentEditable&&(t.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden"),i=n.getElement().form||ut.getParent(r,"form"),i&&(n.formElement=i,t.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&(ut.insertAfter(ut.create("input",{type:"hidden",name:r}),r),n.hasHiddenInput=!0),n.formEventDelegate=function(t){n.fire(t.type,t)},ut.bind(i,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!t.submit_patch||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return n.editorManager.triggerSave(),n.isNotDirty=!0,i._mceOldSubmit(i)})),n.windowManager=new b(n),"xml"==t.encoding&&n.on("GetContent",function(n){n.save&&(n.content=ut.encode(n.content))}),t.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&n.save()}),t.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),e())},init:function(){function w(t){var u=et.get(t),r,i;r=et.urls[t]||n.documentBaseUrl.replace(/\/$/,"");t=ot(t);u&&-1===pt(k,t)&&(ft(et.dependencies(t),function(n){w(n)}),i=new u(n,r,n.$),n.plugins[t]=i,i.init&&(i.init(n,r),k.push(t)))}var n=this,t=n.settings,u=n.getElement(),s,r,h,c,i,b,l,f,e,v,a,k=[],y,p,o;if(this.editorManager.i18n.setCode(t.language),n.rtl=this.editorManager.i18n.rtl,n.editorManager.add(n),t.aria_label=t.aria_label||ut.getAttrib(u,"aria-label",n.getLang("aria.rich_text_area")),t.theme&&("function"!=typeof t.theme?(t.theme=t.theme.replace(/-/,""),b=ht.get(t.theme),n.theme=new b(n,ht.urls[t.theme]),n.theme.init&&n.theme.init(n,ht.urls[t.theme]||n.documentBaseUrl.replace(/\/$/,""),n.$)):n.theme=t.theme),ft(t.plugins.replace(/\-/g,"").split(/[ ,]/),w),t.render_ui&&n.theme&&(n.orgDisplay=u.style.display,"function"!=typeof t.theme?(s=t.width||u.style.width||u.offsetWidth,r=t.height||u.style.height||u.offsetHeight,h=t.min_height||100,v=/^[0-9\.]+(|px)$/i,v.test(""+s)&&(s=Math.max(parseInt(s,10),100)),v.test(""+r)&&(r=Math.max(parseInt(r,10),h)),i=n.theme.renderUI({targetNode:u,width:s,height:r,deltaWidth:t.delta_width,deltaHeight:t.delta_height}),t.content_editable||(r=(i.iframeHeight||r)+("number"==typeof r?i.deltaHeight||0:""),h>r&&(r=h))):(i=t.theme(n,u),i.editorContainer.nodeType&&(i.editorContainer=i.editorContainer.id=i.editorContainer.id||n.id+"_parent"),i.iframeContainer.nodeType&&(i.iframeContainer=i.iframeContainer.id=i.iframeContainer.id||n.id+"_iframecontainer"),r=i.iframeHeight||u.offsetHeight),n.editorContainer=i.editorContainer),t.content_css&&ft(yt(t.content_css),function(t){n.contentCSS.push(n.documentBaseURI.toAbsolute(t))}),t.content_style&&n.contentStyles.push(t.content_style),t.content_editable)return u=c=i=null,n.initContentBody();for(n.iframeHTML=t.doctype+"<html><head>",t.document_base_url!=n.documentBaseUrl&&(n.iframeHTML+='<base href="'+n.documentBaseURI.getURI()+'" />'),!nt.caretAfter&&t.ie7_compat&&(n.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),n.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',a=0;a<n.contentCSS.length;a++)y=n.contentCSS[a],n.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+tt._addCacheSuffix(y)+'" />',n.loadedCSS[y]=!0;if(f=t.body_id||"tinymce",-1!=f.indexOf("=")&&(f=n.getParam("body_id","","hash"),f=f[n.id]||f),e=t.body_class||"",-1!=e.indexOf("=")&&(e=n.getParam("body_class","","hash"),e=e[n.id]||""),t.content_security_policy&&(n.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+t.content_security_policy+'" />'),n.iframeHTML+='<\/head><body id="'+f+'" class="mce-content-body '+e+'" data-id="'+n.id+'"><br><\/body><\/html>',p='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+n.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()',document.domain!=location.hostname&&(l=p),o=ut.create("iframe",{id:n.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:n.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:r,display:"block"}}),o.onload=function(){o.onload=null;n.fire("load")},ut.setAttrib(o,"src",l||'javascript:""'),n.contentAreaContainer=i.iframeContainer,n.iframeElement=o,c=ut.add(i.iframeContainer,o),st)try{n.getDoc()}catch(d){c.src=l=p}i.editorContainer&&(ut.get(i.editorContainer).style.display=n.orgDisplay,n.hidden=ut.isHidden(i.editorContainer));n.getElement().style.display="none";ut.setAttrib(n.id,"aria-hidden",!0);l||n.initContentBody();u=c=i=null},initContentBody:function(t){var i=this,r=i.settings,y=i.getElement(),v=i.getDoc(),o,p;r.inline||(i.getElement().style.visibility=i.orgVisibility);t||r.content_editable||(v.open(),v.write(i.iframeHTML),v.close());r.content_editable&&(i.on("remove",function(){var n=this.getBody();ut.removeClass(n,"mce-content-body");ut.removeClass(n,"mce-edit-focus");ut.setAttrib(n,"contentEditable",null)}),ut.addClass(y,"mce-content-body"),i.contentDocument=v=r.content_document||document,i.contentWindow=r.content_window||window,i.bodyElement=y,r.content_document=r.content_window=null,r.root_name=y.nodeName.toLowerCase());o=i.getBody();o.disabled=!0;r.readonly||(i.inline&&"static"==ut.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable=i.getParam("content_editable_state",!0));o.disabled=!1;i.schema=new k(r);i.dom=new n(v,{keep_values:!0,url_converter:i.convertURL,url_converter_scope:i,hex_colors:r.force_hex_style_colors,class_filter:r.class_filter,update_styles:!0,root_element:i.inline?i.getBody():null,collect:r.content_editable,schema:i.schema,onSetAttrib:function(n){i.fire("SetAttrib",n)}});i.parser=new d(r,i.schema);i.parser.addAttributeFilter("src,href,style,tabindex",function(n,t){for(var e=n.length,r,o=i.dom,u,f;e--;)r=n[e],u=r.attr(t),f="data-mce-"+t,r.attributes.map[f]||("style"===t?(u=o.serializeStyle(o.parseStyle(u),r.name),u.length||(u=null),r.attr(f,u),r.attr(t,u)):"tabindex"===t?(r.attr(f,u),r.attr(t,null)):r.attr(f,i.convertURL(u,t,r.name)))});i.parser.addNodeFilter("script",function(n){for(var i=n.length,t;i--;)t=n[i],t.attr("type","mce-"+(t.attr("type")||"no/type"))});i.parser.addNodeFilter("#cdata",function(n){for(var i=n.length,t;i--;)t=n[i],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"});i.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(n){for(var r=n.length,t,u=i.schema.getNonEmptyElements();r--;)t=n[r],t.isEmpty(u)&&(t.append(new f("br",1)).shortEnded=!0)});i.serializer=new e(r,i);i.selection=new s(i.dom,i.getWin(),i.serializer,i);i.formatter=new h(i);i.undoManager=new c(i);i.forceBlocks=new a(i);i.enterKey=new l(i);i._nodeChangeDispatcher=new u(i);i.fire("PreInit");r.browser_spellcheck||r.gecko_spellcheck||(v.body.spellcheck=!1,ut.setAttrib(o,"spellcheck","false"));i.fire("PostRender");i.quirks=new g(i);r.directionality&&(o.dir=r.directionality);r.nowrap&&(o.style.whiteSpace="nowrap");r.protect&&i.on("BeforeSetContent",function(n){ft(r.protect,function(t){n.content=n.content.replace(t,function(n){return"<!--mce:protected "+escape(n)+"-->"})})});i.on("SetContent",function(){i.addVisual(i.getBody())});r.padd_empty_editor&&i.on("PostProcess",function(n){n.content=n.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});i.load({initial:!0,format:"html"});i.startContent=i.getContent({format:"raw"});i.initialized=!0;i.bindPendingEventDelegates();i.fire("init");i.focus(!0);i.nodeChanged({initial:!0});i.execCallback("init_instance_callback",i);i.contentStyles.length>0&&(p="",ft(i.contentStyles,function(n){p+=n+"\r\n"}),i.dom.addStyle(p));ft(i.contentCSS,function(n){i.loadedCSS[n]||(i.dom.loadCSS(n),i.loadedCSS[n]=!0)});r.auto_focus&&setTimeout(function(){var n;n=r.auto_focus===!0?i:i.editorManager.get(r.auto_focus);n.destroyed||n.focus()},100);y=v=o=null},focus:function(n){var t=this,e=t.selection,f=t.settings.content_editable,i,u,o=t.getDoc(),r;if(!n){if(i=e.getRng(),i.item&&(u=i.item(0)),t._refreshContentEditable(),f||(nt.opera||t.getBody().focus(),t.getWin().focus()),vt||f){if(r=t.getBody(),r.setActive)try{r.setActive()}catch(s){r.focus()}else r.focus();f&&e.normalize()}u&&u.ownerDocument==o&&(i=o.body.createControlRange(),i.addElement(u),i.select())}t.editorManager.setActive(t)},execCallback:function(n){var r=this,i=r.settings[n],t;if(i)return r.callbackLookup&&(t=r.callbackLookup[n])&&(i=t.func,t=t.scope),"string"==typeof i&&(t=i.replace(/\.\w+$/,""),t=t?at(t):0,i=at(i),r.callbackLookup=r.callbackLookup||{},r.callbackLookup[n]={func:i,scope:t}),i.apply(t||r,Array.prototype.slice.call(arguments,1))},translate:function(n){var t=this.settings.language||"en",i=this.editorManager.i18n;return n?i.data[t+"."+n]||n.replace(/\{\#([^\}]+)\}/g,function(n,r){return i.data[t+"."+r]||"{#"+r+"}"}):""},getLang:function(n,i){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+n]||(i!==t?i:"{#"+n+"}")},getParam:function(n,t,i){var r=n in this.settings?this.settings[n]:t,u;return"hash"===i?(u={},"string"==typeof r?ft(r.split(r.indexOf("=")>0?/[;,](?![^=;,]*(?:[;,]|$))/:","),function(n){n=n.split("=");u[ot(n[0])]=n.length>1?ot(n[1]):ot(n)}):u=r,u):r},nodeChanged:function(n){this._nodeChangeDispatcher.nodeChanged(n)},addButton:function(n,t){var i=this;t.cmd&&(t.onclick=function(){i.execCommand(t.cmd)});t.text||t.icon||(t.icon=n);i.buttons=i.buttons||{};t.tooltip=t.tooltip||t.title;i.buttons[n]=t},addMenuItem:function(n,t){var i=this;t.cmd&&(t.onclick=function(){i.execCommand(t.cmd)});i.menuItems=i.menuItems||{};i.menuItems[n]=t},addCommand:function(n,t,i){this.editorCommands.addCommand(n,t,i)},addQueryStateHandler:function(n,t,i){this.editorCommands.addQueryStateHandler(n,t,i)},addQueryValueHandler:function(n,t,i){this.editorCommands.addQueryValueHandler(n,t,i)},addShortcut:function(n,t,i,r){this.shortcuts.add(n,t,i,r)},execCommand:function(n,t,i,r){return this.editorCommands.execCommand(n,t,i,r)},queryCommandState:function(n){return this.editorCommands.queryCommandState(n)},queryCommandValue:function(n){return this.editorCommands.queryCommandValue(n)},queryCommandSupported:function(n){return this.editorCommands.queryCommandSupported(n)},show:function(){var n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable=!0:(ut.show(n.getContainer()),ut.hide(n.id)),n.load(),n.fire("show"))},hide:function(){var n=this,t=n.getDoc();n.hidden||(st&&t&&!n.inline&&t.execCommand("SelectAll"),n.save(),n.inline?(n.getBody().contentEditable=!1,n==n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(ut.hide(n.getContainer()),ut.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(n,t){this.fire("ProgressState",{state:n,time:t})},load:function(n){var r=this,i=r.getElement(),u;if(i)return(n=n||{},n.load=!0,u=r.setContent(i.value!==t?i.value:i.innerHTML,n),n.element=i,n.no_events||r.fire("LoadContent",n),n.element=i=null,u)},save:function(n){var t=this,i=t.getElement(),r,u;if(i&&t.initialized)return n=n||{},n.save=!0,n.element=i,r=n.content=t.getContent(n),n.no_events||t.fire("SaveContent",n),r=n.content,/TEXTAREA|INPUT/i.test(i.nodeName)?i.value=r:(t.inline||(i.innerHTML=r),(u=ut.getParent(t.id,"form"))&&ft(u.elements,function(n){if(n.name==t.id)return(n.value=r,!1)})),n.element=i=null,n.set_dirty!==!1&&(t.isNotDirty=!0),r},setContent:function(n,t){var i=this,u=i.getBody(),r;return t=t||{},t.format=t.format||"html",t.set=!0,t.content=n,t.no_events||i.fire("BeforeSetContent",t),n=t.content,0===n.length||/^\s+$/.test(n)?(r=i.settings.forced_root_block,r&&i.schema.isValidChild(u.nodeName.toLowerCase(),r.toLowerCase())?(n=st&&11>st?"":'<br data-mce-bogus="1">',n=i.dom.createHTML(r,i.settings.forced_root_block_attrs,n)):st||(n='<br data-mce-bogus="1">'),i.dom.setHTML(u,n),i.fire("SetContent",t)):("raw"!==t.format&&(n=new o({},i.schema).serialize(i.parser.parse(n,{isRootContent:!0}))),t.content=ot(n),i.dom.setHTML(u,t.content),t.no_events||i.fire("SetContent",t)),t.content},getContent:function(n){var t=this,r,i=t.getBody();return n=n||{},n.format=n.format||"html",n.get=!0,n.getInner=!0,n.no_events||t.fire("BeforeGetContent",n),r="raw"==n.format?i.innerHTML:"text"==n.format?i.innerText||i.textContent:t.serializer.serialize(i,n),n.content="text"!=n.format?ot(r):r,n.no_events||t.fire("GetContent",n),n.content},insertContent:function(n,t){t&&(n=lt({content:n},t));this.execCommand("mceInsertContent",!1,n)},isDirty:function(){return!this.isNotDirty},getContainer:function(){var n=this;return n.container||(n.container=ut.get(n.editorContainer||n.id+"_parent")),n.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=ut.get(this.id)),this.targetElm},getWin:function(){var n=this,t;return n.contentWindow||(t=n.iframeElement,t&&(n.contentWindow=t.contentWindow)),n.contentWindow},getDoc:function(){var n=this,t;return n.contentDocument||(t=n.getWin(),t&&(n.contentDocument=t.document)),n.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(n,t,i){var r=this,u=r.settings;return u.urlconverter_callback?r.execCallback("urlconverter_callback",n,i,!0,t):!u.convert_urls||i&&"LINK"==i.nodeName||0===n.indexOf("file:")||0===n.length?n:u.relative_urls?r.documentBaseURI.toRelative(n):n=r.documentBaseURI.toAbsolute(n,u.remove_script_host)},addVisual:function(n){var i=this,f=i.settings,r=i.dom,u;n=n||i.getBody();i.hasVisual===t&&(i.hasVisual=f.visual);ft(r.select("table,a",n),function(n){var t;switch(n.nodeName){case"TABLE":return u=f.visual_table_class||"mce-item-table",t=r.getAttrib(n,"border"),void(t&&"0"!=t||!i.hasVisual?r.removeClass(n,u):r.addClass(n,u));case"A":return void(r.getAttrib(n,"href",!1)||(t=r.getAttrib(n,"name")||n.id,u=f.visual_anchor_class||"mce-item-anchor",t&&i.hasVisual?r.addClass(n,u):r.removeClass(n,u)))}});i.fire("VisualAid",{element:n,hasVisual:i.hasVisual})},remove:function(){var n=this;n.removed||(n.save(),n.removed=1,n.unbindAllNativeEvents(),n.hasHiddenInput&&ut.remove(n.getElement().nextSibling),n.inline||(st&&10>st&&n.getDoc().execCommand("SelectAll",!1,null),ut.setStyle(n.id,"display",n.orgDisplay),n.getBody().onload=null),n.fire("remove"),n.editorManager.remove(n),ut.remove(n.getContainer()),n.destroy())},destroy:function(n){var t=this,i;if(!t.destroyed){if(!n&&!t.removed)return void t.remove();n||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),t.selection.destroy(),t.dom.destroy());i=t.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,i._mceOldSubmit=null),ut.unbind(i,"submit reset",t.formEventDelegate));t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null;t.bodyElement=t.contentDocument=t.contentWindow=null;t.iframeElement=t.targetElm=null;t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null);t.destroyed=1}},_refreshContentEditable:function(){var i=this,n,t;i._isHidden()&&(n=i.getBody(),t=n.parentNode,t.removeChild(n),t.appendChild(n),n.focus())},_isHidden:function(){var n;return vt?(n=this.selection.getSel(),!n||!n.rangeCount||0===n.rangeCount):0}},lt(ct.prototype,it),ct});i(rr,[],function(){var n={},t="en";return{setCode:function(n){n&&(t=n,this.rtl=this.data[n]?"rtl"===this.data[n]._dir:!1)},getCode:function(){return t},rtl:!1,add:function(t,i){var r=n[t],u;r||(n[t]=r={});for(u in i)r[u]=i[u];this.setCode(t)},translate:function(i){var r,u;return(r=n[t],r||(r={}),"undefined"==typeof i)?i:"string"!=typeof i&&i.raw?i.raw:(i.push&&(u=i.slice(1),i=(r[i[0]]||i[0]).replace(/\{([0-9]+)\}/g,function(n,t){return u[t]})),(r[i]||i).replace(/{context:\w+}$/,""))},data:n}});i(ur,[o,u],function(n,t){function e(n){function o(){try{return document.activeElement}catch(n){return document.body}}function h(n,t){return t&&t.startContainer?!n.isChildOf(t.startContainer,n.getRoot())||!n.isChildOf(t.endContainer,n.getRoot())?void 0:{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}:t}function c(n,t){var i;return t.startContainer?(i=n.getDoc().createRange(),i.setStart(t.startContainer,t.startOffset),i.setEnd(t.endContainer,t.endOffset)):i=t,i}function s(n){return!!i.getParent(n,e.isEditorUIElement)}function l(e){var l=e.editor;l.on("init",function(){(l.inline||t.ie)&&("onbeforedeactivate"in document&&t.ie<9?l.dom.bind(l.getBody(),"beforedeactivate",function(n){if(n.target==l.getBody())try{l.lastRng=l.selection.getRng()}catch(t){}}):l.on("nodechange mouseup keyup",function(n){var t=o();"nodechange"==n.type&&n.selectionChange||(t&&t.id==l.id+"_ifr"&&(t=l.getBody()),l.dom.isChildOf(t,l.getBody())&&(l.lastRng=l.selection.getRng()))}),t.webkit&&!r&&(r=function(){var i=n.activeEditor,t;i&&i.selection&&(t=i.selection.getRng(),t&&!t.collapsed&&(l.lastRng=t))},i.bind(document,"selectionchange",r)))});l.on("setcontent",function(){l.lastRng=null});l.on("mousedown",function(){l.selection.lastFocusBookmark=null});l.on("focusin",function(){var t=n.focusedEditor;l.selection.lastFocusBookmark&&(l.selection.setRng(c(l,l.selection.lastFocusBookmark)),l.selection.lastFocusBookmark=null);t!=l&&(t&&t.fire("blur",{focusedEditor:l}),n.setActive(l),n.focusedEditor=l,l.fire("focus",{blurredEditor:t}),l.focus(!0));l.lastRng=null});l.on("focusout",function(){window.setTimeout(function(){var t=n.focusedEditor;s(o())||t!=l||(l.fire("blur",{focusedEditor:null}),n.focusedEditor=null,l.selection&&(l.selection.lastFocusBookmark=null))},0)});u||(u=function(t){var i=n.activeEditor;i&&t.target.ownerDocument==document&&(i.selection&&t.target!=i.getBody()&&(i.selection.lastFocusBookmark=h(i.dom,i.lastRng)),t.target==document.body||s(t.target)||n.focusedEditor!=i||(i.fire("blur",{focusedEditor:null}),n.focusedEditor=null))},i.bind(document,"focusin",u));l.inline&&!f&&(f=function(t){var i=n.activeEditor,r;i.inline&&!i.dom.isChildOf(t.target,i.getBody())&&(r=i.selection.getRng(),r.collapsed||(i.lastRng=r))},i.bind(document,"mouseup",f))}function a(t){n.focusedEditor==t.editor&&(n.focusedEditor=null);n.activeEditor||(i.unbind(document,"selectionchange",r),i.unbind(document,"focusin",u),i.unbind(document,"mouseup",f),r=u=f=null)}n.on("AddEditor",l);n.on("RemoveEditor",a)}var r,u,f,i=n.DOM;return e.isEditorUIElement=function(n){return-1!==n.className.toString().indexOf("mce-")},e});i(et,[ir,g,o,yt,u,r,ft,rr,ur],function(n,t,i,r,u,f,e,o,s){function v(n){var t=l.editors,r,i;for(delete t[n.id],i=0;i<t.length;i++)if(t[i]==n){t.splice(i,1);r=!0;break}return l.activeEditor==n&&(l.activeEditor=t[0]),l.focusedEditor==n&&(l.focusedEditor=null),r}function p(n){return n&&!(n.getContainer()||n.getBody()).parentNode&&(v(n),n.unbindAllNativeEvents(),n.destroy(!0),n=null),n}var h=i.DOM,w=f.explode,c=f.each,y=f.extend,b=0,a,l;return l={$:t,majorVersion:"4",minorVersion:"1.10",releaseDate:"2015-05-05",editors:[],i18n:o,activeEditor:null,setup:function(){var i=this,u,t,f="",e,n,h,o;if(t=document.location.href,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),e=window.tinymce||window.tinyMCEPreInit)u=e.base||e.baseURL,f=e.suffix;else{for(h=document.getElementsByTagName("script"),o=0;o<h.length;o++)if(n=h[o].src,/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(n)){-1!=n.indexOf(".min")&&(f=".min");u=n.substring(0,n.lastIndexOf("/"));break}!u&&document.currentScript&&(n=document.currentScript.src,-1!=n.indexOf(".min")&&(f=".min"),u=n.substring(0,n.lastIndexOf("/")))}i.baseURL=new r(t).toAbsolute(u);i.documentBaseURL=t;i.baseURI=new r(i.baseURL);i.suffix=f;i.focusManager=new s(i)},init:function(t){function r(n){var t=n.id;return t||(t=n.name,t=t&&!h.get(t)?n.name:h.uniqueId(),n.setAttribute("id",t)),t}function i(t,i,r){if(!p(u.get(t))){var f=new n(t,i,u);f.targetElm=f.targetElm||r;s.push(f);f.render()}}function f(n){var i=t[n];if(i)return i.apply(u,Array.prototype.slice.call(arguments,2))}function e(n,t){return t.constructor===RegExp?t.test(n.className):h.hasClass(n,t)}function o(){var n,u;if(h.unbind(window,"ready",o),f("onpageload"),t.types)return void c(t.types,function(n){c(h.select(n.selector),function(u){i(r(u),y({},t,n),u)})});if(t.selector)return void c(h.select(t.selector),function(n){i(r(n),t,n)});switch(t.target&&i(r(t.target),t),t.mode){case"exact":n=t.elements||"";n.length>0&&c(w(n),function(n){var r;(r=h.get(n))?i(n,t,r):c(document.forms,function(r){c(r.elements,function(r){r.name===n&&(n="mce_editor_"+b++,h.setAttrib(r,"id",n),i(n,t,r))})})});break;case"textareas":case"specific_textareas":c(h.select("textarea"),function(n){t.editor_deselector&&e(n,t.editor_deselector)||(!t.editor_selector||e(n,t.editor_selector))&&i(r(n),t,n)})}t.oninit&&(n=u=0,c(s,function(t){u++;t.initialized?n++:t.on("init",function(){n++;n==u&&f("oninit")});n==u&&f("oninit")}))}var u=this,s=[];u.settings=t;h.bind(window,"ready",o)},get:function(n){return arguments.length?n in this.editors?this.editors[n]:null:this.editors},add:function(n){var t=this,i=t.editors;return i[n.id]=n,i.push(n),t.activeEditor=n,t.fire("AddEditor",{editor:n}),a||(a=function(){t.fire("BeforeUnload")},h.bind(window,"beforeunload",a)),n},createEditor:function(t,i){return this.add(new n(t,i,this))},remove:function(n){var r=this,u,i=r.editors,t;if(n)return"string"==typeof n?(n=n.selector||n,void c(h.select(n),function(n){t=i[n.id];t&&r.remove(t)})):(t=n,i[t.id]?(v(t)&&r.fire("RemoveEditor",{editor:t}),i.length||h.unbind(window,"beforeunload",a),t.remove(),t):null);for(u=i.length-1;u>=0;u--)r.remove(i[u])},execCommand:function(t,i,r){var u=this,f=u.get(r);switch(t){case"mceAddEditor":return u.get(r)||new n(r,u.settings,u).render(),!0;case"mceRemoveEditor":return f&&f.remove(),!0;case"mceToggleEditor":return f?(f.isHidden()?f.show():f.hide(),!0):(u.execCommand("mceAddEditor",0,r),!0)}return u.activeEditor?u.activeEditor.execCommand(t,i,r):!1},triggerSave:function(){c(this.editors,function(n){n.save()})},addI18n:function(n,t){o.add(n,t)},translate:function(n){return o.translate(n)},setActive:function(n){var t=this.activeEditor;this.activeEditor!=n&&(t&&t.fire("deactivate",{relatedTarget:n}),n.fire("activate",{relatedTarget:t}));this.activeEditor=n}},y(l,e),l.setup(),window.tinymce=window.tinyMCE=l,l});i(nu,[et,r],function(n,t){var i=t.each,r=t.explode;n.on("AddEditor",function(n){var t=n.editor;t.on("preInit",function(){function u(t,r){i(r,function(i,r){i&&n.setStyle(t,r,i)});n.rename(t,"span")}function s(r){n=t.dom;f.convert_fonts_to_spans&&i(n.select("font,u,strike",r.node),function(t){e[t.nodeName.toLowerCase()](n,t)})}var e,o,n,f=t.settings;f.inline_styles&&(o=r(f.font_size_legacy_values),e={font:function(n,t){u(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:o[parseInt(t.size,10)-1]})},u:function(n,i){"html4"===t.settings.schema&&u(i,{textDecoration:"underline"})},strike:function(n,t){u(t,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",s))})})});i(fr,[ft,r],function(n,t){var i={send:function(n){function r(){!n.async||4==t.readyState||u++>1e4?(n.success&&1e4>u&&200==t.status?n.success.call(n.success_scope,""+t.responseText,t,n):n.error&&n.error.call(n.error_scope,u>1e4?"TIMED_OUT":"GENERAL",t,n),t=null):setTimeout(r,10)}var t,u=0;if(n.scope=n.scope||this,n.success_scope=n.success_scope||n.scope,n.error_scope=n.error_scope||n.scope,n.async=n.async===!1?!1:!0,n.data=n.data||"",t=new XMLHttpRequest){if(t.overrideMimeType&&t.overrideMimeType(n.content_type),t.open(n.type||(n.data?"POST":"GET"),n.url,n.async),n.crossDomain&&(t.withCredentials=!0),n.content_type&&t.setRequestHeader("Content-Type",n.content_type),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t=i.fire("beforeSend",{xhr:t,settings:n}).xhr,t.send(n.data),!n.async)return r();setTimeout(r,10)}}};return t.extend(i,n),i});i(er,[],function(){function n(t,i){var u,r,e,f;if(i=i||'"',null===t)return"null";if(e=typeof t,"string"==e)return r="\bb\tt\nn\ff\rr\"\"''\\\\",i+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(n,t){return'"'===i&&"'"===n?n:(u=r.indexOf(t),u+1?"\\"+r.charAt(u+1):(n=t.charCodeAt().toString(16),"\\u"+"0000".substring(n.length)+n))})+i;if("object"==e){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(u=0,r="[";u<t.length;u++)r+=(u>0?",":"")+n(t[u],i);return r+"]"}r="{";for(f in t)t.hasOwnProperty(f)&&(r+="function"!=typeof t[f]?(r.length>1?","+i:i)+f+i+":"+n(t[f],i):"");return r+"}"}return""+t}return{serialize:n,parse:function(n){try{return window[String.fromCharCode(101)+"val"]("("+n+")")}catch(t){}}}});i(tu,[er,fr,r],function(n,t,i){function r(n){this.settings=u({},n);this.count=0}var u=i.extend;return r.sendRPC=function(n){return(new r).send(n)},r.prototype={send:function(i){var r=i.error,f=i.success;i=u(this.settings,i);i.success=function(t,u){t=n.parse(t);"undefined"==typeof t&&(t={error:"JSON Parse error."});t.error?r.call(i.error_scope||i.scope,t.error,u):f.call(i.success_scope||i.scope,t.result)};i.error=function(n,t){r&&r.call(i.error_scope||i.scope,n,t)};i.data=n.serialize({id:i.id||"c"+this.count++,method:i.method,params:i.params});i.content_type="application/json";t.send(i)}},r});i(iu,[o],function(n){return{callbacks:{},count:0,send:function(i){var r=this,u=n.DOM,f=i.count!==t?i.count:r.count,e="tinymce_jsonp_"+f;r.callbacks[f]=function(n){u.remove(e);delete r.callbacks[f];i.callback(n)};u.add(u.doc.body,"script",{id:e,src:i.url,type:"text/javascript"});r.count++}}});i(ru,[],function(){function s(){u=[];for(var t in n)u.push(t);o.length=u.length}function h(){function o(n){var r,i;return i=n!==t?c+n:h.indexOf(",",c),-1===i||i>h.length?null:(r=h.substring(c,i),c=i+1,r)}var e,h,l,c=0,u;if(n={},f){i.load(r);h=i.getAttribute(r)||"";do{if(u=o(),null===u)break;if(e=o(parseInt(u,32)||0),null!==e){if(u=o(),null===u)break;l=o(parseInt(u,32)||0);e&&(n[e]=l)}}while(null!==e);s()}}function e(){var u,e="",t;if(f){for(t in n)u=n[t],e+=(e?",":"")+t.length.toString(32)+","+t+","+u.length.toString(32)+","+u;i.setAttribute(r,e);try{i.save(r)}catch(o){}s()}}var o,i,n,u,r,f;try{if(window.localStorage)return localStorage}catch(c){}return r="tinymce",i=document.documentElement,f=!!i.addBehavior,f&&i.addBehavior("#default#userData"),o={key:function(n){return u[n]},getItem:function(t){return t in n?n[t]:null},setItem:function(t,i){n[t]=""+i;e()},removeItem:function(t){delete n[t];e()},clear:function(){n={};e()}},h(),o});i(uu,[o,y,nt,ct,r,u],function(n,t,i,r,u,f){var e=window.tinymce;return e.DOM=n.DOM,e.ScriptLoader=i.ScriptLoader,e.PluginManager=r.PluginManager,e.ThemeManager=r.ThemeManager,e.dom=e.dom||{},e.dom.Event=t.Event,u.each(u,function(n,t){e[t]=n}),u.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(n){e[n]=f[n.substr(2).toLowerCase()]}),{}});i(gt,[w,r],function(n,t){return n.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(n){this.settings=t.extend({},this.Defaults,n)},preRender:function(n){n.addClass(this.settings.containerClass,"body")},applyClasses:function(n){var f=this,t=f.settings,i,r,u;i=n.items().filter(":visible");r=t.firstControlClass;u=t.lastControlClass;i.each(function(n){n.removeClass(r).removeClass(u);t.controlClass&&n.addClass(t.controlClass)});i.eq(0).addClass(r);i.eq(-1).addClass(u)},renderHtml:function(n){var u=this,t=u.settings,i,r="";return i=n.items(),i.eq(0).addClass(t.firstControlClass),i.eq(-1).addClass(t.lastControlClass),i.each(function(n){t.controlClass&&n.addClass(t.controlClass);r+=n.renderHtml()}),r},recalc:function(){},postRender:function(){}})});i(ot,[gt],function(n){return n.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(n){n.items().filter(":visible").each(function(n){var t=n.settings;n.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h});n.recalc&&n.recalc()})},renderHtml:function(n){return'<div id="'+n._id+'-absend" class="'+n.classPrefix+'abs-end"><\/div>'+this._super(n)}})});i(or,[a,kt],function(n,t){return n.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},text:function(n){var t=this;return"undefined"!=typeof n?(t._value=n,t._rendered&&(t.getEl().lastChild.innerHTML=t.encode(n)),t):t._value},renderHtml:function(){var n=this,t=n.classPrefix;return'<div id="'+n._id+'" class="'+n.classes()+'" role="presentation"><div class="'+t+'tooltip-arrow"><\/div><div class="'+t+'tooltip-inner">'+n.encode(n._text)+"<\/div><\/div>"},repaint:function(){var i=this,n,t;n=i.getEl().style;t=i._layoutRect;n.left=t.x+"px";n.top=t.y+"px";n.zIndex=131070}})});i(e,[a,or],function(n,t){var i,r=n.extend({init:function(n){var t=this;t._super(n);n=t.settings;t.canFocus=!0;n.tooltip&&r.tooltips!==!1&&(t.on("mouseenter",function(i){var r=t.tooltip().moveTo(-65535),u;i.control==t?(u=r.text(n.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]),r.toggleClass("tooltip-n","bc-tc"==u),r.toggleClass("tooltip-nw","bc-tl"==u),r.toggleClass("tooltip-ne","bc-tr"==u),r.moveRel(t.getEl(),u)):r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()}));t.aria("label",n.ariaLabel||n.tooltip)},tooltip:function(){return i||(i=new t({type:"tooltip"}),i.renderTo()),i},active:function(n){var t=this,i;return n!==i&&(t.aria("pressed",n),t.toggleClass("active",n)),t._super(n)},disabled:function(n){var t=this,i;return n!==i&&(t.aria("disabled",n),t.toggleClass("disabled",n)),t._super(n)},postRender:function(){var n=this,t=n.settings;n._rendered=!0;n._super();n.parent()||!t.width&&!t.height||(n.initLayoutRect(),n.repaint());t.autofocus&&n.focus()},remove:function(){this._super();i&&(i.remove(),i=null)}});return r});i(ni,[e],function(n){return n.extend({Defaults:{classes:"widget btn",role:"button"},init:function(n){var t=this,i;t.on("click mousedown",function(n){n.preventDefault()});t._super(n);i=n.size;n.subtype&&t.addClass(n.subtype);i&&t.addClass("btn-"+i)},icon:function(n){var t=this,u=t.classPrefix,r,i;return"undefined"==typeof n?t.settings.icon:((t.settings.icon=n,n=n?u+"ico "+u+"i-"+t.settings.icon:"",t._rendered)&&(r=t.getEl().firstChild,i=r.getElementsByTagName("i")[0],n?(i&&i==r.firstChild||(i=document.createElement("i"),r.insertBefore(i,r.firstChild)),i.className=n):i&&r.removeChild(i),t.text(t._text)),t)},repaint:function(){var n=this.getEl().firstChild.style;n.width=n.height="100%";this._super()},text:function(n){var t=this,i;return t._rendered&&(i=t.getEl().lastChild.lastChild,i&&(i.data=t.translate(n))),t._super(n)},renderHtml:function(){var t=this,r=t._id,u=t.classPrefix,i=t.settings.icon,n;return n=t.settings.image,n?(i="none","string"!=typeof n&&(n=window.getSelection?n[0]:n[1]),n=" style=\"background-image: url('"+n+"')\""):n="",i=t.settings.icon?u+"ico "+u+"i-"+i:"",'<div id="'+r+'" class="'+t.classes()+'" tabindex="-1" aria-labelledby="'+r+'"><button role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+n+"><\/i>":"")+(t._text?(i?" ":"")+t.encode(t._text):"")+"<\/button><\/div>"}})});i(fu,[v],function(n){return n.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var n=this,t=n._layout;return n.addClass("btn-group"),n.preRender(),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes()+'"><div id="'+n._id+'-body">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"}})});i(sr,[e],function(n){return n.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(n){var t=this;t._super(n);t.on("click mousedown",function(n){n.preventDefault()});t.on("click",function(n){n.preventDefault();t.disabled()||t.checked(!t.checked())});t.checked(t.settings.checked)},checked:function(n){var t=this;return"undefined"!=typeof n?(n?t.addClass("checked"):t.removeClass("checked"),t._checked=n,t.aria("checked",n),t):t._checked},value:function(n){return this.checked(n)},renderHtml:function(){var n=this,t=n._id,i=n.classPrefix;return'<div id="'+t+'" class="'+n.classes()+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+i+"ico "+i+'i-checkbox"><\/i><span id="'+t+'-al" class="'+i+'label">'+n.encode(n._text)+"<\/span><\/div>"}})});i(ti,[e,b,f],function(n,t,i){return n.extend({init:function(n){var t=this;t._super(n);t.addClass("combobox");t.subinput=!0;t.ariaTarget="inp";n=t.settings;n.menu=n.menu||n.values;n.menu&&(n.icon="caret");t.on("click",function(i){for(var r=i.target,u=t.getEl();r&&r!=u;)r.id&&-1!=r.id.indexOf("-open")&&(t.fire("action"),n.menu&&(t.showMenu(),i.aria&&t.menu.items()[0].focus())),r=r.parentNode});t.on("keydown",function(n){"INPUT"==n.target.nodeName&&13==n.keyCode&&t.parents().reverse().each(function(i){return n.preventDefault(),t.fire("change"),i.hasEventListeners("submit")&&i.toJSON?(i.fire("submit",{data:i.toJSON()}),!1):void 0})});n.placeholder&&(t.addClass("placeholder"),t.on("focusin",function(){t._hasOnChange||(i.on(t.getEl("inp"),"change",function(){t.fire("change")}),t._hasOnChange=!0);t.hasClass("placeholder")&&(t.getEl("inp").value="",t.removeClass("placeholder"))}),t.on("focusout",function(){0===t.value().length&&(t.getEl("inp").value=n.placeholder,t.addClass("placeholder"))}))},showMenu:function(){var n=this,r=n.settings,i;n.menu||(i=r.menu||[],i.length?i={type:"menu",items:i}:i.type=i.type||"menu",n.menu=t.create(i).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(t){t.control===n.menu&&n.focus()}),n.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()==n.value())})}).fire("show"),n.menu.on("select",function(t){n.value(t.control.value())}),n.on("focusin",function(t){"INPUT"==t.target.tagName.toUpperCase()&&n.menu.hide()}),n.aria("expanded",!0));n.menu.show();n.menu.layoutRect({w:n.layoutRect().w});n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},value:function(n){var t=this;return"undefined"!=typeof n?(t._value=n,t.removeClass("placeholder"),t._rendered&&(t.getEl("inp").value=n),t):t._rendered?(n=t.getEl("inp").value,n!=t.settings.placeholder?n:""):t._value},disabled:function(n){var t=this;return t._rendered&&"undefined"!=typeof n&&(t.getEl("inp").disabled=n),t._super(n)},focus:function(){this.getEl("inp").focus()},repaint:function(){var n=this,o=n.getEl(),r=n.getEl("open"),u=n.layoutRect(),f,e,t;return f=r?u.w-i.getSize(r).width-10:u.w-10,t=document,t.all&&(!t.documentMode||t.documentMode<=8)&&(e=n.layoutRect().h-2+"px"),i.css(o.firstChild,{width:f,lineHeight:e}),n._super(),n},postRender:function(){var n=this;return i.on(this.getEl("inp"),"change",function(){n.fire("change")}),n._super()},remove:function(){i.off(this.getEl("inp"));this._super()},renderHtml:function(){var i=this,f=i._id,n=i.settings,r=i.classPrefix,s=n.value||n.placeholder||"",t,e,o="",u="";return"spellcheck"in n&&(u+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(u+=' maxlength="'+n.maxLength+'"'),n.size&&(u+=' size="'+n.size+'"'),n.subtype&&(u+=' type="'+n.subtype+'"'),i.disabled()&&(u+=' disabled="disabled"'),t=n.icon,t&&"caret"!=t&&(t=r+"ico "+r+"i-"+n.icon),e=i._text,(t||e)&&(o='<div id="'+f+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button"><button id="'+f+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=t?'<i class="'+t+'"><\/i>':'<i class="'+r+'caret"><\/i>')+(e?(t?" ":"")+e:"")+"<\/button><\/div>",i.addClass("has-open")),'<div id="'+f+'" class="'+i.classes()+'"><input id="'+f+'-inp" class="'+r+"textbox "+r+'placeholder" value="'+s+'" hidefocus="1"'+u+" />"+o+"<\/div>"}})});i(eu,[ti],function(n){return n.extend({init:function(n){var t=this;n.spellcheck=!1;n.onaction&&(n.icon="none");t._super(n);t.addClass("colorbox");t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(n){var t=this.getEl().getElementsByTagName("i")[0];if(t)try{t.style.background=n}catch(i){}},value:function(n){var t=this;return"undefined"!=typeof n&&t._rendered&&t.repaintColor(n),t._super(n)}})});i(hr,[ni,d],function(n,t){return n.extend({showPanel:function(){var n=this,r=n.settings,i;(n.active(!0),n.panel)?n.panel.show():(i=r.panel,i.type&&(i={layout:"grid",items:i}),i.role=i.role||"dialog",i.popover=!0,i.autohide=!0,i.ariaRoot=!0,n.panel=new t(i).on("hide",function(){n.active(!1)}).on("cancel",function(t){t.stopPropagation();n.focus();n.hidePanel()}).parent(n).renderTo(n.getContainerElm()),n.panel.fire("show"),n.panel.reflow());n.panel.moveRel(n.getEl(),r.popoverAlign||(n.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var n=this;n.panel&&n.panel.hide()},postRender:function(){var n=this;return n.aria("haspopup",!0),n.on("click",function(t){t.control===n&&(n.panel&&n.panel.visible()?n.hidePanel():(n.showPanel(),n.panel.focus(!!t.aria)))}),n._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})});i(ou,[hr,o],function(n,t){var i=t.DOM;return n.extend({init:function(n){this._super(n);this.addClass("colorbutton")},color:function(n){return n?(this._color=n,this.getEl("preview").style.backgroundColor=n,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var n=this,r=n._id,t=n.classPrefix,i=n.settings.icon?t+"ico "+t+"i-"+n.settings.icon:"",u=n.settings.image?" style=\"background-image: url('"+n.settings.image+"')\"":"";return'<div id="'+r+'" class="'+n.classes()+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+u+"><\/i>":"")+'<span id="'+r+'-preview" class="'+t+'preview"><\/span>'+(n._text?(i?" ":"")+n._text:"")+'<\/button><button type="button" class="'+t+'open" hidefocus="1" tabindex="-1"> <i class="'+t+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this,t=n.settings.onclick;return n.on("click",function(r){r.aria&&"down"==r.aria.key||r.control!=n||i.getParent(r.target,"."+n.classPrefix+"open")||(r.stopImmediatePropagation(),t.call(n,r))}),delete n.settings.onclick,n._super()}})});i(cr,[],function(){function r(r){function h(r,u,f){var s,c,h,l,e,o;return s=0,c=0,h=0,r/=255,u/=255,f/=255,e=t(r,t(u,f)),o=i(r,i(u,f)),e==o?(h=e,{h:0,s:0,v:100*h}):(l=r==e?u-f:f==e?r-u:f-r,s=r==e?3:f==e?1:5,s=60*(s-l/(o-e)),c=(o-e)/o,h=o,{h:n(s),s:n(100*c),v:n(100*h)})}function c(r,o,s){var a,h,c,l;if(r=(parseInt(r,10)||0)%360,o=parseInt(o,10)/100,s=parseInt(s,10)/100,o=i(0,t(o,1)),s=i(0,t(s,1)),0===o)return void(u=f=e=n(255*s));switch(a=r/60,h=s*o,c=h*(1-Math.abs(a%2-1)),l=s-h,Math.floor(a)){case 0:u=h;f=c;e=0;break;case 1:u=c;f=h;e=0;break;case 2:u=0;f=h;e=c;break;case 3:u=0;f=c;e=h;break;case 4:u=c;f=0;e=h;break;case 5:u=h;f=0;e=c;break;default:u=f=e=0}u=n(255*(u+l));f=n(255*(f+l));e=n(255*(e+l))}function l(){function n(n){return n=parseInt(n,10).toString(16),n.length>1?n:"0"+n}return"#"+n(u)+n(f)+n(e)}function a(){return{r:u,g:f,b:e}}function v(){return h(u,f,e)}function s(n){var t;return"object"==typeof n?"r"in n?(u=n.r,f=n.g,e=n.b):"v"in n&&c(n.h,n.s,n.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(n))?(u=parseInt(t[1],10),f=parseInt(t[2],10),e=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(n))?(u=parseInt(t[1],16),f=parseInt(t[2],16),e=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(n))&&(u=parseInt(t[1]+t[1],16),f=parseInt(t[2]+t[2],16),e=parseInt(t[3]+t[3],16)),u=0>u?0:u>255?255:u,f=0>f?0:f>255?255:f,e=0>e?0:e>255?255:e,o}var o=this,u=0,f=0,e=0;r&&s(r);o.toRgb=a;o.toHsv=v;o.toHex=l;o.parse=s}var t=Math.min,i=Math.max,n=Math.round;return r});i(su,[e,k,f,cr],function(n,t,i,r){return n.extend({Defaults:{classes:"widget colorpicker"},init:function(n){this._super(n)},postRender:function(){function o(n,t){var f=i.getPos(n),r,u;return r=t.pageX-f.x,u=t.pageY-f.y,r=Math.max(0,Math.min(r/n.clientWidth,1)),u=Math.max(0,Math.min(u/n.clientHeight,1)),{x:r,y:u}}function f(t,u){var f=(360-t.h)/360;i.css(a,{top:100*f+"%"});u||i.css(v,{left:t.s+"%",top:100-t.v+"%"});e.style.background=new r({s:100,v:100,h:t.h}).toHex();n.color().parse({s:t.s,v:t.v,h:t.h})}function s(t){var i;i=o(e,t);u.s=100*i.x;u.v=100*(1-i.y);f(u);n.fire("change")}function h(t){var i;i=o(l,t);u=c.toHsv();u.h=360*(1-i.y);f(u,!0);n.fire("change")}var n=this,c=n.color(),u,l,a,e,v;l=n.getEl("h");a=n.getEl("hp");e=n.getEl("sv");v=n.getEl("svp");n._repaint=function(){u=c.toHsv();f(u)};n._super();n._svdraghelper=new t(n._id+"-sv",{start:s,drag:s});n._hdraghelper=new t(n._id+"-h",{start:h,drag:h});n._repaint()},rgb:function(){return this.color().toRgb()},value:function(n){var t=this;return arguments.length?(t.color().parse(n),void(t._rendered&&t._repaint())):t.color().toHex()},color:function(){return this._color||(this._color=new r),this._color},renderHtml:function(){function f(){var t,u,e="",f,i;for(f="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",i=r.split(","),t=0,u=i.length-1;u>t;t++)e+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/u+"%;"+f+i[t]+",endColorstr="+i[t+1]+");-ms-"+f+i[t]+",endColorstr="+i[t+1]+')"><\/div>';return e}var i=this,t=i._id,n=i.classPrefix,u,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",e="background: -ms-linear-gradient(top,"+r+");background: linear-gradient(to bottom,"+r+");";return u='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="'+e+'">'+f()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"><\/div><\/div>','<div id="'+t+'" class="'+i.classes()+'"><div id="'+t+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+t+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"><\/div><\/div><\/div><\/div><\/div>'+u+"<\/div>"}})});i(lr,[e],function(n){return n.extend({init:function(n){var t=this;n.delimiter||(n.delimiter="»");t._super(n);t.addClass("path");t.canFocus=!0;t.on("click",function(n){var i,r=n.target;(i=r.getAttribute("data-index"))&&t.fire("select",{value:t.data()[i],index:i})})},focus:function(){var n=this;return n.getEl().firstChild.focus(),n},data:function(n){var t=this;return"undefined"!=typeof n?(t._data=n,t.update(),t):t._data},update:function(){this.innerHtml(this._getPathHtml())},postRender:function(){var n=this;n._super();n.data(n.settings.data)},renderHtml:function(){var n=this;return'<div id="'+n._id+'" class="'+n.classes()+'">'+n._getPathHtml()+"<\/div>"},_getPathHtml:function(){for(var t=this,f=t._data||[],i="",r=t.classPrefix,n=0,u=f.length;u>n;n++)i+=(n>0?'<div class="'+r+'divider" aria-hidden="true"> '+t.settings.delimiter+" <\/div>":"")+'<div role="button" class="'+r+"path-item"+(n==u-1?" "+r+"last":"")+'" data-index="'+n+'" tabindex="-1" id="'+t._id+"-"+n+'" aria-level="'+n+'">'+f[n].name+"<\/div>";return i||(i='<div class="'+r+'path-item"> <\/div>'),i}})});i(hu,[lr,et],function(n,t){return n.extend({postRender:function(){function r(n){return 1===n.nodeType&&("BR"==n.nodeName||n.getAttribute("data-mce-bogus")||"bookmark"===n.getAttribute("data-mce-type"))?!0:!1}var i=this,n=t.activeEditor;return n.settings.elementpath!==!1&&(i.on("select",function(t){n.focus();n.selection.select(this.data()[t.index].element);n.nodeChanged()}),n.on("nodeChange",function(t){for(var e,o=[],u=t.parents,f=u.length;f--;)if(1==u[f].nodeType&&!r(u[f])&&(e=n.fire("ResolveName",{name:u[f].nodeName.toLowerCase(),target:u[f]}),e.isDefaultPrevented()||o.push({name:e.name,element:u[f]}),e.isPropagationStopped()))break;i.data(o)})),i._super()}})});i(ar,[v],function(n){return n.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var n=this,t=n._layout,i=n.classPrefix;return n.addClass("formitem"),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes()+'" hidefocus="1" tabindex="-1">'+(n.settings.title?'<div id="'+n._id+'-title" class="'+i+'title">'+n.settings.title+"<\/div>":"")+'<div id="'+n._id+'-body" class="'+n.classes("body")+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"}})});i(vr,[v,ar,r],function(n,t,i){return n.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var n=this,r=n.items();n.settings.formItemDefaults||(n.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}});r.each(function(r){var u,f=r.settings.label;f&&(u=new t(i.extend({items:{type:"label",id:r._id+"-l",text:f,flex:0,forId:r._id,disabled:r.disabled()}},n.settings.formItemDefaults)),u.type="formitem",r.aria("labelledby",r._id+"-l"),"undefined"==typeof r.settings.flex&&(r.settings.flex=1),n.replace(r,u),u.add(r))})},recalcLabels:function(){var n=this,t=0,i=[],r,u,f;if(n.settings.labelGapCalc!==!1)for(f="children"==n.settings.labelGapCalc?n.find("formitem"):n.items(),f.filter("formitem").each(function(n){var r=n.items()[0],u=r.getEl().clientWidth;t=u>t?u:t;i.push(r)}),u=n.settings.labelGap||0,r=i.length;r--;)i[r].settings.minWidth=t+u},visible:function(n){var t=this._super(n);return n===!0&&this._rendered&&this.recalcLabels(),t},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var n=this;n._super();n.recalcLabels();n.fromJSON(n.settings.data)}})});i(cu,[vr],function(n){return n.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var n=this,t=n._layout,i=n.classPrefix;return n.preRender(),t.preRender(n),'<fieldset id="'+n._id+'" class="'+n.classes()+'" hidefocus="1" tabindex="-1">'+(n.settings.title?'<legend id="'+n._id+'-title" class="'+i+'fieldset-title">'+n.settings.title+"<\/legend>":"")+'<div id="'+n._id+'-body" class="'+n.classes("body")+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/fieldset>"}})});i(lu,[ti,r],function(n,t){return n.extend({init:function(n){var r=this,o=tinymce.activeEditor,f=o.settings,e,u,i;n.spellcheck=!1;i=f.file_picker_types||f.file_browser_callback_types;i&&(i=t.makeMap(i,/[, ]/));(!i||i[n.filetype])&&(u=f.file_picker_callback,!u||i&&!i[n.filetype]?(u=f.file_browser_callback,!u||i&&!i[n.filetype]||(e=function(){u(r.getEl("inp").id,r.value(),n.filetype,window)})):e=function(){var i=r.fire("beforecall").meta;i=t.extend({filetype:n.filetype},i);u.call(o,function(n,t){r.value(n).fire("change",{meta:t})},r.value(),i)});e&&(n.icon="browse",n.onaction=e);r._super(n)}})});i(au,[ot],function(n){return n.extend({recalc:function(n){var i=n.layoutRect(),t=n.paddingBox();n.items().filter(":visible").each(function(n){n.layoutRect({x:t.left,y:t.top,w:i.innerW-t.right-t.left,h:i.innerH-t.top-t.bottom});n.recalc&&n.recalc()})}})});i(vu,[ot],function(n){return n.extend({recalc:function(n){var f,v,s,r,u,y,ut,ft,et,w,e,b,o,i,gt,ot,at=[],h,vt,st,t,l,g,yt,a,pt,nt,c,p,ht,wt,k,tt,it,rt,d,ct,bt,kt,dt=Math.max,ni=Math.min,lt;for(s=n.items().filter(":visible"),r=n.layoutRect(),u=n._paddingBox,y=n.settings,b=n.isRtl()?y.direction||"row-reversed":y.direction,ut=y.align,ft=n.isRtl()?y.pack||"end":y.pack,et=y.spacing||0,("row-reversed"==b||"column-reverse"==b)&&(s=s.set(s.toArray().reverse()),b=b.split("-")[0]),"column"==b?(pt="y",yt="h",a="minH",nt="maxH",p="innerH",c="top",ht="deltaH",wt="contentH",d="left",it="w",k="x",tt="innerW",rt="minW",ct="right",bt="deltaW",kt="contentW"):(pt="x",yt="w",a="minW",nt="maxW",p="innerW",c="left",ht="deltaW",wt="contentW",d="top",it="h",k="y",tt="innerH",rt="minH",ct="bottom",bt="deltaH",kt="contentH"),e=r[p]-u[c]-u[c],g=w=0,f=0,v=s.length;v>f;f++)o=s[f],i=o.layoutRect(),gt=o.settings,ot=gt.flex,e-=v-1>f?et:0,ot>0&&(w+=ot,i[nt]&&at.push(o),i.flex=ot),e-=i[a],h=u[d]+i[rt]+u[ct],h>g&&(g=h);if(t={},t[a]=0>e?r[a]-e+r[ht]:r[p]-e+r[ht],t[rt]=g+r[bt],t[wt]=r[p]-e,t[kt]=g,t.minW=ni(t.minW,r.maxW),t.minH=ni(t.minH,r.maxH),t.minW=dt(t.minW,r.startMinWidth),t.minH=dt(t.minH,r.startMinHeight),r.autoResize&&(t.minW!=r.minW||t.minH!=r.minH))(t.w=t.minW,t.h=t.minH,n.layoutRect(t),this.recalc(n),null===n._lastRect)&&(lt=n.parent(),lt&&(lt._lastRect=null,lt.recalc()));else{for(st=e/w,f=0,v=at.length;v>f;f++)o=at[f],i=o.layoutRect(),vt=i[nt],h=i[a]+i.flex*st,h>vt?(e-=i[nt]-i[a],w-=i.flex,i.flex=0,i.maxFlexSize=vt):i.maxFlexSize=0;for(st=e/w,l=u[c],t={},0===w&&("end"==ft?l=e+u[c]:"center"==ft?(l=Math.round(r[p]/2-(r[p]-e)/2)+u[c],0>l&&(l=u[c])):"justify"==ft&&(l=u[c],et=Math.floor(e/(s.length-1)))),t[k]=u[d],f=0,v=s.length;v>f;f++)o=s[f],i=o.layoutRect(),h=i.maxFlexSize||i[a],"center"===ut?t[k]=Math.round(r[tt]/2-i[it]/2):"stretch"===ut?(t[it]=dt(i[rt]||0,r[tt]-u[d]-u[ct]),t[k]=u[d]):"end"===ut&&(t[k]=r[tt]-i[it]-u.top),i.flex>0&&(h+=i.flex*st),t[yt]=h,t[pt]=l,o.layoutRect(t),o.recalc&&o.recalc(),l+=h+et}}})});i(yr,[gt],function(n){return n.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(n){n.items().filter(":visible").each(function(n){n.recalc&&n.recalc()})}})});i(yu,[a,e,d,r,et,u],function(n,t,i,r,u,f){function o(n){function r(t,i){return function(){var r=this;n.on("nodeChange",function(u){var o=n.formatter,f=null;e(u.parents,function(n){return e(t,function(t){return i?o.matchNode(n,i,{value:t.value})&&(f=t.value):o.matchNode(n,t.value)&&(f=t.value),f?!1:void 0}),f?!1:void 0});r.value(f)})}}function o(n){n=n.replace(/;$/,"").split(";");for(var t=n.length;t--;)n[t]=n[t].split("=");return n}function s(){function i(n){var t=[];if(n)return e(n,function(n){var u={text:n.title,icon:n.icon},f;n.items?u.menu=i(n.items):(f=n.format||"custom"+o++,n.format||(n.name=f,r.push(n)),u.format=f,u.cmd=n.cmd);t.push(u)}),t}function f(){return i(n.settings.style_formats_merge?n.settings.style_formats?t.concat(n.settings.style_formats):t:n.settings.style_formats||t)}var o=0,r=[],t=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return n.on("init",function(){e(r,function(t){n.formatter.register(t.name,t)})}),{type:"menu",items:f(),onPostRender:function(t){n.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return n.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var i,r;i=t.settings.format;i&&(t.disabled(!n.formatter.canApply(i)),t.active(n.formatter.match(i)));r=t.settings.cmd;r&&t.active(n.queryCommandState(r))})},onclick:function(){this.settings.format&&u(this.settings.format);this.settings.cmd&&n.execCommand(this.settings.cmd)}}}}function t(t){return function(){function i(){return n.undoManager?n.undoManager[t]():!1}var r=this;t="redo"==t?"hasRedo":"hasUndo";r.disabled(!i());n.on("Undo Redo AddUndo TypingUndo ClearUndos",function(){r.disabled(!i())})}}function h(){var t=this;n.on("VisualAid",function(n){t.active(n.hasVisual)});t.active(n.hasVisual)}function u(t){t.control&&(t=t.control.value());t&&n.execCommand("mceToggleFormat",!1,t)}var f;f=s();e({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,i){n.addButton(i,{tooltip:t,onPostRender:function(){var t=this;n.formatter?n.formatter.formatChanged(i,function(n){t.active(n)}):n.on("init",function(){n.formatter.formatChanged(i,function(n){t.active(n)})})},onclick:function(){u(i)}})});e({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,i){n.addButton(i,{tooltip:t[0],cmd:t[1]})});e({blockquote:["Blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bullet list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},function(t,i){n.addButton(i,{tooltip:t[0],cmd:t[1],onPostRender:function(){var t=this;n.formatter?n.formatter.formatChanged(i,function(n){t.active(n)}):n.on("init",function(){n.formatter.formatChanged(i,function(n){t.active(n)})})}})});n.addButton("undo",{tooltip:"Undo",onPostRender:t("undo"),cmd:"undo"});n.addButton("redo",{tooltip:"Redo",onPostRender:t("redo"),cmd:"redo"});n.addMenuItem("newdocument",{text:"New document",icon:"newdocument",cmd:"mceNewDocument"});n.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:t("undo"),cmd:"undo"});n.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:t("redo"),cmd:"redo"});n.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:h,cmd:"mceToggleVisualAid"});e({cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"],bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,i){n.addMenuItem(i,{text:t[0],icon:i,shortcut:t[2],cmd:t[1]})});n.on("mousedown",function(){i.hideAll()});n.addButton("styleselect",{type:"menubutton",text:"Formats",menu:f});n.addButton("formatselect",function(){var t=[],i=o(n.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");return e(i,function(i){t.push({text:i[0],value:i[1],textStyle:function(){return n.formatter.getCssText(i[1])}})}),{type:"listbox",text:i[0][0],values:t,fixedWidth:!0,onselect:u,onPostRender:r(t)}});n.addButton("fontselect",function(){var t=[],i=o(n.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return e(i,function(n){t.push({text:{raw:n[0]},value:n[1],textStyle:-1==n[1].indexOf("dings")?"font-family:"+n[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:r(t,"fontname"),onselect:function(t){t.control.settings.value&&n.execCommand("FontName",!1,t.control.settings.value)}}});n.addButton("fontsizeselect",function(){var t=[],i=n.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return e(i.split(" "),function(n){var r=n,u=n,i=n.split("=");i.length>1&&(r=i[0],u=i[1]);t.push({text:r,value:u})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:r(t,"fontsize"),onclick:function(t){t.control.settings.value&&n.execCommand("FontSize",!1,t.control.settings.value)}}});n.addMenuItem("formats",{text:"Formats",menu:f})}var e=r.each;u.on("AddEditor",function(t){t.editor.rtl&&(n.rtl=!0);o(t.editor)});n.translate=function(n){return u.translate(n)};t.tooltips=!f.iOS});i(pu,[ot],function(n){return n.extend({recalc:function(n){var e=n.settings,p,o,b,u,k,d,i,f,h,t,r,g,nt,st,s,c,tt,it,l,a,rt,ut,v=[],y=[],ht,ct,lt,ft,vt,yt,pt,et,w,at,ot;for(e=n.settings,b=n.items().filter(":visible"),u=n.layoutRect(),o=e.columns||Math.ceil(Math.sqrt(b.length)),p=Math.ceil(b.length/o),tt=e.spacingH||e.spacing||0,it=e.spacingV||e.spacing||0,l=e.alignH||e.align,a=e.alignV||e.align,s=n._paddingBox,vt=("reverseRows"in e)?e.reverseRows:n.isRtl(),l&&"string"==typeof l&&(l=[l]),a&&"string"==typeof a&&(a=[a]),t=0;o>t;t++)v.push(0);for(r=0;p>r;r++)y.push(0);for(r=0;p>r;r++)for(t=0;o>t&&(h=b[r*o+t],h);t++)f=h.layoutRect(),ht=f.minW,ct=f.minH,v[t]=ht>v[t]?ht:v[t],y[r]=ct>y[r]?ct:y[r];for(lt=u.innerW-s.left-s.right,rt=0,t=0;o>t;t++)rt+=v[t]+(t>0?tt:0),lt-=(t>0?tt:0)+v[t];for(ft=u.innerH-s.top-s.bottom,ut=0,r=0;p>r;r++)ut+=y[r]+(r>0?it:0),ft-=(r>0?it:0)+y[r];if(rt+=s.left+s.right,ut+=s.top+s.bottom,i={},i.minW=rt+(u.w-u.innerW),i.minH=ut+(u.h-u.innerH),i.contentW=i.minW-u.deltaW,i.contentH=i.minH-u.deltaH,i.minW=Math.min(i.minW,u.maxW),i.minH=Math.min(i.minH,u.maxH),i.minW=Math.max(i.minW,u.startMinWidth),i.minH=Math.max(i.minH,u.startMinHeight),u.autoResize&&(i.minW!=u.minW||i.minH!=u.minH))(i.w=i.minW,i.h=i.minH,n.layoutRect(i),this.recalc(n),null===n._lastRect)&&(ot=n.parent(),ot&&(ot._lastRect=null,ot.recalc()));else{if(u.autoResize&&(i=n.layoutRect(i),i.contentW=i.minW-u.deltaW,i.contentH=i.minH-u.deltaH),pt="start"==e.packV?0:ft>0?Math.floor(ft/p):0,et=0,w=e.flexWidths,w)for(t=0;t<w.length;t++)et+=w[t];else et=o;for(at=lt/et,t=0;o>t;t++)v[t]+=w?w[t]*at:at;for(nt=s.top,r=0;p>r;r++){for(g=s.left,d=y[r]+pt,t=0;o>t&&(yt=vt?r*o+o-1-t:r*o+t,h=b[yt],h);t++)st=h.settings,f=h.layoutRect(),k=Math.max(v[t],f.startMinWidth),f.x=g,f.y=nt,c=st.alignH||(l?l[t]||l[0]:null),"center"==c?f.x=g+k/2-f.w/2:"right"==c?f.x=g+k-f.w:"stretch"==c&&(f.w=k),c=st.alignV||(a?a[t]||a[0]:null),"center"==c?f.y=nt+d/2-f.h/2:"bottom"==c?f.y=nt+d-f.h:"stretch"==c&&(f.h=d),h.layoutRect(f),g+=k+tt,h.recalc&&h.recalc();nt+=d+it}}}})});i(wu,[e],function(n){return n.extend({renderHtml:function(){var n=this;return n.addClass("iframe"),n.canFocus=!1,'<iframe id="'+n._id+'" class="'+n.classes()+'" tabindex="-1" src="'+(n.settings.url||"javascript:''")+'" frameborder="0"><\/iframe>'},src:function(n){this.getEl().src=n},html:function(n,t){var r=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=n,t&&t()):setTimeout(function(){r.html(n)},0),this}})});i(bu,[e,f],function(n,t){return n.extend({init:function(n){var t=this;t._super(n);t.addClass("widget");t.addClass("label");t.canFocus=!1;n.multiline&&t.addClass("autoscroll");n.strong&&t.addClass("strong")},initLayoutRect:function(){var i=this,n=i._super(),r;return i.settings.multiline&&(r=t.getSize(i.getEl()),r.width>n.maxW&&(n.minW=n.maxW,i.addClass("multiline")),i.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(i.getEl()).height)),n},repaint:function(){var n=this;return n.settings.multiline||(n.getEl().style.lineHeight=n.layoutRect().h+"px"),n._super()},text:function(n){var t=this;return t._rendered&&n&&this.innerHtml(t.encode(n)),t._super(n)},renderHtml:function(){var n=this,t=n.settings.forId;return'<label id="'+n._id+'" class="'+n.classes()+'"'+(t?' for="'+t+'"':"")+">"+n.encode(n._text)+"<\/label>"}})});i(pr,[v],function(n){return n.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(n){var t=this;t._super(n);t.addClass("toolbar")},postRender:function(){var n=this;return n.items().addClass("toolbar-item"),n._super()}})});i(wr,[pr],function(n){return n.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})});i(ii,[ni,b,wr],function(n,t,i){function u(n,t){for(;n;){if(t===n)return!0;n=n.parentNode}return!1}var r=n.extend({init:function(n){var t=this;t._renderOpen=!0;t._super(n);t.addClass("menubtn");n.fixedWidth&&t.addClass("fixed-width");t.aria("haspopup",!0);t.hasPopup=!0},showMenu:function(){var n=this,r=n.settings,i;return n.menu&&n.menu.visible()?n.hideMenu():(n.menu||(i=r.menu||[],i.length?i={type:"menu",items:i}:i.type=i.type||"menu",n.menu=t.create(i).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(t){t.control.parent()===n.menu&&(t.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(t){t.control==n.menu&&n.activeMenu("show"==t.type);n.aria("expanded","show"==t.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),void n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]))},hideMenu:function(){var n=this;n.menu&&(n.menu.items().each(function(n){n.hideMenu&&n.hideMenu()}),n.menu.hide())},activeMenu:function(n){this.toggleClass("active",n)},renderHtml:function(){var n=this,u=n._id,f=n.classPrefix,r=n.settings.icon,t;return t=n.settings.image,t?(r="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",r=n.settings.icon?f+"ico "+f+"i-"+r:"",n.aria("role",n.parent()instanceof i?"menuitem":"button"),'<div id="'+u+'" class="'+n.classes()+'" tabindex="-1" aria-labelledby="'+u+'"><button id="'+u+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+t+"><\/i>":"")+"<span>"+(n._text?(r?" ":"")+n.encode(n._text):"")+'<\/span> <i class="'+f+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this;return n.on("click",function(t){t.control===n&&u(t.target,n.getEl())&&(n.showMenu(),t.aria&&n.menu.items()[0].focus())}),n.on("mouseenter",function(t){var i=t.control,u=n.parent(),f;i&&u&&i instanceof r&&i.parent()==u&&(u.items().filter("MenuButton").each(function(n){n.hideMenu&&n!=i&&(n.menu&&n.menu.visible()&&(f=!0),n.hideMenu())}),f&&(i.focus(),i.showMenu()))}),n._super()},text:function(n){var t=this,i,r;if(t._rendered)for(r=t.getEl("open").getElementsByTagName("span"),i=0;i<r.length;i++)r[i].innerHTML=(t.settings.icon&&n?" ":"")+t.encode(n);return this._super(n)},remove:function(){this._super();this.menu&&this.menu.remove()}});return r});i(ku,[ii],function(n){return n.extend({init:function(n){function f(t){for(var u=0;u<t.length;u++){if(e=t[u].selected||n.value===t[u].value){r=r||t[u].text;i._value=t[u].value;break}t[u].menu&&f(t[u].menu)}}var i=this,t,e,r,u;i._values=t=n.values;t&&(f(t),!e&&t.length>0&&(r=t[0].text,i._value=t[0].value),n.menu=t);n.text=n.text||r||t[0].text;i._super(n);i.addClass("listbox");i.on("select",function(t){var r=t.control;u&&(t.lastControl=u);n.multiple?r.active(!r.active()):i.value(t.control.settings.value);u=r})},value:function(n){function u(n,i){n.items().each(function(n){t=n.value()===i;t&&(r=r||n.text());n.active(t);n.menu&&u(n.menu,i)})}function f(i){for(var u=0;u<i.length;u++)t=i[u].value==n,t&&(r=r||i[u].text),i[u].active=t,i[u].menu&&f(i[u].menu)}var i=this,t,r,e;return"undefined"!=typeof n&&(i.menu?u(i.menu,n):(e=i.settings.menu,f(e)),i.text(r||this.settings.text)),i._super(n)}})});i(br,[e,b,u],function(n,t,i){return n.extend({Defaults:{border:0,role:"menuitem"},init:function(n){var t=this;t.hasPopup=!0;t._super(n);n=t.settings;t.addClass("menu-item");n.menu&&t.addClass("menu-item-expand");n.preview&&t.addClass("menu-item-preview");("-"===t._text||"|"===t._text)&&(t.addClass("menu-item-sep"),t.aria("role","separator"),t._text="-");n.selectable&&(t.aria("role","menuitemcheckbox"),t.addClass("menu-item-checkbox"),n.icon="selected");n.preview||n.selectable||t.addClass("menu-item-normal");t.on("mousedown",function(n){n.preventDefault()});n.menu&&!n.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var i=this,f=i.settings,n,u=i.parent(),r;(u.items().each(function(n){n!==i&&n.hideMenu()}),f.menu)&&(n=i.menu,n?n.show():(n=f.menu,n.length?n={type:"menu",items:n}:n.type=n.type||"menu",u.settings.itemDefaults&&(n.itemDefaults=u.settings.itemDefaults),n=i.menu=t.create(n).parent(i).renderTo(),n.reflow(),n.on("cancel",function(t){t.stopPropagation();i.focus();n.hide()}),n.on("show hide",function(n){n.control.items().each(function(n){n.active(n.settings.selected)})}).fire("show"),n.on("hide",function(t){t.control===n&&i.removeClass("selected")}),n.submenu=!0),n._parentMenu=u,n.addClass("menu-sub"),r=n.testMoveRel(i.getEl(),i.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]),n.moveRel(i.getEl(),r),n.rel=r,r="menu-sub-"+r,n.removeClass(n._lastRel),n.addClass(r),n._lastRel=r,i.addClass("selected"),i.aria("expanded",!0))},hideMenu:function(){var n=this;return n.menu&&(n.menu.items().each(function(n){n.hideMenu&&n.hideMenu()}),n.menu.hide(),n.aria("expanded",!1)),n},renderHtml:function(){function h(n){var t,r,u={};for(u=i.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},n=n.split("+"),t=0;t<n.length;t++)r=u[n[t].toLowerCase()],r&&(n[t]=r);return n.join("+")}var n=this,e=n._id,u=n.settings,t=n.classPrefix,o=n.encode(n._text),f=n.settings.icon,s="",r=u.shortcut;return f&&n.parent().addClass("menu-has-icons"),u.image&&(f="none",s=" style=\"background-image: url('"+u.image+"')\""),r&&(r=h(r)),f=t+"ico "+t+"i-"+(n.settings.icon||"none"),'<div id="'+e+'" class="'+n.classes()+'" tabindex="-1">'+("-"!==o?'<i class="'+f+'"'+s+"><\/i> ":"")+("-"!==o?'<span id="'+e+'-text" class="'+t+'text">'+o+"<\/span>":"")+(r?'<div id="'+e+'-shortcut" class="'+t+'menu-shortcut">'+r+"<\/div>":"")+(u.menu?'<div class="'+t+'caret"><\/div>':"")+"<\/div>"},postRender:function(){var n=this,r=n.settings,t=r.textStyle,i;return("function"==typeof t&&(t=t.call(this)),t)&&(i=n.getEl("text"),i&&i.setAttribute("style",t)),n.on("mouseenter click",function(t){t.control===n&&(r.menu||"click"!==t.type?(n.showMenu(),t.aria&&n.menu.focus(!0)):(n.fire("select"),n.parent().hideAll()))}),n._super(),n},active:function(n){return"undefined"!=typeof n&&this.aria("checked",n),this._super(n)},remove:function(){this._super();this.menu&&this.menu.remove()}})});i(du,[d,br,r],function(n,t,i){return n.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(n){var u=this,t,r;if(n.autohide=!0,n.constrainToViewport=!0,n.itemDefaults)for(t=n.items,r=t.length;r--;)t[r]=i.extend({},n.itemDefaults,t[r]);u._super(n);u.addClass("menu")},repaint:function(){return this.toggleClass("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var n=this;n.hideAll();n.fire("select")},hideAll:function(){var n=this;return this.find("menuitem").exec("hideMenu"),n._super()},preRender:function(){var n=this;return n.items().each(function(t){var i=t.settings;if(i.icon||i.selectable)return(n._hasIcons=!0,!1)}),n._super()}})});i(gu,[sr],function(n){return n.extend({Defaults:{classes:"radio",role:"radio"}})});i(nf,[e,k],function(n,t){return n.extend({renderHtml:function(){var n=this,t=n.classPrefix;return n.addClass("resizehandle"),"both"==n.settings.direction&&n.addClass("resizehandle-both"),n.canFocus=!1,'<div id="'+n._id+'" class="'+n.classes()+'"><i class="'+t+"ico "+t+'i-resize"><\/i><\/div>'},postRender:function(){var n=this;n._super();n.resizeDragHelper=new t(this._id,{start:function(){n.fire("ResizeStart")},drag:function(t){"both"!=n.settings.direction&&(t.deltaX=0);n.fire("Resize",t)},stop:function(){n.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})});i(tf,[e],function(n){return n.extend({renderHtml:function(){var n=this;return n.addClass("spacer"),n.canFocus=!1,'<div id="'+n._id+'" class="'+n.classes()+'"><\/div>'}})});i(rf,[ii,f],function(n,t){return n.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var n=this,u=n.getEl(),i=n.layoutRect(),f,r;return n._super(),f=u.firstChild,r=u.lastChild,t.css(f,{width:i.w-t.getSize(r).width,height:i.h-2}),t.css(r,{height:i.h-2}),n},activeMenu:function(n){var i=this;t.toggleClass(i.getEl().lastChild,i.classPrefix+"active",n)},renderHtml:function(){var n=this,u=n._id,r=n.classPrefix,t,i=n.settings.icon;return t=n.settings.image,t?(i="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",i=n.settings.icon?r+"ico "+r+"i-"+i:"",'<div id="'+u+'" class="'+n.classes()+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"><\/i>":"")+(n._text?(i?" ":"")+n._text:"")+'<\/button><button type="button" class="'+r+'open" hidefocus="1" tabindex="-1">'+(n._menuBtnText?(i?" ":"")+n._menuBtnText:"")+' <i class="'+r+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this,t=n.settings.onclick;return n.on("click",function(n){var i=n.target;if(n.control==this)for(;i;){if(n.aria&&"down"!=n.aria.key||"BUTTON"==i.nodeName&&-1==i.className.indexOf("open"))return n.stopImmediatePropagation(),void t.call(this,n);i=i.parentNode}}),delete n.settings.onclick,n._super()}})});i(uf,[yr],function(n){return n.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})});i(ff,[ut,f],function(n,t){return n.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(n){var i;this.activeTabId&&(i=this.getEl(this.activeTabId),t.removeClass(i,this.classPrefix+"active"),i.setAttribute("aria-selected","false"));this.activeTabId="t"+n;i=this.getEl("t"+n);i.setAttribute("aria-selected","true");t.addClass(i,this.classPrefix+"active");this.items()[n].show().fire("showtab");this.reflow();this.items().each(function(t,i){n!=i&&t.hide()})},renderHtml:function(){var n=this,t=n._layout,i="",r=n.classPrefix;return n.preRender(),t.preRender(n),n.items().each(function(t,u){var f=n._id+"-t"+u;t.aria("role","tabpanel");t.aria("labelledby",f);i+='<div id="'+f+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+n.encode(t.settings.title)+"<\/div>"}),'<div id="'+n._id+'" class="'+n.classes()+'" hidefocus="1" tabindex="-1"><div id="'+n._id+'-head" class="'+r+'tabs" role="tablist">'+i+'<\/div><div id="'+n._id+'-body" class="'+n.classes("body")+'">'+t.renderHtml(n)+"<\/div><\/div>"},postRender:function(){var n=this;n._super();n.settings.activeTab=n.settings.activeTab||0;n.activateTab(n.settings.activeTab);this.on("click",function(t){var r=t.target.parentNode,i;if(t.target.parentNode.id==n._id+"-head")for(i=r.childNodes.length;i--;)r.childNodes[i]==t.target&&n.activateTab(i)})},initLayoutRect:function(){var i=this,r,n,u,f;return n=t.getSize(i.getEl("head")).width,n=0>n?0:n,u=0,i.items().each(function(t){n=Math.max(n,t.layoutRect().minW);u=Math.max(u,t.layoutRect().minH)}),i.items().each(function(t){t.settings.x=0;t.settings.y=0;t.settings.w=n;t.settings.h=u;t.layoutRect({x:0,y:0,w:n,h:u})}),f=t.getSize(i.getEl("head")).height,i.settings.minWidth=n,i.settings.minHeight=u+f,r=i._super(),r.deltaH+=f,r.innerH=r.h-r.deltaH,r}})});i(ef,[e,f],function(n,t){return n.extend({init:function(n){var t=this;t._super(n);t._value=n.value||"";t.addClass("textbox");n.multiline?t.addClass("multiline"):t.on("keydown",function(n){13==n.keyCode&&t.parents().reverse().each(function(t){return n.preventDefault(),t.hasEventListeners("submit")&&t.toJSON?(t.fire("submit",{data:t.toJSON()}),!1):void 0})})},disabled:function(n){var t=this;return t._rendered&&"undefined"!=typeof n&&(t.getEl().disabled=n),t._super(n)},value:function(n){var t=this;return"undefined"!=typeof n?(t._value=n,t._rendered&&(t.getEl().value=n),t):t._rendered?t.getEl().value:t._value},repaint:function(){var i=this,r,n,u,o=0,e=0,t,f;return r=i.getEl().style,n=i._layoutRect,t=i._lastRepaintRect||{},f=document,!i.settings.multiline&&f.all&&(!f.documentMode||f.documentMode<=8)&&(r.lineHeight=n.h-e+"px"),u=i._borderBox,o=u.left+u.right+8,e=u.top+u.bottom+(i.settings.multiline?8:0),n.x!==t.x&&(r.left=n.x+"px",t.x=n.x),n.y!==t.y&&(r.top=n.y+"px",t.y=n.y),n.w!==t.w&&(r.width=n.w-o+"px",t.w=n.w),n.h!==t.h&&(r.height=n.h-e+"px",t.h=n.h),i._lastRepaintRect=t,i.fire("repaint",{},!1),i},renderHtml:function(){var t=this,r=t._id,n=t.settings,u=t.encode(t._value,!1),i="";return"spellcheck"in n&&(i+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(i+=' maxlength="'+n.maxLength+'"'),n.size&&(i+=' size="'+n.size+'"'),n.subtype&&(i+=' type="'+n.subtype+'"'),t.disabled()&&(i+=' disabled="disabled"'),n.multiline?'<textarea id="'+r+'" class="'+t.classes()+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="1"'+i+">"+u+"<\/textarea>":'<input id="'+r+'" class="'+t.classes()+'" value="'+u+'" hidefocus="1"'+i+" />"},postRender:function(){var n=this;return t.on(n.getEl(),"change",function(t){n.fire("change",t)}),n._super()},remove:function(){t.off(this.getEl());this._super()}})});i(of,[f,a],function(n,t){return function(i,r){var u=this,f,e=t.classPrefix;u.show=function(t){return u.hide(),f=!0,window.setTimeout(function(){f&&i.appendChild(n.createFragment('<div class="'+e+"throbber"+(r?" "+e+"throbber-inline":"")+'"><\/div>'))},t||0),u};u.hide=function(){var n=i.lastChild;return n&&-1!=n.className.indexOf("throbber")&&n.parentNode.removeChild(n),f=!1,u}}});cf([y,ht,u,r,g,ri,s,ui,c,o,nt,ct,h,p,l,lt,at,fi,tt,ei,oi,it,si,rt,hi,vt,ci,li,ai,vi,yi,yt,w,pt,wt,bt,f,a,b,pi,v,k,wi,ut,kt,bi,d,dt,ki,di,gi,ft,nr,tr,ir,rr,ur,et,nu,fr,er,tu,iu,ru,uu,gt,ot,or,e,ni,fu,sr,ti,eu,hr,ou,cr,su,lr,hu,ar,vr,cu,lu,au,vu,yr,yu,pu,wu,bu,pr,wr,ii,ku,br,du,gu,nf,tf,rf,uf,ff,ef,of])}(this);tinymce.PluginManager.add("advlist",function(n){function i(n,t){var i=[];return tinymce.each(t.split(/[ ,]/),function(n){i.push({text:n.replace(/\-/g," ").replace(/\b\w/g,function(n){return n.toUpperCase()}),data:"default"==n?"":n})}),i}function t(t,i){n.undoManager.transact(function(){var r,u=n.dom,f=n.selection;r=u.getParent(f.getNode(),"ol,ul");r&&r.nodeName==t&&i!==!1||n.execCommand("UL"==t?"InsertUnorderedList":"InsertOrderedList");i=i===!1?e[t]:i;e[t]=i;r=u.getParent(f.getNode(),"ol,ul");r&&(u.setStyle(r,"listStyleType",i?i:null),r.removeAttribute("data-mce-style"));n.focus()})}function r(t){var i=n.dom.getStyle(n.dom.getParent(n.selection.getNode(),"ol,ul"),"listStyleType")||"";t.control.items().each(function(n){n.active(n.settings.data===i)})}var u,f,e={};u=i("OL",n.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman"));f=i("UL",n.getParam("advlist_bullet_styles","default,circle,disc,square"));n.addButton("numlist",{type:"splitbutton",tooltip:"Numbered list",menu:u,onshow:r,onselect:function(n){t("OL",n.control.settings.data)},onclick:function(){t("OL",!1)}});n.addButton("bullist",{type:"splitbutton",tooltip:"Bullet list",menu:f,onshow:r,onselect:function(n){t("UL",n.control.settings.data)},onclick:function(){t("UL",!1)}})});tinymce.PluginManager.add("anchor",function(n){function t(){var t=n.selection.getNode(),i="";"A"==t.tagName&&(i=t.name||t.id||"");n.windowManager.open({title:"Anchor",body:{type:"textbox",name:"name",size:40,label:"Name",value:i},onsubmit:function(t){n.execCommand("mceInsertContent",!1,n.dom.createHTML("a",{id:t.data.name}))}})}n.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:t,stateSelector:"a:not([href])"});n.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:t})});tinymce.PluginManager.add("autolink",function(n){function r(n){t(n,-1,"(",!0)}function u(n){t(n,0,"",!0)}function f(n){t(n,-1,"",!1)}function t(n,t,i){function y(n,t){if(0>t&&(t=0),3==n.nodeType){var i=n.data.length;t>i&&(t=i)}return t}function h(n,t){1!=n.nodeType||n.hasChildNodes()?r.setStart(n,y(n,t)):r.setStartBefore(n)}function o(n,t){1!=n.nodeType||n.hasChildNodes()?r.setEnd(n,y(n,t)):r.setEndAfter(n)}var r,f,c,u,p,l,e,s,v,a;if(r=n.selection.getRng(!0).cloneRange(),r.startOffset<5){if(s=r.endContainer.previousSibling,!s){if(!r.endContainer.firstChild||!r.endContainer.firstChild.nextSibling)return;s=r.endContainer.firstChild.nextSibling}if(v=s.length,h(s,v),o(s,v),r.endOffset<5)return;f=r.endOffset;u=s}else{if(u=r.endContainer,3!=u.nodeType&&u.firstChild){for(;3!=u.nodeType&&u.firstChild;)u=u.firstChild;3==u.nodeType&&(h(u,0),o(u,u.nodeValue.length))}f=1==r.endOffset?2:r.endOffset-1-t}c=f;do h(u,f>=2?f-2:0),o(u,f>=1?f-1:0),f-=1,a=r.toString();while(" "!=a&&""!==a&&160!=a.charCodeAt(0)&&f-2>=0&&a!=i);r.toString()==i||160==r.toString().charCodeAt(0)?(h(u,f),o(u,c),f+=1):0===r.startOffset?(h(u,0),o(u,c)):(h(u,f),o(u,c));l=r.toString();"."==l.charAt(l.length-1)&&o(u,c-1);l=r.toString();e=l.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i);e&&("www."==e[1]?e[1]="http://www.":/@$/.test(e[1])&&!/^mailto:/.test(e[1])&&(e[1]="mailto:"+e[1]),p=n.selection.getBookmark(),n.selection.setRng(r),n.execCommand("createlink",!1,e[1]+e[2]),n.selection.moveToBookmark(p),n.nodeChanged())}var i;return n.on("keydown",function(t){if(13==t.keyCode)return f(n)}),tinymce.Env.ie?void n.on("focus",function(){if(!i){i=!0;try{n.execCommand("AutoUrlDetect",!1,!0)}catch(t){}}}):(n.on("keypress",function(t){if(41==t.keyCode)return r(n)}),void n.on("keyup",function(t){if(32==t.keyCode)return u(n)}))});tinymce.PluginManager.add("autoresize",function(n){function f(){return n.plugins.fullscreen&&n.plugins.fullscreen.isFullscreen()}function i(r){var l,c,e,h,o,s,a,v,y,p,w,b,k=tinymce.DOM;if(c=n.getDoc()){if(e=c.body,h=c.documentElement,o=t.autoresize_min_height,!e||r&&"setcontent"===r.type&&r.initial||f())return void(e&&h&&(e.style.overflowY="auto",h.style.overflowY="auto"));a=n.dom.getStyle(e,"margin-top",!0);v=n.dom.getStyle(e,"margin-bottom",!0);y=n.dom.getStyle(e,"padding-top",!0);p=n.dom.getStyle(e,"padding-bottom",!0);w=n.dom.getStyle(e,"border-top-width",!0);b=n.dom.getStyle(e,"border-bottom-width",!0);s=e.offsetHeight+parseInt(a,10)+parseInt(v,10)+parseInt(y,10)+parseInt(p,10)+parseInt(w,10)+parseInt(b,10);(isNaN(s)||0>=s)&&(s=tinymce.Env.ie?e.scrollHeight:tinymce.Env.webkit&&0===e.clientHeight?0:e.offsetHeight);s>t.autoresize_min_height&&(o=s);t.autoresize_max_height&&s>t.autoresize_max_height?(o=t.autoresize_max_height,e.style.overflowY="auto",h.style.overflowY="auto"):(e.style.overflowY="hidden",h.style.overflowY="hidden",e.scrollTop=0);o!==u&&(l=o-u,k.setStyle(n.iframeElement,"height",o+"px"),u=o,tinymce.isWebKit&&0>l&&i(r))}}function r(n,t,u){setTimeout(function(){i({});n--?r(n,t,u):u&&u()},t)}var t=n.settings,u=0;n.settings.inline||(t.autoresize_min_height=parseInt(n.getParam("autoresize_min_height",n.getElement().offsetHeight),10),t.autoresize_max_height=parseInt(n.getParam("autoresize_max_height",0),10),n.on("init",function(){var t,i;t=n.getParam("autoresize_overflow_padding",1);i=n.getParam("autoresize_bottom_margin",50);t!==!1&&n.dom.setStyles(n.getBody(),{paddingLeft:t,paddingRight:t});i!==!1&&n.dom.setStyles(n.getBody(),{paddingBottom:i})}),n.on("nodechange setcontent keyup FullscreenStateChanged",i),n.getParam("autoresize_on_init",!0)&&n.on("init",function(){r(20,100,function(){r(5,1e3)})}),n.addCommand("mceAutoResize",i))});tinymce._beforeUnloadHandler=function(){var n;return tinymce.each(tinymce.editors,function(t){t.plugins.autosave&&t.plugins.autosave.storeDraft();!n&&t.isDirty()&&t.getParam("autosave_ask_before_unload",!0)&&(n=t.translate("You have unsaved changes are you sure you want to navigate away?"))}),n};tinymce.PluginManager.add("autosave",function(n){function s(n,t){return n=/^(\d+)([ms]?)$/.exec(""+(n||t)),(n[2]?{s:1e3,m:6e4}[n[2]]:1)*parseInt(n,10)}function u(){var n=parseInt(r.getItem(t+"time"),10)||0;return(new Date).getTime()-n>i.autosave_retention?(f(!1),!1):!0}function f(i){r.removeItem(t+"draft");r.removeItem(t+"time");i!==!1&&n.fire("RemoveDraft")}function h(){!o()&&n.isDirty()&&(r.setItem(t+"draft",n.getContent({format:"raw",no_events:!0})),r.setItem(t+"time",(new Date).getTime()),n.fire("StoreDraft"))}function e(){u()&&(n.setContent(r.getItem(t+"draft"),{format:"raw"}),n.fire("RestoreDraft"))}function v(){a||(setInterval(function(){n.removed||h()},i.autosave_interval),a=!0)}function c(){var t=this;t.disabled(!u());n.on("StoreDraft RestoreDraft RemoveDraft",function(){t.disabled(!u())});v()}function l(){n.undoManager.beforeChange();e();f();n.undoManager.add()}function o(t){var i=n.settings.forced_root_block;return t=tinymce.trim("undefined"==typeof t?n.getBody().innerHTML:t),""===t||new RegExp("^<"+i+"[^>]*>(( |&nbsp;|[ \t]|<br[^>]*>)+?|)<\/"+i+">|<br>$","i").test(t)}var t,a,i=n.settings,r=tinymce.util.LocalStorage;t=i.autosave_prefix||"tinymce-autosave-{path}{query}-{id}-";t=t.replace(/\{path\}/g,document.location.pathname);t=t.replace(/\{query\}/g,document.location.search);t=t.replace(/\{id\}/g,n.id);i.autosave_interval=s(i.autosave_interval,"30s");i.autosave_retention=s(i.autosave_retention,"20m");n.addButton("restoredraft",{title:"Restore last draft",onclick:l,onPostRender:c});n.addMenuItem("restoredraft",{text:"Restore last draft",onclick:l,onPostRender:c,context:"file"});n.settings.autosave_restore_when_empty!==!1&&(n.on("init",function(){u()&&o()&&e()}),n.on("saveContent",function(){f()}));window.onbeforeunload=tinymce._beforeUnloadHandler;this.hasDraft=u;this.storeDraft=h;this.restoreDraft=e;this.removeDraft=f;this.isEmpty=o});!function(){tinymce.create("tinymce.plugins.BBCodePlugin",{init:function(n){var t=this,i=n.getParam("bbcode_dialect","punbb").toLowerCase();n.on("beforeSetContent",function(n){n.content=t["_"+i+"_bbcode2html"](n.content)});n.on("postProcess",function(n){n.set&&(n.content=t["_"+i+"_bbcode2html"](n.content));n.get&&(n.content=t["_"+i+"_html2bbcode"](n.content))})},getInfo:function(){return{longname:"BBCode Plugin",author:"Moxiecode Systems AB",authorurl:"http://www.tinymce.com",infourl:"http://www.tinymce.com/wiki.php/Plugin:bbcode"}},_punbb_html2bbcode:function(n){function t(t,i){n=n.replace(t,i)}return n=tinymce.trim(n),t(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),t(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),t(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),t(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),t(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),t(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),t(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),t(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),t(/<font>(.*?)<\/font>/gi,"$1"),t(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),t(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),t(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),t(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),t(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),t(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),t(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),t(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),t(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),t(/<\/(strong|b)>/gi,"[/b]"),t(/<(strong|b)>/gi,"[b]"),t(/<\/(em|i)>/gi,"[/i]"),t(/<(em|i)>/gi,"[i]"),t(/<\/u>/gi,"[/u]"),t(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),t(/<u>/gi,"[u]"),t(/<blockquote[^>]*>/gi,"[quote]"),t(/<\/blockquote>/gi,"[/quote]"),t(/<br \/>/gi,"\n"),t(/<br\/>/gi,"\n"),t(/<br>/gi,"\n"),t(/<p>/gi,""),t(/<\/p>/gi,"\n"),t(/&nbsp;|\u00a0/gi," "),t(/&quot;/gi,'"'),t(/&lt;/gi,"<"),t(/&gt;/gi,">"),t(/&amp;/gi,"&"),n},_punbb_bbcode2html:function(n){function t(t,i){n=n.replace(t,i)}return n=tinymce.trim(n),t(/\n/gi,"<br />"),t(/\[b\]/gi,"<strong>"),t(/\[\/b\]/gi,"<\/strong>"),t(/\[i\]/gi,"<em>"),t(/\[\/i\]/gi,"<\/em>"),t(/\[u\]/gi,"<u>"),t(/\[\/u\]/gi,"<\/u>"),t(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2<\/a>'),t(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1<\/a>'),t(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),t(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2<\/font>'),t(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1<\/span>&nbsp;'),t(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1<\/span>&nbsp;'),n}});tinymce.PluginManager.add("bbcode",tinymce.plugins.BBCodePlugin)}();tinymce.PluginManager.add("charmap",function(n){function i(){function h(n){for(;n;){if("TD"==n.nodeName)return n;n=n.parentNode}}var i,f,e,r,o,c,s,u,l;for(i='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',o=25,c=Math.ceil(t.length/o),e=0;c>e;e++){for(i+="<tr>",f=0;o>f;f++)s=e*o+f,s<t.length?(u=t[s],i+='<td title="'+u[1]+'"><div tabindex="-1" title="'+u[1]+'" role="button">'+(u?String.fromCharCode(parseInt(u[0],10)):"&nbsp;")+"<\/div><\/td>"):i+="<td />";i+="<\/tr>"}i+="<\/tbody><\/table>";l={type:"container",html:i,onclick:function(t){var i=t.target;/^(TD|DIV)$/.test(i.nodeName)&&h(i).firstChild&&(n.execCommand("mceInsertContent",!1,tinymce.trim(i.innerText||i.textContent)),t.ctrlKey||r.close())},onmouseover:function(n){var t=h(n.target);t&&t.firstChild?(r.find("#preview").text(t.firstChild.firstChild.data),r.find("#previewTitle").text(t.title)):(r.find("#preview").text(" "),r.find("#previewTitle").text(" "))}};r=n.windowManager.open({title:"Special character",spacing:10,padding:10,items:[l,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"label",name:"previewTitle",text:" ",style:"text-align: center",border:1,minWidth:140,minHeight:80}]}],buttons:[{text:"Close",onclick:function(){r.close()}}]})}var t=[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["221","Y - acute"],["376","Y - diaeresis"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]];n.addButton("charmap",{icon:"charmap",tooltip:"Special character",onclick:i});n.addMenuItem("charmap",{icon:"charmap",text:"Special character",onclick:i,context:"insert"})});tinymce.PluginManager.add("code",function(n){function t(){var t=n.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:n.getParam("code_dialog_width",600),minHeight:n.getParam("code_dialog_height",Math.min(tinymce.DOM.getViewPort().h-200,500)),spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(t){n.focus();n.undoManager.transact(function(){n.setContent(t.data.code)});n.selection.setCursorLocation();n.nodeChanged()}});t.find("#code").value(n.getContent({source_view:!0}))}n.addCommand("mceCodeEditor",t);n.addButton("code",{icon:"code",tooltip:"Source code",onclick:t});n.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:t})});tinymce.PluginManager.add("colorpicker",function(n){function t(t,i){function u(n){var t=new tinymce.util.Color(n),i=t.toRgb();r.fromJSON({r:i.r,g:i.g,b:i.b,hex:t.toHex().substr(1)});f(t.toHex())}function f(n){r.find("#preview")[0].getEl().style.background=n}var r=n.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:i,onchange:function(){var n=this.rgb();r&&(r.find("#r").value(n.r),r.find("#g").value(n.g),r.find("#b").value(n.b),r.find("#hex").value(this.value().substr(1)),f(this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var t,n,i=r.find("colorpicker")[0];return t=this.name(),n=this.value(),"hex"==t?(n="#"+n,u(n),void i.value(n)):(n={r:r.find("#r").value(),g:r.find("#g").value(),b:r.find("#b").value()},i.value(n),void u(n))}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+this.toJSON().hex)}});u(i)}n.settings.color_picker_callback||(n.settings.color_picker_callback=t)});tinymce.PluginManager.add("contextmenu",function(n){var t,i=n.settings.contextmenu_never_use_native;n.on("contextmenu",function(r){var o,s=n.getDoc(),u,f,e;if(!r.ctrlKey||i){if(r.preventDefault(),tinymce.Env.mac&&tinymce.Env.webkit&&2==r.button&&s.caretRangeFromPoint&&n.selection.setRng(s.caretRangeFromPoint(r.x,r.y)),o=n.settings.contextmenu||"link image inserttable | cell row column deletetable",t)t.show();else{for(u=[],tinymce.each(o.split(/[ ,]/),function(t){var i=n.menuItems[t];"|"==t&&(i={text:t});i&&(i.shortcut="",u.push(i))}),f=0;f<u.length;f++)"|"==u[f].text&&(0===f||f==u.length-1)&&u.splice(f,1);t=new tinymce.ui.Menu({items:u,context:"contextmenu"}).addClass("contextmenu").renderTo();n.on("remove",function(){t.remove();t=null})}e={x:r.pageX,y:r.pageY};n.inline||(e=tinymce.DOM.getPos(n.getContentAreaContainer()),e.x+=r.clientX,e.y+=r.clientY);t.moveTo(e.x,e.y)}})});tinymce.PluginManager.add("directionality",function(n){function t(t){var u,i=n.dom,r=n.selection.getSelectedBlocks();r.length&&(u=i.getAttrib(r[0],"dir"),tinymce.each(r,function(n){i.getParent(n.parentNode,"*[dir='"+t+"']",i.getRoot())||(u!=t?i.setAttrib(n,"dir",t):i.setAttrib(n,"dir",null))}),n.nodeChanged())}function i(n){var t=[];return tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(i){t.push(i+"[dir="+n+"]")}),t.join(",")}n.addCommand("mceDirectionLTR",function(){t("ltr")});n.addCommand("mceDirectionRTL",function(){t("rtl")});n.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:i("ltr")});n.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:i("rtl")})});tinymce.PluginManager.add("emoticons",function(n,t){function i(){var n;return n='<table role="list" class="mce-grid">',tinymce.each(r,function(i){n+="<tr>";tinymce.each(i,function(i){var r=t+"/img/smiley-"+i+".gif";n+='<td><a href="#" data-mce-url="'+r+'" data-mce-alt="'+i+'" tabindex="-1" role="option" aria-label="'+i+'"><img src="'+r+'" style="width: 18px; height: 18px" role="presentation" /><\/a><\/td>'});n+="<\/tr>"}),n+="<\/table>"}var r=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]];n.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:i,onclick:function(t){var i=n.dom.getParent(t.target,"a");i&&(n.insertContent('<img src="'+i.getAttribute("data-mce-url")+'" alt="'+i.getAttribute("data-mce-alt")+'" />'),this.hide())}},tooltip:"Emoticons"})});tinymce.PluginManager.add("fullpage",function(n){function e(){var t=o();n.windowManager.open({title:"Document properties",data:t,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(n){s(tinymce.extend(t,n.data))}})}function o(){function r(n,t){var i=n.attr(t);return i||""}var t,o,e=f(),i={};return i.fontface=n.getParam("fullpage_default_fontface",""),i.fontsize=n.getParam("fullpage_default_fontsize",""),t=e.firstChild,7==t.type&&(i.xml_pi=!0,o=/encoding="([^"]+)"/.exec(t.value),o&&(i.docencoding=o[1])),t=e.getAll("#doctype")[0],t&&(i.doctype="<!DOCTYPE"+t.value+">"),t=e.getAll("title")[0],t&&t.firstChild&&(i.title=t.firstChild.value),u(e.getAll("meta"),function(n){var t,r=n.attr("name"),u=n.attr("http-equiv");r?i[r.toLowerCase()]=n.attr("content"):"Content-Type"==u&&(t=/charset\s*=\s*(.*)\s*/gi.exec(n.attr("content")),t&&(i.docencoding=t[1]))}),t=e.getAll("html")[0],t&&(i.langcode=r(t,"lang")||r(t,"xml:lang")),i.stylesheets=[],tinymce.each(e.getAll("link"),function(n){"stylesheet"==n.attr("rel")&&i.stylesheets.push(n.attr("href"))}),t=e.getAll("body")[0],t&&(i.langdir=r(t,"dir"),i.style=r(t,"style"),i.visited_color=r(t,"vlink"),i.link_color=r(t,"link"),i.active_color=r(t,"alink")),i}function s(r){function h(n,t,i){n.attr(t,i?i:void 0)}function c(n){s.firstChild?s.insert(n,s.firstChild):s.append(n)}var o,s,a,e,v,y=n.dom,l;o=f();s=o.getAll("head")[0];s||(e=o.getAll("html")[0],s=new t("head",1),e.firstChild?e.insert(s,e.firstChild,!0):e.append(s));e=o.firstChild;r.xml_pi?(v='version="1.0"',r.docencoding&&(v+=' encoding="'+r.docencoding+'"'),7!=e.type&&(e=new t("xml",7),o.insert(e,o.firstChild,!0)),e.value=v):e&&7==e.type&&e.remove();e=o.getAll("#doctype")[0];r.doctype?(e||(e=new t("#doctype",10),r.xml_pi?o.insert(e,o.firstChild):c(e)),e.value=r.doctype.substring(9,r.doctype.length-1)):e&&e.remove();e=null;u(o.getAll("meta"),function(n){"Content-Type"==n.attr("http-equiv")&&(e=n)});r.docencoding?(e||(e=new t("meta",1),e.attr("http-equiv","Content-Type"),e.shortEnded=!0,c(e)),e.attr("content","text/html; charset="+r.docencoding)):e&&e.remove();e=o.getAll("title")[0];r.title?(e?e.empty():(e=new t("title",1),c(e)),e.append(new t("#text",3)).value=r.title):e&&e.remove();u("keywords,description,author,copyright,robots".split(","),function(n){for(var u,s=o.getAll("meta"),f=r[n],i=0;i<s.length;i++)if(u=s[i],u.attr("name")==n)return void(f?u.attr("content",f):u.remove());f&&(e=new t("meta",1),e.attr("name",n),e.attr("content",f),e.shortEnded=!0,c(e))});l={};tinymce.each(o.getAll("link"),function(n){"stylesheet"==n.attr("rel")&&(l[n.attr("href")]=n)});tinymce.each(r.stylesheets,function(n){l[n]||(e=new t("link",1),e.attr({rel:"stylesheet",text:"text/css",href:n}),e.shortEnded=!0,c(e));delete l[n]});tinymce.each(l,function(n){n.remove()});e=o.getAll("body")[0];e&&(h(e,"dir",r.langdir),h(e,"style",r.style),h(e,"vlink",r.visited_color),h(e,"link",r.link_color),h(e,"alink",r.active_color),y.setAttribs(n.getBody(),{style:r.style,dir:r.dir,vLink:r.visited_color,link:r.link_color,aLink:r.active_color}));e=o.getAll("html")[0];e&&(h(e,"lang",r.langcode),h(e,"xml:lang",r.langcode));s.firstChild||s.remove();a=new tinymce.html.Serializer({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(o);i=a.substring(0,a.indexOf("<\/body>"))}function f(){return new tinymce.html.DomParser({validate:!1,root_name:"#document"}).parse(i)}function h(t){function w(n){return n.replace(/<\/?[A-Z]+/g,function(n){return n.toLowerCase()})}var s,h,v,o,e=t.content,y="",l=n.dom,p,a;t.selection||"raw"==t.format&&i||t.source_view&&n.getParam("fullpage_hide_in_source_view")||(0!==e.length||t.source_view||(e=tinymce.trim(i)+"\n"+tinymce.trim(e)+"\n"+tinymce.trim(r)),e=e.replace(/<(\/?)BODY/gi,"<$1body"),s=e.indexOf("<body"),-1!=s?(s=e.indexOf(">",s),i=w(e.substring(0,s+1)),h=e.indexOf("<\/body",s),-1==h&&(h=e.length),t.content=e.substring(s+1,h),r=w(e.substring(h))):(i=c(),r="\n<\/body>\n<\/html>"),v=f(),u(v.getAll("style"),function(n){n.firstChild&&(y+=n.firstChild.value)}),o=v.getAll("body")[0],o&&l.setAttribs(n.getBody(),{style:o.attr("style")||"",dir:o.attr("dir")||"",vLink:o.attr("vlink")||"",link:o.attr("link")||"",aLink:o.attr("alink")||""}),l.remove("fullpage_styles"),p=n.getDoc().getElementsByTagName("head")[0],y&&(l.add(p,"style",{id:"fullpage_styles"},y),o=l.get("fullpage_styles"),o.styleSheet&&(o.styleSheet.cssText=y)),a={},tinymce.each(p.getElementsByTagName("link"),function(n){"stylesheet"==n.rel&&n.getAttribute("data-mce-fullpage")&&(a[n.href]=n)}),tinymce.each(v.getAll("link"),function(n){var t=n.attr("href");a[t]||"stylesheet"!=n.attr("rel")||l.add(p,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"});delete a[t]}),tinymce.each(a,function(n){n.parentNode.removeChild(n)}))}function c(){var t,i="",r="";return n.getParam("fullpage_default_xml_pi")&&(i+='<?xml version="1.0" encoding="'+n.getParam("fullpage_default_encoding","ISO-8859-1")+'" ?>\n'),i+=n.getParam("fullpage_default_doctype","<!DOCTYPE html>"),i+="\n<html>\n<head>\n",(t=n.getParam("fullpage_default_title"))&&(i+="<title>"+t+"<\/title>\n"),(t=n.getParam("fullpage_default_encoding"))&&(i+='<meta http-equiv="Content-Type" content="text/html; charset='+t+'" />\n'),(t=n.getParam("fullpage_default_font_family"))&&(r+="font-family: "+t+";"),(t=n.getParam("fullpage_default_font_size"))&&(r+="font-size: "+t+";"),(t=n.getParam("fullpage_default_text_color"))&&(r+="color: "+t+";"),i+("<\/head>\n<body"+(r?' style="'+r+'"':"")+">\n")}function l(t){t.selection||t.source_view&&n.getParam("fullpage_hide_in_source_view")||(t.content=tinymce.trim(i)+"\n"+tinymce.trim(t.content)+"\n"+tinymce.trim(r))}var i,r,u=tinymce.each,t=tinymce.html.Node;n.addCommand("mceFullPageProperties",e);n.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"});n.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"});n.on("BeforeSetContent",h);n.on("GetContent",l)});tinymce.PluginManager.add("fullscreen",function(n){function h(){var t,i,n=window,u=document,r=u.body;return r.offsetWidth&&(t=r.offsetWidth,i=r.offsetHeight),n.innerWidth&&n.innerHeight&&(t=n.innerWidth,i=n.innerHeight),{w:t,h:i}}function r(){function v(){t.setStyle(a,"height",h().h-(l.clientHeight-a.clientHeight))}var r,l,a,c,y=document.body,p=document.documentElement;i=!i;l=n.getContainer();r=l.style;a=n.getContentAreaContainer().firstChild;c=a.style;i?(o=c.width,s=c.height,c.width=c.height="100%",f=r.width,e=r.height,r.width=r.height="",t.addClass(y,"mce-fullscreen"),t.addClass(p,"mce-fullscreen"),t.addClass(l,"mce-fullscreen"),t.bind(window,"resize",v),v(),u=v):(c.width=o,c.height=s,f&&(r.width=f),e&&(r.height=e),t.removeClass(y,"mce-fullscreen"),t.removeClass(p,"mce-fullscreen"),t.removeClass(l,"mce-fullscreen"),t.unbind(window,"resize",u));n.fire("FullscreenStateChanged",{state:i})}var o,s,u,f,e,i=!1,t=tinymce.DOM;if(!n.settings.inline)return(n.on("init",function(){n.addShortcut("Meta+Alt+F","",r)}),n.on("remove",function(){u&&t.unbind(window,"resize",u)}),n.addCommand("mceFullScreen",r),n.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Meta+Alt+F",selectable:!0,onClick:r,onPostRender:function(){var t=this;n.on("FullscreenStateChanged",function(n){t.active(n.state)})},context:"view"}),n.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Meta+Alt+F",onClick:r,onPostRender:function(){var t=this;n.on("FullscreenStateChanged",function(n){t.active(n.state)})}}),{isFullscreen:function(){return i}})});tinymce.PluginManager.add("hr",function(n){n.addCommand("InsertHorizontalRule",function(){n.execCommand("mceInsertContent",!1,"<hr />")});n.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"});n.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})});tinymce.PluginManager.add("image",function(n){function u(n,t){function u(n,r){i.parentNode&&i.parentNode.removeChild(i);t({width:n,height:r})}var i=document.createElement("img"),r;i.onload=function(){u(i.clientWidth,i.clientHeight)};i.onerror=function(){u()};r=i.style;r.visibility="hidden";r.position="fixed";r.bottom=r.left=0;r.width=r.height="auto";document.body.appendChild(i);i.src=n}function r(n,t,i){function r(n,i){return i=i||[],tinymce.each(n,function(n){var u={text:n.text||n.title};n.menu?u.menu=r(n.menu):(u.value=n.value,t(u));i.push(u)}),i}return r(n,i||[])}function t(t){return function(){var i=n.settings.image_list;"string"==typeof i?tinymce.util.XHR.send({url:i,success:function(n){t(tinymce.util.JSON.parse(n))}}):"function"==typeof i?i(t):t(i)}}function i(t){function v(){var i,r,n,t;i=e.find("#width")[0];r=e.find("#height")[0];i&&r&&(n=i.value(),t=r.value(),e.find("#constrain")[0].checked()&&s&&h&&n&&t&&(s!=n?(t=Math.round(n/s*t),isNaN(t)||r.value(t)):(n=Math.round(t/h*n),isNaN(n)||i.value(n))),s=n,h=t)}function p(){function t(t){function r(){t.onload=t.onerror=null;n.selection&&(n.selection.select(t),n.nodeChanged())}t.onload=function(){i.width||i.height||!y||o.setAttribs(t,{width:t.clientWidth,height:t.clientHeight});r()};t.onerror=r}b();v();i=tinymce.extend(i,e.toJSON());i.alt||(i.alt="");i.title||(i.title="");""===i.width&&(i.width=null);""===i.height&&(i.height=null);i.style||(i.style=null);i={src:i.src,alt:i.alt,title:i.title,width:i.width,height:i.height,style:i.style,"class":i["class"]};n.undoManager.transact(function(){return i.src?(""===i.title&&(i.title=null),f?o.setAttribs(f,i):(i.id="__mcenew",n.focus(),n.selection.setContent(o.createHTML("img",i)),f=o.get("__mcenew"),o.setAttrib(f,"id",null)),void t(f)):void(f&&(o.remove(f),n.focus(),n.nodeChanged()))})}function l(n){return n&&(n=n.replace(/px$/,"")),n}function d(t){var i,r,o,f=t.meta||{};a&&a.value(n.convertURL(this.value(),"src"));tinymce.each(f,function(n,t){e.find("#"+t).value(n)});f.width||f.height||(i=n.convertURL(this.value(),"src"),r=n.settings.image_prepend_url,o=new RegExp("^(?:[a-z]+:)?//","i"),r&&!o.test(i)&&i.substring(0,r.length)!==r&&(i=r+i),this.value(i),u(n.documentBaseURI.toAbsolute(this.value()),function(n){n.width&&n.height&&y&&(s=n.width,h=n.height,e.find("#width").value(s),e.find("#height").value(h))}))}function w(n){if(n.margin){var t=n.margin.split(" ");switch(t.length){case 1:n["margin-top"]=n["margin-top"]||t[0];n["margin-right"]=n["margin-right"]||t[0];n["margin-bottom"]=n["margin-bottom"]||t[0];n["margin-left"]=n["margin-left"]||t[0];break;case 2:n["margin-top"]=n["margin-top"]||t[0];n["margin-right"]=n["margin-right"]||t[1];n["margin-bottom"]=n["margin-bottom"]||t[0];n["margin-left"]=n["margin-left"]||t[1];break;case 3:n["margin-top"]=n["margin-top"]||t[0];n["margin-right"]=n["margin-right"]||t[1];n["margin-bottom"]=n["margin-bottom"]||t[2];n["margin-left"]=n["margin-left"]||t[1];break;case 4:n["margin-top"]=n["margin-top"]||t[0];n["margin-right"]=n["margin-right"]||t[1];n["margin-bottom"]=n["margin-bottom"]||t[2];n["margin-left"]=n["margin-left"]||t[3]}delete n.margin}return n}function b(){function r(n){return n.length>0&&/^[0-9]+$/.test(n)&&(n+="px"),n}if(n.settings.image_advtab){var i=e.toJSON(),t=o.parseStyle(i.style);t=w(t);i.vspace&&(t["margin-top"]=t["margin-bottom"]=r(i.vspace));i.hspace&&(t["margin-left"]=t["margin-right"]=r(i.hspace));i.border&&(t["border-width"]=r(i.border));e.find("#style").value(o.serializeStyle(o.parseStyle(o.serializeStyle(t))))}}function g(){if(n.settings.image_advtab){var i=e.toJSON(),t=o.parseStyle(i.style);e.find("#vspace").value("");e.find("#hspace").value("");t=w(t);(t["margin-top"]&&t["margin-bottom"]||t["margin-right"]&&t["margin-left"])&&(e.find("#vspace").value(t["margin-top"]===t["margin-bottom"]?l(t["margin-top"]):""),e.find("#hspace").value(t["margin-right"]===t["margin-left"]?l(t["margin-right"]):""));t["border-width"]&&e.find("#border").value(l(t["border-width"]));e.find("#style").value(o.serializeStyle(o.parseStyle(o.serializeStyle(t))))}}var e,s,h,a,k,i={},o=n.dom,f=n.selection.getNode(),y=n.settings.image_dimensions!==!1,c;s=o.getAttrib(f,"width");h=o.getAttrib(f,"height");"IMG"!=f.nodeName||f.getAttribute("data-mce-object")||f.getAttribute("data-mce-placeholder")?f=null:i={src:o.getAttrib(f,"src"),alt:o.getAttrib(f,"alt"),title:o.getAttrib(f,"title"),"class":o.getAttrib(f,"class"),width:s,height:h};t&&(a={type:"listbox",label:"Image list",values:r(t,function(t){t.value=n.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:i.src&&n.convertURL(i.src,"src"),onselect:function(n){var t=e.find("#alt");(!t.value()||n.lastControl&&t.value()==n.lastControl.text())&&t.value(n.control.text());e.find("#src").value(n.control.value()).fire("change")},onPostRender:function(){a=this}});n.settings.image_class_list&&(k={name:"class",type:"listbox",label:"Class",values:r(n.settings.image_class_list,function(t){t.value&&(t.textStyle=function(){return n.formatter.getCssText({inline:"img",classes:[t.value]})})})});c=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:d},a];n.settings.image_description!==!1&&c.push({name:"alt",type:"textbox",label:"Image description"});n.settings.image_title&&c.push({name:"title",type:"textbox",label:"Image Title"});y&&c.push({type:"container",label:"Dimensions",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:v,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:v,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]});c.push(k);n.settings.image_advtab?(f&&(f.style.marginLeft&&f.style.marginRight&&f.style.marginLeft===f.style.marginRight&&(i.hspace=l(f.style.marginLeft)),f.style.marginTop&&f.style.marginBottom&&f.style.marginTop===f.style.marginBottom&&(i.vspace=l(f.style.marginTop)),f.style.borderWidth&&(i.border=l(f.style.borderWidth)),i.style=n.dom.serializeStyle(n.dom.parseStyle(n.dom.getAttrib(f,"style")))),e=n.windowManager.open({title:"Insert/edit image",data:i,bodyType:"tabpanel",body:[{title:"General",type:"form",items:c},{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:g},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,alignH:["left","right"],defaults:{type:"textbox",maxWidth:50,onchange:b},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"},{label:"Border",name:"border"}]}]}],onSubmit:p})):e=n.windowManager.open({title:"Insert/edit image",data:i,body:c,onSubmit:p})}n.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:t(i),stateSelector:"img:not([data-mce-object],[data-mce-placeholder])"});n.addMenuItem("image",{icon:"image",text:"Insert/edit image",onclick:t(i),context:"insert",prependToContext:!0});n.addCommand("mceImage",t(i))});tinymce.PluginManager.add("importcss",function(n){function i(n){return"string"==typeof n?function(t){return-1!==t.indexOf(n)}:n instanceof RegExp?function(t){return n.test(t)}:n}function f(i,r){function u(n,i){var e,o=n.href;if(o&&r(o,i)){t(n.imports,function(n){u(n,!0)});try{e=n.cssRules||n.rules}catch(s){}t(e,function(n){n.styleSheet?u(n.styleSheet,!0):n.selectorText&&t(n.selectorText.split(","),function(n){f.push(tinymce.trim(n))})})}}var f=[],e={};t(n.contentCSS,function(n){e[n]=!0});r||(r=function(n,t){return t||e[n]});try{t(i.styleSheets,function(n){u(n)})}catch(o){}return f}function r(t){var i,u=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(u){var r=u[1],f=u[2].substr(1).split(".").join(" "),e=tinymce.makeMap("a,img");return u[1]?(i={title:t},n.schema.getTextBlockElements()[r]?i.block=r:n.schema.getBlockElements()[r]||e[r.toLowerCase()]?i.selector=r:i.inline=r):u[2]&&(i={inline:"span",title:t.substr(1),classes:f}),n.settings.importcss_merge_classes!==!1?i.classes=f:i.attributes={"class":f},i}}var u=this,t=tinymce.each;n.on("renderFormatsMenu",function(e){var s=n.settings,c={},a=s.importcss_selector_converter||r,l=i(s.importcss_selector_filter),h=e.control,o;n.settings.importcss_append||h.items().remove();o=[];tinymce.each(s.importcss_groups,function(n){n=tinymce.extend({},n);n.filter=i(n.filter);o.push(n)});t(f(e.doc||n.getDoc(),i(s.importcss_file_filter)),function(t){var f,r,e,i,s;if(-1===t.indexOf(".mce-")&&!c[t]&&(!l||l(t))){if(r=a.call(u,t),r){if(e=r.name||tinymce.DOM.uniqueId(),o)for(i=0;i<o.length;i++)if(!o[i].filter||o[i].filter(t)){o[i].item||(o[i].item={text:o[i].title,menu:[]});f=o[i].item.menu;break}n.formatter.register(e,r);s=tinymce.extend({},h.settings.itemDefaults,{text:r.title,format:e});f?f.push(s):h.add(s)}c[t]=!0}});t(o,function(n){h.add(n.item)});e.control.renderNew()});u.convertSelectorToFormat=r});tinymce.PluginManager.add("insertdatetime",function(n){function i(t,i){function r(n,t){if(n=""+n,n.length<t)for(var i=0;i<t-n.length;i++)n="0"+n;return n}return i=i||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+i.getFullYear()),t=t.replace("%y",""+i.getYear()),t=t.replace("%m",r(i.getMonth()+1,2)),t=t.replace("%d",r(i.getDate(),2)),t=t.replace("%H",""+r(i.getHours(),2)),t=t.replace("%M",""+r(i.getMinutes(),2)),t=t.replace("%S",""+r(i.getSeconds(),2)),t=t.replace("%I",""+((i.getHours()+11)%12+1)),t=t.replace("%p",""+(i.getHours()<12?"AM":"PM")),t=t.replace("%B",""+n.translate(h[i.getMonth()])),t=t.replace("%b",""+n.translate(s[i.getMonth()])),t=t.replace("%A",""+n.translate(o[i.getDay()])),t=t.replace("%a",""+n.translate(e[i.getDay()])),t=t.replace("%%","%")}function t(t){var r=i(t),f,u;if(n.settings.insertdatetime_element&&(f=i(/%[HMSIp]/.test(t)?"%Y-%m-%dT%H:%M":"%Y-%m-%d"),r='<time datetime="'+f+'">'+r+"<\/time>",u=n.dom.getParent(n.selection.getStart(),"time"),u))return void n.dom.setOuterHTML(u,r);n.insertContent(r)}var f,r,e="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),s="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),h="January February March April May June July August September October November December".split(" "),u=[];n.addCommand("mceInsertDate",function(){t(n.getParam("insertdatetime_dateformat",n.translate("%Y-%m-%d")))});n.addCommand("mceInsertTime",function(){t(n.getParam("insertdatetime_timeformat",n.translate("%H:%M:%S")))});n.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",onclick:function(){t(f||r)},menu:u});tinymce.each(n.settings.insertdatetime_formats||["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"],function(n){r||(r=n);u.push({text:i(n),onclick:function(){f=n;t(n)}})});n.addMenuItem("insertdatetime",{icon:"date",text:"Insert date/time",menu:u,context:"insert"})});!function(n){n.on("AddEditor",function(n){n.editor.settings.inline_styles=!1});n.PluginManager.add("legacyoutput",function(t,i,r){t.on("init",function(){var i="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",u=n.explode(t.settings.font_size_style_values),r=t.schema;t.formatter.register({alignleft:{selector:i,attributes:{align:"left"}},aligncenter:{selector:i,attributes:{align:"center"}},alignright:{selector:i,attributes:{align:"right"}},alignjustify:{selector:i,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(t){return n.inArray(u,t.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}});n.each("b,i,u,strike".split(","),function(n){r.addValidElements(n+"[*]")});r.getElementRule("font")||r.addValidElements("font[face|size|color|style]");n.each(i.split(","),function(n){var t=r.getElementRule(n);t&&(t.attributes.align||(t.attributes.align={},t.attributesOrder.push("align")))})});t.addButton("fontsizeselect",function(){var n=[],i=t.settings.fontsize_formats||"8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7";return t.$.each(i.split(" "),function(t,i){var u=i,f=i,r=i.split("=");r.length>1&&(u=r[0],f=r[1]);n.push({text:u,value:f})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:n,fixedWidth:!0,onPostRender:function(){var n=this;t.on("NodeChange",function(){var i;i=t.dom.getParent(t.selection.getNode(),"font");n.value(i?i.size:"")})},onclick:function(n){n.control.settings.value&&t.execCommand("FontSize",!1,n.control.settings.value)}}});t.addButton("fontselect",function(){function i(n){n=n.replace(/;$/,"").split(";");for(var t=n.length;t--;)n[t]=n[t].split("=");return n}var n=[],u=i(t.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return r.each(u,function(t,i){n.push({text:{raw:i[0]},value:i[1],textStyle:-1==i[1].indexOf("dings")?"font-family:"+i[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:!0,onPostRender:function(){var n=this;t.on("NodeChange",function(){var i;i=t.dom.getParent(t.selection.getNode(),"font");n.value(i?i.face:"")})},onselect:function(n){n.control.settings.value&&t.execCommand("FontName",!1,n.control.settings.value)}}})})}(tinymce);tinymce.PluginManager.add("link",function(n){function i(t){return function(){var i=n.settings.link_list;"string"==typeof i?tinymce.util.XHR.send({url:i,success:function(n){t(tinymce.util.JSON.parse(n))}}):"function"==typeof i?i(t):t(i)}}function r(n,t,i){function r(n,i){return i=i||[],tinymce.each(n,function(n){var u={text:n.text||n.title};n.menu?u.menu=r(n.menu):(u.value=n.value,t&&t(u));i.push(u)}),i}return r(n,i||[])}function t(t){function a(n){var t=h.find("#text");(!t.value()||n.lastControl&&t.value()==n.lastControl.text())&&t.value(n.control.text());h.find("#href").value(n.control.value())}function g(t){var i=[];return tinymce.each(n.dom.select("a:not([href])"),function(n){var r=n.name||n.id;r&&i.push({text:r,value:"#"+r,selected:-1!=t.indexOf("#"+r)})}),i.length?(i.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:i,onselect:a}):void 0}function v(){!l&&0===i.text.length&&o&&this.parent().parent().find("#text")[0].value(this.value())}function nt(t){var i=t.meta||{};s&&s.value(n.convertURL(this.value(),"href"));tinymce.each(t.meta,function(n,t){h.find("#"+t).value(n)});i.text||v.call(this)}function tt(n){var r=c.getContent(),t,i;if(/</.test(r)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(r)||-1==r.indexOf("href=")))return!1;if(n){if(i=n.childNodes,0===i.length)return!1;for(t=i.length-1;t>=0;t--)if(3!=i[t].nodeType)return!1}return!0}var y,u,l,h,o,p,s,w,b,k,d,e,i={},c=n.selection,f=n.dom;y=c.getNode();u=f.getParent(y,"a[href]");o=tt();i.text=l=u?u.innerText||u.textContent:c.getContent({format:"text"});i.href=u?f.getAttrib(u,"href"):"";u?i.target=f.getAttrib(u,"target"):n.settings.default_link_target&&(i.target=n.settings.default_link_target);(e=f.getAttrib(u,"rel"))&&(i.rel=e);(e=f.getAttrib(u,"class"))&&(i["class"]=e);(e=f.getAttrib(u,"title"))&&(i.title=e);o&&(p={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){i.text=this.value()}});t&&(s={type:"listbox",label:"Link list",values:r(t,function(t){t.value=n.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:a,value:n.convertURL(i.href,"href"),onPostRender:function(){s=this}});n.settings.target_list!==!1&&(n.settings.target_list||(n.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]),b={name:"target",type:"listbox",label:"Target",values:r(n.settings.target_list)});n.settings.rel_list&&(w={name:"rel",type:"listbox",label:"Rel",values:r(n.settings.rel_list)});n.settings.link_class_list&&(k={name:"class",type:"listbox",label:"Class",values:r(n.settings.link_class_list,function(t){t.value&&(t.textStyle=function(){return n.formatter.getCssText({inline:"a",classes:[t.value]})})})});n.settings.link_title!==!1&&(d={name:"title",type:"textbox",label:"Title",value:i.title});h=n.windowManager.open({title:"Insert link",data:i,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:nt,onkeyup:v},p,d,g(i.href),s,w,b,k],onSubmit:function(t){function s(t,i){var r=n.selection.getRng();window.setTimeout(function(){n.windowManager.confirm(t,function(t){n.selection.setRng(r);i(t)})},0)}function e(){var t={href:r,target:i.target?i.target:null,rel:i.rel?i.rel:null,"class":i["class"]?i["class"]:null,title:i.title?i.title:null};u?(n.focus(),o&&i.text!=l&&("innerText"in u?u.innerText=i.text:u.textContent=i.text),f.setAttribs(u,t),c.select(u),n.undoManager.add()):o?n.insertContent(f.createHTML("a",t,f.encode(i.text))):n.execCommand("mceInsertLink",!1,t)}var r;return i=tinymce.extend(i,t.data),(r=i.href)?r.indexOf("@")>0&&-1==r.indexOf("//")&&-1==r.indexOf("mailto:")?void s("The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(n){n&&(r="mailto:"+r);e()}):n.settings.link_assume_external_targets&&!/^\w+:/i.test(r)||!n.settings.link_assume_external_targets&&/^\s*www\./i.test(r)?void s("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(n){n&&(r="http://"+r);e()}):void e():void n.execCommand("unlink")}})}n.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onclick:i(t),stateSelector:"a[href]"});n.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"});n.addShortcut("Meta+K","",i(t));n.addCommand("mceLink",i(t));this.showDialog=t;n.addMenuItem("link",{icon:"link",text:"Insert/edit link",shortcut:"Meta+K",onclick:i(t),stateSelector:"a[href]",context:"insert",prependToContext:!0})});tinymce.PluginManager.add("lists",function(n){function t(n){return n&&/^(OL|UL|DL)$/.test(n.nodeName)}function i(n){return n.parentNode.firstChild==n}function f(n){return n.parentNode.lastChild==n}function r(t){return t&&!!n.schema.getTextBlockElements()[t.nodeName]}var u=this;n.on("init",function(){function h(n){function i(i){var f,r,u;r=n[i?"startContainer":"endContainer"];u=n[i?"startOffset":"endOffset"];1==r.nodeType&&(f=e.create("span",{"data-mce-type":"bookmark"}),r.hasChildNodes()?(u=Math.min(u,r.childNodes.length-1),i?r.insertBefore(f,r.childNodes[u]):e.insertAfter(f,r.childNodes[u])):r.appendChild(f),r=f,u=0);t[i?"startContainer":"endContainer"]=r;t[i?"startOffset":"endOffset"]=u}var t={};return i(!0),n.collapsed||i(),t}function c(n){function i(t){function f(n){for(var t=n.parentNode.firstChild,i=0;t;){if(t==n)return i;(1!=t.nodeType||"bookmark"!=t.getAttribute("data-mce-type"))&&i++;t=t.nextSibling}return-1}var i,r,u;i=u=n[t?"startContainer":"endContainer"];r=n[t?"startOffset":"endOffset"];i&&(1==i.nodeType&&(r=f(i),i=i.parentNode,e.remove(u)),n[t?"startContainer":"endContainer"]=i,n[t?"startOffset":"endOffset"]=r)}i(!0);i();var t=e.createRng();t.setStart(n.startContainer,n.startOffset);n.endContainer&&t.setEnd(n.endContainer,n.endOffset);o.setRng(t)}function s(t,i){var u,r,o,f=e.createFragment(),h=n.schema.getBlockElements(),s;if(n.settings.forced_root_block&&(i=i||n.settings.forced_root_block),i&&(r=e.create(i),r.tagName===n.settings.forced_root_block&&e.setAttribs(r,n.settings.forced_root_block_attrs),f.appendChild(r)),t)for(;u=t.firstChild;)s=u.nodeName,o||"SPAN"==s&&"bookmark"==u.getAttribute("data-mce-type")||(o=!0),h[s]?(f.appendChild(u),r=null):i?(r||(r=e.create(i),f.appendChild(r)),r.appendChild(u)):f.appendChild(u);return n.settings.forced_root_block?o||tinymce.Env.ie&&!(tinymce.Env.ie>10)||r.appendChild(e.create("br",{"data-mce-bogus":"1"})):f.appendChild(e.create("br")),f}function l(){return tinymce.grep(o.getSelectedBlocks(),function(n){return/^(LI|DT|DD)$/.test(n.nodeName)})}function y(n,t,i){function h(n){tinymce.each(o,function(i){n.parentNode.insertBefore(i,t.parentNode)});e.remove(n)}var u,f,o,r;for(o=e.select('span[data-mce-type="bookmark"]',n),i=i||s(t),u=e.createRng(),u.setStartAfter(t),u.setEndAfter(n),f=u.extractContents(),r=f.firstChild;r;r=r.firstChild)if("LI"==r.nodeName&&e.isEmpty(r)){e.remove(r);break}e.isEmpty(f)||e.insertAfter(f,n);e.insertAfter(i,n);e.isEmpty(t.parentNode)&&h(t.parentNode);e.remove(t);e.isEmpty(n)&&e.remove(n)}function p(n){var i,r;if(i=n.nextSibling,i&&t(i)&&i.nodeName==n.nodeName){for(;r=i.firstChild;)n.appendChild(r);e.remove(i)}if(i=n.previousSibling,i&&t(i)&&i.nodeName==n.nodeName){for(;r=i.firstChild;)n.insertBefore(r,n.firstChild);e.remove(i)}}function g(n){tinymce.each(tinymce.grep(e.select("ol,ul",n)),function(n){var i,r=n.parentNode;"LI"==r.nodeName&&r.firstChild==n&&(i=r.previousSibling,i&&"LI"==i.nodeName&&(i.appendChild(n),e.isEmpty(r)&&e.remove(r)));t(r)&&(i=r.previousSibling,i&&"LI"==i.nodeName&&i.appendChild(n))})}function w(n){function h(n){e.isEmpty(n)&&e.remove(n)}var o,u=n.parentNode,r=u.parentNode;return"DD"==n.nodeName?(e.rename(n,"DT"),!0):i(n)&&f(n)?("LI"==r.nodeName?(e.insertAfter(n,r),h(r),e.remove(u)):t(r)?e.remove(u,!0):(r.insertBefore(s(n),u),e.remove(u)),!0):i(n)?("LI"==r.nodeName?(e.insertAfter(n,r),n.appendChild(u),h(r)):t(r)?r.insertBefore(n,u):(r.insertBefore(s(n),u),e.remove(n)),!0):f(n)?("LI"==r.nodeName?e.insertAfter(n,r):t(r)?e.insertAfter(n,u):(e.insertAfter(s(n),u),e.remove(n)),!0):("LI"==r.nodeName?(u=r,o=s(n,"LI")):o=t(r)?s(n,"LI"):s(n),y(u,n,o),g(u.parentNode),!0)}function nt(n){function u(i,r){var u;if(t(i)){for(;u=n.lastChild.firstChild;)r.appendChild(u);e.remove(i)}}var i,r;return"DT"==n.nodeName?(e.rename(n,"DD"),!0):(i=n.previousSibling,i&&t(i)?(i.appendChild(n),!0):i&&"LI"==i.nodeName&&t(i.lastChild)?(i.lastChild.appendChild(n),u(n.lastChild,i.lastChild),!0):(i=n.nextSibling,i&&t(i)?(i.insertBefore(n,i.firstChild),!0):i&&"LI"==i.nodeName&&t(n.lastChild)?!1:(i=n.previousSibling,i&&"LI"==i.nodeName?(r=e.create(n.parentNode.nodeName),i.appendChild(r),r.appendChild(n),u(n.lastChild,r),!0):!1)))}function b(){var i=l(),r,t;if(i.length){for(r=h(o.getRng(!0)),t=0;t<i.length&&(nt(i[t])||0!==t);t++);return c(r),n.nodeChanged(),!0}}function k(){var i=l(),t,u,f,e,r;if(i.length){for(f=h(o.getRng(!0)),e=n.getBody(),t=i.length;t--;)for(r=i[t].parentNode;r&&r!=e;){for(u=i.length;u--;)if(i[u]===r){i.splice(t,1);break}r=r.parentNode}for(t=0;t<i.length&&(w(i[t])||0!==t);t++);return c(f),n.nodeChanged(),!0}}function tt(i){function s(){function o(n){var t,i;for(t=u[n?"startContainer":"endContainer"],i=u[n?"startOffset":"endOffset"],1==t.nodeType&&(t=t.childNodes[Math.min(i,t.childNodes.length-1)]||t);t.parentNode!=s;){if(r(t)||/^(TD|TH)$/.test(t.parentNode.nodeName))return t;t=t.parentNode}return t}for(var t,f=[],s=n.getBody(),c=o(!0),l=o(),h=[],i=c;i&&(h.push(i),i!=l);i=i.nextSibling);return tinymce.each(h,function(n){if(r(n))return f.push(n),void(t=null);if(e.isBlock(n)||"BR"==n.nodeName)return"BR"==n.nodeName&&e.remove(n),void(t=null);var i=n.nextSibling;return tinymce.dom.BookmarkManager.isBookmarkNode(n)&&(r(i)||!i&&n.parentNode==s)?void(t=null):(t||(t=e.create("p"),n.parentNode.insertBefore(t,n),f.push(t)),void t.appendChild(n))}),f}var u=o.getRng(!0),l=h(u),f="LI";i=i.toUpperCase();"DL"==i&&(f="DT");tinymce.each(s(),function(n){var u,r;r=n.previousSibling;r&&t(r)&&r.nodeName==i?(u=r,n=e.rename(n,f),r.appendChild(n)):(u=e.create(i),n.parentNode.insertBefore(u,n),u.appendChild(n),n=e.rename(n,f));p(u)});c(l)}function d(){var i=h(o.getRng(!0)),r=n.getBody();tinymce.each(l(),function(n){var i,u;if(e.isEmpty(n))return void w(n);for(i=n;i&&i!=r;i=i.parentNode)t(i)&&(u=i);y(u,n)});c(i)}function a(n){var t=e.getParent(o.getStart(),"OL,UL,DL"),i;t?t.nodeName==n?d(n):(i=h(o.getRng(!0)),p(e.rename(t,n)),c(i)):tt(n)}function v(t){return function(){var i=e.getParent(n.selection.getStart(),"UL,OL,DL");return i&&i.nodeName==t}}var e=n.dom,o=n.selection;u.backspaceDelete=function(i){function a(t,i){var u,f,r=t.startContainer,e=t.startOffset;if(3==r.nodeType&&(i?e<r.data.length:e>0))return r;for(u=n.schema.getNonEmptyElements(),f=new tinymce.dom.TreeWalker(t.startContainer);r=f[i?"next":"prev"]();)if("LI"==r.nodeName&&!r.hasChildNodes()||u[r.nodeName]||3==r.nodeType&&r.data.length>0)return r}function s(n,i){var r,u,f=n.parentNode;if(t(i.lastChild)&&(u=i.lastChild),r=i.lastChild,r&&"BR"==r.nodeName&&n.hasChildNodes()&&e.remove(r),e.isEmpty(i)&&e.$(i).empty(),!e.isEmpty(n))for(;r=n.firstChild;)i.appendChild(r);u&&i.appendChild(u);e.remove(n);e.isEmpty(f)&&e.remove(f)}var r,f,u,l;if(o.isCollapsed()&&(r=e.getParent(o.getStart(),"LI"),r)){if(f=o.getRng(!0),u=e.getParent(a(f,i),"LI"),u&&u!=r)return l=h(f),i?s(u,r):s(r,u),c(l),!0;if(!u&&!i&&d(r.parentNode.nodeName))return!0}};n.on("BeforeExecCommand",function(t){var i,r=t.command.toLowerCase();return"indent"==r?b()&&(i=!0):"outdent"==r&&k()&&(i=!0),i?(n.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0):void 0});n.addCommand("InsertUnorderedList",function(){a("UL")});n.addCommand("InsertOrderedList",function(){a("OL")});n.addCommand("InsertDefinitionList",function(){a("DL")});n.addQueryStateHandler("InsertUnorderedList",v("UL"));n.addQueryStateHandler("InsertOrderedList",v("OL"));n.addQueryStateHandler("InsertDefinitionList",v("DL"));n.on("keydown",function(t){9!=t.keyCode||tinymce.util.VK.metaKeyPressed(t)||n.dom.getParent(n.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?k():b())})});n.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(){var t=this;n.on("nodechange",function(){for(var r,f=n.selection.getSelectedBlocks(),e=!1,u=0,o=f.length;!e&&o>u;u++)r=f[u].nodeName,e="LI"==r&&i(f[u])||"UL"==r||"OL"==r||"DD"==r;t.disabled(e)})}});n.on("keydown",function(n){n.keyCode==tinymce.util.VK.BACKSPACE?u.backspaceDelete()&&n.preventDefault():n.keyCode==tinymce.util.VK.DELETE&&u.backspaceDelete(!0)&&n.preventDefault()})});tinymce.PluginManager.add("media",function(n,t){function u(n){return n=n.toLowerCase(),-1!=n.indexOf(".mp3")?"audio/mpeg":-1!=n.indexOf(".wav")?"audio/wav":-1!=n.indexOf(".mp4")?"video/mp4":-1!=n.indexOf(".webm")?"video/webm":-1!=n.indexOf(".ogg")?"video/ogg":-1!=n.indexOf(".swf")?"application/x-shockwave-flash":""}function r(t){var r=n.settings.media_scripts,i;if(r)for(i=0;i<r.length;i++)if(-1!==t.indexOf(r[i].filter))return r[i]}function f(){function l(n){var e,o,t,i;e=r.find("#width")[0];o=r.find("#height")[0];t=e.value();i=o.value();r.find("#constrain")[0].checked()&&u&&f&&t&&i&&(n.control==e?(i=Math.round(t/u*i),isNaN(i)||o.value(i)):(t=Math.round(i/f*t),isNaN(t)||e.value(t)));u=t;f=i}function v(){t=i(this.value());this.parent().parent().fromJSON(t)}var r,u,f,t,o=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onchange:function(n){tinymce.each(n.meta,function(n,t){r.find("#"+t).value(n)})}}],c;n.settings.media_alt_source!==!1&&o.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"});n.settings.media_poster!==!1&&o.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"});n.settings.media_dimensions!==!1&&o.push({type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:l,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:l,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]});t=h(n.selection.getNode());u=t.width;f=t.height;c={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:s(),multiline:!0,label:"Source"};c[a]=v;r=n.windowManager.open({title:"Insert/edit video",data:t,bodyType:"tabpanel",body:[{title:"General",type:"form",onShowTab:function(){t=i(this.next().find("#embed").value());this.fromJSON(t)},items:o},{title:"Embed",type:"panel",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,onShowTab:function(){this.find("#embed").value(e(this.parent().toJSON()))},items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},c]}],onSubmit:function(){var u,t,r,i;for(u=n.dom.select("img[data-mce-object]"),n.insertContent(e(this.toJSON())),t=n.dom.select("img[data-mce-object]"),r=0;r<u.length;r++)for(i=t.length-1;i>=0;i--)u[r]==t[i]&&t.splice(i,1);n.selection.select(t[0]);n.nodeChanged()}})}function s(){var t=n.selection.getNode();if(t.getAttribute("data-mce-object"))return n.selection.getContent()}function e(f){var e="",s;return!f.source1&&(tinymce.extend(f,i(f.embed)),!f.source1)?"":((f.source2||(f.source2=""),f.poster||(f.poster=""),f.source1=n.convertURL(f.source1,"source"),f.source2=n.convertURL(f.source2,"source"),f.source1mime=u(f.source1),f.source2mime=u(f.source2),f.poster=n.convertURL(f.poster,"poster"),f.flashPlayerUrl=n.convertURL(t+"/moxieplayer.swf","movie"),tinymce.each(l,function(n){var r,t,i;if(r=n.regex.exec(f.source1)){for(i=n.url,t=0;r[t];t++)i=i.replace("$"+t,function(){return r[t]});f.source1=i;f.type=n.type;f.width=f.width||n.w;f.height=f.height||n.h}}),f.embed)?e=o(f.embed,f,!0):(s=r(f.source1),s&&(f.type="script",f.width=s.width,f.height=s.height),f.width=f.width||300,f.height=f.height||150,tinymce.each(f,function(t,i){f[i]=n.dom.encode(t)}),"iframe"==f.type?e+='<iframe src="'+f.source1+'" width="'+f.width+'" height="'+f.height+'"><\/iframe>':"application/x-shockwave-flash"==f.source1mime?(e+='<object data="'+f.source1+'" width="'+f.width+'" height="'+f.height+'" type="application/x-shockwave-flash">',f.poster&&(e+='<img src="'+f.poster+'" width="'+f.width+'" height="'+f.height+'" />'),e+="<\/object>"):-1!=f.source1mime.indexOf("audio")?n.settings.audio_template_callback?e=n.settings.audio_template_callback(f):e+='<audio controls="controls" src="'+f.source1+'">'+(f.source2?'\n<source src="'+f.source2+'"'+(f.source2mime?' type="'+f.source2mime+'"':"")+" />\n":"")+"<\/audio>":"script"==f.type?e+='<script src="'+f.source1+'"><\/script>':e=n.settings.video_template_callback?n.settings.video_template_callback(f):'<video width="'+f.width+'" height="'+f.height+'"'+(f.poster?' poster="'+f.poster+'"':"")+' controls="controls">\n<source src="'+f.source1+'"'+(f.source1mime?' type="'+f.source1mime+'"':"")+" />\n"+(f.source2?'<source src="'+f.source2+'"'+(f.source2mime?' type="'+f.source2mime+'"':"")+" />\n":"")+"<\/video>"),e)}function i(n){var t={};return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(n,i){if(t.source1||"param"!=n||(t.source1=i.map.movie),("iframe"==n||"object"==n||"embed"==n||"video"==n||"audio"==n)&&(t.type||(t.type=n),t=tinymce.extend(i.map,t)),"script"==n){var u=r(i.map.src);if(!u)return;t={type:"script",source1:i.map.src,width:u.width,height:u.height}}"source"==n&&(t.source1?t.source2||(t.source2=i.map.src):t.source1=i.map.src);"img"!=n||t.poster||(t.poster=i.map.src)}}).parse(n),t.source1=t.source1||t.src||t.data,t.source2=t.source2||"",t.poster=t.poster||"",t}function h(t){return t.getAttribute("data-mce-object")?i(n.serializer.serialize(t,{selection:!0})):{}}function c(t){if(n.settings.media_filter_html===!1)return t;var i=new tinymce.html.Writer;return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(n){i.comment(n)},cdata:function(n){i.cdata(n)},text:function(n,t){i.text(n,t)},start:function(n,t,r){if("script"!=n&&"noscript"!=n){for(var u=0;u<t.length;u++)if(0===t[u].name.indexOf("on"))return;i.start(n,t,r)}},end:function(n){"script"!=n&&"noscript"!=n&&i.end(n)}},new tinymce.html.Schema({})).parse(t),i.getContent()}function o(n,t,i){function u(n,t){var i,u,r,f;for(i in t)if(r=""+t[i],n.map[i])for(u=n.length;u--;)f=n[u],f.name==i&&(r?(n.map[i]=r,f.value=r):(delete n.map[i],n.splice(u,1)));else r&&(n.push({name:i,value:r}),n.map[i]=r)}var e,r=new tinymce.html.Writer,f=0;return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(n){r.comment(n)},cdata:function(n){r.cdata(n)},text:function(n,t){r.text(n,t)},start:function(n,o,s){switch(n){case"video":case"object":case"embed":case"img":case"iframe":u(o,{width:t.width,height:t.height})}if(i)switch(n){case"video":u(o,{poster:t.poster,src:""});t.source2&&u(o,{src:""});break;case"iframe":u(o,{src:t.source1});break;case"source":if(f++,2>=f&&(u(o,{src:t["source"+f],type:t["source"+f+"mime"]}),!t["source"+f]))return;break;case"img":if(!t.poster)return;e=!0}r.start(n,o,s)},end:function(n){var o,s,h;if("video"==n&&i)for(o=1;2>=o;o++)t["source"+o]&&(s=[],s.map={},o>f&&(u(s,{src:t["source"+o],type:t["source"+o+"mime"]}),r.start("source",s,!0)));t.poster&&"object"==n&&i&&!e&&(h=[],h.map={},u(h,{src:t.poster,width:t.width,height:t.height}),r.start("img",h,!0));r.end(n)}},new tinymce.html.Schema({})).parse(n),r.getContent()}var l=[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:425,h:350,url:"//www.youtube.com/embed/$1"},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:425,h:350,url:"//www.youtube.com/embed/$2"},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc"},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0"},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"'}],a=tinymce.Env.ie&&tinymce.Env.ie<=8?"onChange":"onInput";n.on("ResolveName",function(n){var t;1==n.target.nodeType&&(t=n.target.getAttribute("data-mce-object"))&&(n.name=t)});n.on("preInit",function(){var i=n.schema.getSpecialElements(),t;tinymce.each("video audio iframe object".split(" "),function(n){i[n]=new RegExp("<\/"+n+"[^>]*>","gi")});t=n.schema.getBoolAttrs();tinymce.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(n){t[n]={}});n.parser.addNodeFilter("iframe,video,audio,object,embed,script",function(t,i){for(var s,u,e,f,h,c,l,o,a=t.length;a--;)if(u=t[a],u.parent&&("script"!=u.name||(o=r(u.attr("src"))))){for(e=new tinymce.html.Node("img",1),e.shortEnded=!0,o&&(o.width&&u.attr("width",o.width.toString()),o.height&&u.attr("height",o.height.toString())),c=u.attributes,s=c.length;s--;)f=c[s].name,h=c[s].value,"width"!==f&&"height"!==f&&"style"!==f&&(("data"==f||"src"==f)&&(h=n.convertURL(h,f)),e.attr("data-mce-p-"+f,h));l=u.firstChild&&u.firstChild.value;l&&(e.attr("data-mce-html",escape(l)),e.firstChild=null);e.attr({width:u.attr("width")||"300",height:u.attr("height")||("audio"==i?"30":"150"),style:u.attr("style"),src:tinymce.Env.transparentSrc,"data-mce-object":i,"class":"mce-object mce-object-"+i});u.replace(e)}});n.serializer.addAttributeFilter("data-mce-object",function(n,t){for(var i,r,f,e,s,o,u,l,h=n.length;h--;)if(i=n[h],i.parent){for(u=i.attr(t),r=new tinymce.html.Node(u,1),"audio"!=u&&"script"!=u&&r.attr({width:i.attr("width"),height:i.attr("height")}),r.attr({style:i.attr("style")}),e=i.attributes,f=e.length;f--;)l=e[f].name,0===l.indexOf("data-mce-p-")&&r.attr(l.substr(11),e[f].value);"script"==u&&r.attr("type","text/javascript");s=i.attr("data-mce-html");s&&(o=new tinymce.html.Node("#text",3),o.raw=!0,o.value=c(unescape(s)),r.append(o));i.replace(r)}})});n.on("ObjectSelected",function(n){var t=n.target.getAttribute("data-mce-object");("audio"==t||"script"==t)&&n.preventDefault()});n.on("objectResized",function(n){var t,i=n.target;i.getAttribute("data-mce-object")&&(t=i.getAttribute("data-mce-html"),t&&(t=unescape(t),i.setAttribute("data-mce-html",escape(o(t,{width:n.width,height:n.height})))))});n.addButton("media",{tooltip:"Insert/edit video",onclick:f,stateSelector:["img[data-mce-object=video]","img[data-mce-object=iframe]"]});n.addMenuItem("media",{icon:"media",text:"Insert/edit video",onclick:f,context:"insert",prependToContext:!0})});tinymce.PluginManager.add("nonbreaking",function(n){var t=n.getParam("nonbreaking_force_tab"),i;if(n.addCommand("mceNonBreaking",function(){n.insertContent(n.plugins.visualchars&&n.plugins.visualchars.state?'<span class="mce-nbsp">&nbsp;<\/span>':"&nbsp;");n.dom.setAttrib(n.dom.select("span.mce-nbsp"),"data-mce-bogus","1")}),n.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),n.addMenuItem("nonbreaking",{text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"}),t){i=+t>1?+t:3;n.on("keydown",function(t){if(9==t.keyCode){if(t.shiftKey)return;t.preventDefault();for(var r=0;i>r;r++)n.execCommand("mceNonBreaking")}})}});tinymce.PluginManager.add("noneditable",function(n){function i(n){var t;return 1===n.nodeType&&((t=n.getAttribute(f),t&&"inherit"!==t)||(t=n.contentEditable,"inherit"!==t))?t:null}function u(n){for(var t;n;){if(t=i(n))return"false"===t?n:null;n=n.parentNode}}function c(){function l(n){for(;n;){if(n.id===h)return n;n=n.parentNode}}function a(n){var t;if(n)for(t=new s(n,n),n=t.current();n;n=t.next())if(3===n.nodeType)return n}function v(t,u){var e,o;return"false"===i(t)&&f.isBlock(t)?void r.select(t):(o=f.createRng(),"true"===i(t)&&(t.firstChild||t.appendChild(n.getDoc().createTextNode(" ")),t=t.firstChild,u=!0),e=f.create("span",{id:h,"data-mce-bogus":!0},c),u?t.parentNode.insertBefore(e,t):f.insertAfter(e,t),o.setStart(e.firstChild,1),o.collapse(!0),r.setRng(o),e)}function o(n){var i,t,u;if(n)i=r.getRng(!0),i.setStartBefore(n),i.setEndBefore(n),t=a(n),t&&t.nodeValue.charAt(0)==c&&(t=t.deleteData(0,1)),f.remove(n,!0),r.setRng(i);else for(;(n=f.get(h))&&n!==u;)t=a(n),t&&t.nodeValue.charAt(0)==c&&(t=t.deleteData(0,1)),f.remove(n,!0),u=n}function e(){function h(n,r){var u,f,h,e,o,c;if(u=t.startContainer,f=t.startOffset,3==u.nodeType){if(o=u.nodeValue.length,f>0&&o>f||(r?f==o:0===f))return}else{if(!(f<u.childNodes.length))return r?null:n;c=!r&&f>0?f-1:f;u=u.childNodes[c];u.hasChildNodes()&&(u=u.firstChild)}for(h=new s(u,n);e=h[r?"prev":"next"]();){if(3===e.nodeType&&e.nodeValue.length>0)return;if("true"===i(e))return e}return n}var n,f,c,t,e;o();c=r.isCollapsed();n=u(r.getStart());f=u(r.getEnd());(n||f)&&(t=r.getRng(!0),c?(n=n||f,(e=h(n,!0))?v(e,!0):(e=h(n,!1))?v(e,!1):r.select(n)):(t=r.getRng(!0),n&&t.setStartBefore(n),f&&t.setEndAfter(f),r.setRng(t)))}function y(h){function ut(n,t){for(;n=n[t?"previousSibling":"nextSibling"];)if(3!==n.nodeType||n.nodeValue.length>0)return n}function w(n,t){r.select(n);r.collapse(t)}function st(t){function c(n){for(var t=o;t;){if(t===n)return;t=t.parentNode}f.remove(n);e()}function v(){for(var r,e=n.schema.getNonEmptyElements(),f=new tinymce.dom.TreeWalker(o,n.getBody());(r=t?f.prev():f.next())&&!e[r.nodeName.toLowerCase()]&&!(3===r.nodeType&&tinymce.trim(r.nodeValue).length>0);)if("false"===i(r))return c(r),!0;return u(r)?!0:!1}var h,o,s,a;if(r.isCollapsed()){if(h=r.getRng(!0),o=h.startContainer,s=h.startOffset,o=l(o)||o,a=u(o))return c(a),!1;if(3==o.nodeType&&(t?s>0:s<o.nodeValue.length))return!0;if(1==o.nodeType&&(o=o.childNodes[s]||o),v())return!1}return!0}var a,b,nt,ft,c=h.keyCode,p,k,d,it,et,ot,rt,g;e();nt=r.getStart();ft=r.getEnd();a=u(nt)||u(ft);var v=n.selection.getNode(),tt=c==t.LEFT||c==t.RIGHT||c==t.UP||c==t.DOWN,y=c==t.LEFT||c==t.UP;if(a&&(112>c||c>124)&&c!=t.DELETE&&c!=t.BACKSPACE){if((tinymce.isMac?h.metaKey:h.ctrlKey)&&(67==c||88==c||86==c))return;(h.preventDefault(),tt)&&(n.dom.isBlock(a)?(p=y?a.previousSibling:a.nextSibling,(!p||p&&"false"===i(p))&&(k=f.create("p",null,"&nbsp;"),k.className="mceTmpParagraph",d=y?a:p,d&&d.parentNode?d.parentNode.insertBefore(k,d):p||y||a.parentNode.appendChild(k),p=k),it=new s(p,p),et=y?it.prev():it.next(),w(et,!y)):w(a,y))}else if(tt||c==t.BACKSPACE||c==t.DELETE){if(b=l(nt)){if(c==t.LEFT||c==t.BACKSPACE)if(a=ut(b,!0),a&&"false"===i(a)){if(h.preventDefault(),c!=t.LEFT)return void f.remove(a);w(a,!0)}else o(b);if(c==t.RIGHT||c==t.DELETE)if(a=ut(b,!0),a&&"false"===i(a)){if(h.preventDefault(),c!=t.RIGHT)return void f.remove(a);w(a,!1)}else o(b)}else if(tt&&v&&-1!==v.className.indexOf("mceTmpParagraph")&&v[y?"previousSibling":"nextSibling"]&&(ot=v[y?"previousSibling":"nextSibling"],"&nbsp;"===v.innerHTML||""===v.innerHTML||" "===v.innerHTML?f.remove(v):v.className=v.className.replace("mceTmpParagraph",""),w(ot,!y)),rt=r.getRng(!0),g=rt.endContainer,f.isBlock(g)&&f.isBlock(g.nextSibling)&&1==rt.endOffset&&c==t.DELETE&&(a=u(g.nextSibling)),a&&(c==t.DELETE||c==t.BACKSPACE)&&f.isBlock(a))return h.preventDefault(),void f.remove(a);if((c==t.BACKSPACE||c==t.DELETE)&&!st(c==t.BACKSPACE))return h.preventDefault(),!1}}var f=n.dom,r=n.selection,h="mce_noneditablecaret",c="﻿";n.on("mousedown",function(t){var r=n.selection.getNode();r&&-1!==r.className.indexOf("mceTmpParagraph")&&r!==t.target&&("&nbsp;"===r.innerHTML||""===r.innerHTML||" "===r.innerHTML?f.remove(r):r.className=r.className.replace("mceTmpParagraph",""));"false"===i(r)&&r==t.target&&e()});n.on("mouseup",e);n.on("keydown",y)}function l(t){var u=r.length,i=t.content,f=tinymce.trim(o);if("raw"!=t.format){for(;u--;)i=i.replace(r[u],function(t){var r=arguments,u=r[r.length-2];return u>0&&'"'==i.charAt(u-1)?t:'<span class="'+f+'" data-mce-content="'+n.dom.encode(r[0])+'">'+n.dom.encode("string"==typeof r[1]?r[1]:r[0])+"<\/span>"});t.content=i}}var h,o,r,s=tinymce.dom.TreeWalker,e="contenteditable",f="data-mce-"+e,t=tinymce.util.VK;h=" "+tinymce.trim(n.getParam("noneditable_editable_class","mceEditable"))+" ";o=" "+tinymce.trim(n.getParam("noneditable_noneditable_class","mceNonEditable"))+" ";r=n.getParam("noneditable_regexp");r&&!r.length&&(r=[r]);n.on("PreInit",function(){c();r&&n.on("BeforeSetContent",l);n.parser.addAttributeFilter("class",function(n){for(var i,t,r=n.length;r--;)t=n[r],i=" "+t.attr("class")+" ",-1!==i.indexOf(h)?t.attr(f,"true"):-1!==i.indexOf(o)&&t.attr(f,"false")});n.serializer.addAttributeFilter(f,function(n){for(var t,i=n.length;i--;)t=n[i],r&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):(t.attr(e,null),t.attr(f,null))});n.parser.addAttributeFilter(e,function(n){for(var t,i=n.length;i--;)t=n[i],t.attr(f,t.attr(e)),t.attr(e,null)})});n.on("drop",function(n){u(n.target)&&n.preventDefault()})});tinymce.PluginManager.add("pagebreak",function(n){var t="mce-pagebreak",i=n.getParam("pagebreak_separator","<!-- pagebreak -->"),u=new RegExp(i.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(n){return"\\"+n}),"gi"),r='<img src="'+tinymce.Env.transparentSrc+'" class="'+t+'" data-mce-resize="false" />';n.addCommand("mcePageBreak",function(){n.insertContent(n.settings.pagebreak_split_block?"<p>"+r+"<\/p>":r)});n.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"});n.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"});n.on("ResolveName",function(i){"IMG"==i.target.nodeName&&n.dom.hasClass(i.target,t)&&(i.name="pagebreak")});n.on("click",function(i){i=i.target;"IMG"===i.nodeName&&n.dom.hasClass(i,t)&&n.selection.select(i)});n.on("BeforeSetContent",function(n){n.content=n.content.replace(u,r)});n.on("PreInit",function(){n.serializer.addNodeFilter("img",function(t){for(var r,f,u,e=t.length;e--;)if(r=t[e],f=r.attr("class"),f&&-1!==f.indexOf("mce-pagebreak")){if(u=r.parent,n.schema.getBlockElements()[u.name]&&n.settings.pagebreak_split_block){u.type=3;u.value=i;u.raw=!0;r.remove();continue}r.type=3;r.value=i;r.raw=!0}})})});!function(n,t){"use strict";function u(n,t){for(var u,e=[],i=0;i<n.length;++i){if(u=r[n[i]]||f(n[i]),!u)throw"module definition dependecy not found: "+n[i];e.push(u)}t.apply(null,e)}function i(n,i,f){if("string"!=typeof n)throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(f===t)throw"invalid module definition, definition function must be specified";u(i,function(){r[n]=f.apply(null,arguments)})}function f(t){for(var i=n,u=t.split(/[.\/]/),r=0;r<u.length;++r){if(!i[u[r]])return;i=i[u[r]]}return i}function e(i){for(var o=0;o<i.length;o++){for(var f=n,s=i[o],u=s.split(/[.\/]/),e=0;e<u.length-1;++e)f[u[e]]===t&&(f[u[e]]={}),f=f[u[e]];f[u[u.length-1]]=r[s]}}var r={};i("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(n,t,i){function r(t,i){return n.each(i,function(n){t=n.constructor==RegExp?t.replace(n,""):t.replace(n[0],n[1])}),t}function u(u){function o(n){var t=n.name,i=n;if("br"===t)return void(f+="\n");if(h[t]&&(f+=" "),c[t])return void(f+=" ");if(3==n.type&&(f+=n.value),!n.shortEnded&&(n=n.firstChild))do o(n);while(n=n.next);l[t]&&i.next&&(f+="\n","p"==t&&(f+="\n"))}var e=new i,s=new t({},e),f="",h=e.getShortEndedElements(),c=n.makeMap("script noscript style textarea video audio iframe object"," "),l=e.getBlockElements();return u=r(u,[/<!\[[^\]]+\]>/g]),o(s.parse(u)),f}function f(n){function t(n,t,i){return t||i?" ":" "}return r(n,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br>$/i])}return{filter:r,innerText:u,trimHtml:f}});i("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils"],function(n,t,i,r){return function(u){function o(n){var t,r=u.dom,i;(t=u.fire("BeforePastePreProcess",{content:n}),t=u.fire("PastePreProcess",t),n=t.content,t.isDefaultPrevented())||(u.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()&&(i=r.add(u.getBody(),"div",{style:"display:none"},n),t=u.fire("PastePostProcess",{node:i}),r.remove(i),n=t.node.innerHTML),t.isDefaultPrevented()||u.insertContent(n,{merge:u.settings.paste_merge_formats!==!1}))}function l(n){n=u.dom.encode(n).replace(/\r\n/g,"\n");var t,f=u.dom.getParent(u.selection.getStart(),u.dom.isBlock),i=u.settings.forced_root_block;i&&(t=u.dom.createHTML(i,u.settings.forced_root_block_attrs),t=t.substr(0,t.length-3)+">");f&&/^(PRE|DIV)$/.test(f.nodeName)||!i?n=r.filter(n,[[/\n/g,"<br>"]]):(n=r.filter(n,[[/\n\n/g,"<\/p>"+t],[/^(.*<\/p>)(<p>)$/,t+"$1"],[/\n/g,"<br />"]]),-1!=n.indexOf("<p>")&&(n=t+n));o(n)}function v(){function a(n){var r,u,i,f=n.startContainer;if(r=n.getClientRects(),r.length)return r[0];if(n.collapsed&&1==f.nodeType){for(i=f.childNodes[e.startOffset];i&&3==i.nodeType&&!i.data.length;)i=i.nextSibling;if(i)return"BR"==i.tagName&&(u=t.doc.createTextNode("﻿"),i.parentNode.insertBefore(u,i),n=t.createRng(),n.setStartBefore(u),n.setEndAfter(u),r=n.getClientRects(),t.remove(u)),r.length?r[0]:void 0}}var r,t=u.dom,o=u.getBody(),v=u.dom.getViewPort(u.getWin()),h=v.y,s=20,l,i;(e=u.selection.getRng(),u.inline&&(r=u.selection.getScrollContainer(),r&&r.scrollTop>0&&(h=r.scrollTop)),e.getClientRects)&&(l=a(e),l?s=h+(l.top-t.getPos(o).y):(s=h,i=e.startContainer,i&&(3==i.nodeType&&i.parentNode!=o&&(i=i.parentNode),1==i.nodeType&&(s=t.getPos(i,r||o).y))));f=t.add(u.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+s+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},c);(n.ie||n.gecko)&&t.setStyle(f,"left","rtl"==t.getStyle(o,"direction",!0)?65535:-65535);t.bind(f,"beforedeactivate focusin focusout",function(n){n.stopPropagation()});f.focus();u.selection.select(f,!0)}function s(){if(f){for(var n;n=u.dom.get("mcepastebin");)u.dom.remove(n),u.dom.unbind(n);e&&u.selection.setRng(e)}f=e=null}function y(){for(var n,f,r="",i=u.dom.select("div[id=mcepastebin]"),t=0;t<i.length;t++)n=i[t],n.firstChild&&"mcepastebin"==n.firstChild.id&&(n=n.firstChild),f=n.innerHTML,r!=c&&(r+=f);return r}function p(n){var r={},t,i,u;if(n&&(n.getData&&(t=n.getData("Text"),t&&t.length>0&&-1==t.indexOf(ut)&&(r["text/plain"]=t)),n.types))for(i=0;i<n.types.length;i++)u=n.types[i],r[u]=n.getData(u);return r}function nt(n){return p(n.clipboardData||u.getDoc().dataTransfer)}function w(n,t){function r(i){function h(n){t&&(u.selection.setRng(t),t=null);o('<img src="'+n.result+'">')}var f,r,e,s=!1;if(i)for(f=0;f<i.length;f++)r=i[f],/^image\/(jpeg|png|gif|bmp)$/.test(r.type)&&(e=new FileReader,e.onload=h.bind(null,e),e.readAsDataURL(r.getAsFile?r.getAsFile():r),n.preventDefault(),s=!0);return s}var i=n.clipboardData||n.dataTransfer;if(u.settings.paste_data_images&&i)return r(i.items)||r(i.files)}function tt(n){var t=n.clipboardData;return-1!=navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length}function it(n){return t.getCaretRangeFromPoint(n.clientX,n.clientY,u.getDoc())}function b(n,t){return t in n&&n[t].length>0}function k(n){return i.metaKeyPressed(n)&&86==n.keyCode||n.shiftKey&&45==n.keyCode}function rt(){u.on("keydown",function(t){function i(n){k(n)&&!n.isDefaultPrevented()&&s()}if(k(t)&&!t.isDefaultPrevented()){if(h=t.shiftKey&&86==t.keyCode,h&&n.webkit&&-1!=navigator.userAgent.indexOf("Version/"))return;if(t.stopImmediatePropagation(),d=(new Date).getTime(),n.ie&&h)return t.preventDefault(),void u.fire("paste",{ieFake:!0});s();v();u.once("keyup",i);u.once("paste",function(){u.off("keyup",i)})}});u.on("paste",function(t){var k=(new Date).getTime(),i=nt(t),g=(new Date).getTime()-k,p=(new Date).getTime()-d-g<1e3,e="text"==a.pasteFormat||h;return h=!1,t.isDefaultPrevented()||tt(t)?void s():w(t)?void s():(p||t.preventDefault(),!n.ie||p&&!t.ieFake||(v(),u.dom.bind(f,"paste",function(n){n.stopPropagation()}),u.getDoc().execCommand("Paste",!1,null),i["text/html"]=y()),void setTimeout(function(){var n;return b(i,"text/html")?n=i["text/html"]:(n=y(),n==c&&(e=!0)),n=r.trimHtml(n),f&&f.firstChild&&"mcepastebin"===f.firstChild.id&&(e=!0),s(),n.length||(e=!0),e&&(n=b(i,"text/plain")&&-1==n.indexOf("<\/p>")?i["text/plain"]:r.innerText(n)),n==c?void(p||u.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(e?l(n):o(n))},0))});u.on("dragstart dragend",function(n){g="dragstart"==n.type});u.on("drop",function(n){var f=it(n),t,i;n.isDefaultPrevented()||g||w(n,f)||!f||u.settings.paste_filter_drop===!1||(t=p(n.dataTransfer),i=t["mce-internal"]||t["text/html"]||t["text/plain"],i&&(n.preventDefault(),u.undoManager.transact(function(){t["mce-internal"]&&u.execCommand("Delete");u.selection.setRng(f);i=r.trimHtml(i);t["text/html"]?o(i):l(i)})))});u.on("dragover dragend",function(n){u.settings.paste_data_images&&n.preventDefault()})}var f,e,h,a=this,d=0,g=!1,c="%MCEPASTEBIN%",ut="data:text/mce-internal,";a.pasteHtml=o;a.pasteText=l;u.on("preInit",function(){rt();u.parser.addNodeFilter("img",function(t){var i,r;if(!u.settings.paste_data_images)for(i=t.length;i--;)r=t[i].attributes.map.src,r&&/^(data:image|webkit\-fake\-url)/.test(r)&&(t[i].attr("data-mce-object")||r===n.transparentSrc||t[i].remove())})})}});i("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(n,t,i,r,u,f){function e(n){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(n)||/class="OutlineElement/.test(n)||/id="?docs\-internal\-guid\-/.test(n)}function s(t){var i,r;return r=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),n.each(r,function(n){if(n.test(t))return(i=!0,!1)}),i}function h(n){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(n)}function o(o){var c=o.settings;o.on("BeforePastePreProcess",function(l){function d(n){function p(n){var t="";if(3===n.type)return n.value;if(n=n.firstChild)do t+=p(n);while(n=n.next);return t}function e(n,t){if(3===n.type&&t.test(n.value))return n.value=n.value.replace(t,""),!1;if(n=n.firstChild)do if(!e(n,t))return!1;while(n=n.next);return!0}function w(n){if(n._listIgnore)return void n.remove();if(n=n.firstChild)do w(n);while(n=n.next)}function l(n,i,o){var s=n._listLevel||f;s!=f&&(f>s?t&&(t=t.parent.parent):(r=t,t=null));t&&t.name==i?t.append(n):(r=r||t,t=new u(i,1),o>1&&t.attr("start",""+o),n.wrap(t));n.name="li";s>f&&r&&r.lastChild.append(t);f=s;w(n);e(n,/^\u00a0+/);e(n,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/);e(n,/^\u00a0+/)}for(var o,c,v,y,t,r,f=1,a=[],i=n.firstChild;"undefined"!=typeof i&&null!==i;)if(a.push(i),i=i.walk(),null!==i)for(;"undefined"!=typeof i&&i.parent!==n;)i=i.walk();for(o=0;o<a.length;o++)if(n=a[o],"p"==n.name&&n.firstChild){if(c=p(n),h(c)){l(n,"ul");continue}if(s(c)){v=/([0-9]+)\./.exec(c);y=1;v&&(y=parseInt(v[1],10));l(n,"ol",y);continue}if(n._listLevel){l(n,"ul",1);continue}t=null}else r=t,t=null}function g(t,i){var f,r={},e=o.dom.parseStyle(i);return n.each(e,function(n,u){switch(u){case"mso-list":f=/\w+ \w+([0-9]+)/i.exec(i);f&&(t._listLevel=parseInt(f[1],10));/Ignore/i.test(n)&&t.firstChild&&(t._listIgnore=!0,t.firstChild._listIgnore=!0);break;case"horiz-align":u="text-align";break;case"vert-align":u="vertical-align";break;case"font-color":case"mso-foreground":u="color";break;case"mso-background":case"mso-highlight":u="background";break;case"font-weight":case"font-style":return void("normal"!=n&&(r[u]=n));case"mso-element":if(/^(comment|comment-list)$/i.test(n))return void t.remove()}return 0===u.indexOf("mso-comment")?void t.remove():void(0!==u.indexOf("mso-")&&("all"==y||b&&b[u])&&(r[u]=n))}),/(bold)/i.test(r["font-weight"])&&(delete r["font-weight"],t.wrap(new u("b",1))),/(italic)/i.test(r["font-style"])&&(delete r["font-style"],t.wrap(new u("i",1))),r=o.dom.serializeStyle(r,t.name),r?r:null}var y,b,a=l.content,p,w,v,k;(a=a.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,""),a=a.replace(/<br class="?Apple-interchange-newline"?>/gi,""),y=c.paste_retain_style_properties,y&&(b=n.makeMap(y.split(/[, ]/))),c.paste_enable_default_filters!==!1&&e(l.content))&&(l.wordContent=!0,a=f.filter(a,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(n,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]),p=c.paste_word_valid_elements,p||(p="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody"),w=new i({valid_elements:p,valid_children:"-li[p]"}),n.each(w.elements,function(n){n.attributes["class"]||(n.attributes["class"]={},n.attributesOrder.push("class"));n.attributes.style||(n.attributes.style={},n.attributesOrder.push("style"))}),v=new t({},w),v.addAttributeFilter("style",function(n){for(var t,i=n.length;i--;)t=n[i],t.attr("style",g(t,t.attr("style"))),"span"==t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),v.addAttributeFilter("class",function(n){for(var t,i,r=n.length;r--;)t=n[r],i=t.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(i)&&t.remove(),t.attr("class",null)}),v.addNodeFilter("del",function(n){for(var t=n.length;t--;)n[t].remove()}),v.addNodeFilter("a",function(n){for(var i,t,r,u=n.length;u--;)if(i=n[u],t=i.attr("href"),r=i.attr("name"),t&&-1!=t.indexOf("#_msocom_"))i.remove();else if(t&&0===t.indexOf("file://")&&(t=t.split("#")[1],t&&(t="#"+t)),t||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){i.unwrap();continue}i.attr({href:t,name:r})}else i.unwrap()}),k=v.parse(a),c.paste_convert_word_fake_lists!==!1&&d(k),l.content=new r({},w).serialize(k))})}return o.isWordContent=e,o});i("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(n,t,i,r){return function(u){function f(n){u.on("BeforePastePreProcess",function(t){t.content=n(t.content)})}function e(n){var f,e;return i.isWordContent(n)?(f=[],t.each(u.schema.getBlockElements(),function(n,t){f.push(t)}),e=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+f.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g"),n=r.filter(n,[[e,"$1"]]),n=r.filter(n,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])):n}function o(n){var t,r,f;return i.isWordContent(n)?n:(t=u.settings.paste_webkit_styles,u.settings.paste_remove_styles_if_webkit===!1||"all"==t)?n:((t&&(t=t.split(/[, ]/)),t)?(r=u.dom,f=u.selection.getNode(),n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(n,i,u,e){var l=r.parseStyle(u,"span"),s={},o,h,c;if("none"===t)return i+e;for(o=0;o<t.length;o++)h=l[t[o]],c=r.getStyle(f,t[o],!0),/color/.test(t[o])&&(h=r.toHex(h),c=r.toHex(c)),c!=h&&(s[t[o]]=h);return s=r.serializeStyle(s,"span"),s?i+' style="'+s+'"'+e:i+e})):n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3"),n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(n,t,i,r){return t+' style="'+i+'"'+r}))}n.webkit&&f(o);n.ie&&f(e)}});i("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(n,t,i,r){var u;n.add("paste",function(n){function s(){"text"==e.pasteFormat?(this.active(!1),e.pasteFormat="html"):(e.pasteFormat="text",this.active(!0),u||(n.windowManager.alert("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),u=!0))}var e,f=this,o=n.settings;f.clipboard=e=new t(n);f.quirks=new r(n);f.wordFilter=new i(n);n.settings.paste_as_text&&(f.clipboard.pasteFormat="text");o.paste_preprocess&&n.on("PastePreProcess",function(n){o.paste_preprocess.call(f,f,n)});o.paste_postprocess&&n.on("PastePostProcess",function(n){o.paste_postprocess.call(f,f,n)});n.addCommand("mceInsertClipboardContent",function(n,t){t.content&&f.clipboard.pasteHtml(t.content);t.text&&f.clipboard.pasteText(t.text)});n.paste_block_drop&&n.on("dragend dragover draggesture dragdrop drop drag",function(n){n.preventDefault();n.stopPropagation()});n.settings.paste_data_images||n.on("drop",function(n){var t=n.dataTransfer;t&&t.files&&t.files.length>0&&n.preventDefault()});n.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:s,active:"text"==f.clipboard.pasteFormat});n.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:e.pasteFormat,onclick:s})})});e(["tinymce/pasteplugin/Utils"])}(this);tinymce.PluginManager.add("preview",function(n){var t=n.settings,i=!tinymce.Env.ie;n.addCommand("mcePreview",function(){n.windowManager.open({title:"Preview",width:parseInt(n.getParam("plugin_preview_width","650"),10),height:parseInt(n.getParam("plugin_preview_height","500"),10),html:'<iframe src="javascript:\'\'" frameborder="0"'+(i?' sandbox="allow-scripts"':"")+"><\/iframe>",buttons:{text:"Close",onclick:function(){this.parent().parent().close()}},onPostRender:function(){var e,o="",r,u,s,f;o+='<base href="'+n.documentBaseURI.getURI()+'">';tinymce.each(n.contentCSS,function(t){o+='<link type="text/css" rel="stylesheet" href="'+n.documentBaseURI.toAbsolute(t)+'">'});r=t.body_id||"tinymce";-1!=r.indexOf("=")&&(r=n.getParam("body_id","","hash"),r=r[n.id]||r);u=t.body_class||"";-1!=u.indexOf("=")&&(u=n.getParam("body_class","","hash"),u=u[n.id]||"");s=n.settings.directionality?' dir="'+n.settings.directionality+'"':"";(e="<!DOCTYPE html><html><head>"+o+'<\/head><body id="'+r+'" class="mce-content-body '+u+'"'+s+">"+n.getContent()+"<\/body><\/html>",i)?this.getEl("body").firstChild.src="data:text/html;charset=utf-8,"+encodeURIComponent(e):(f=this.getEl("body").firstChild.contentWindow.document,f.open(),f.write(e),f.close())}})});n.addButton("preview",{title:"Preview",cmd:"mcePreview"});n.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})});tinymce.PluginManager.add("print",function(n){n.addCommand("mcePrint",function(){n.getWin().print()});n.addButton("print",{title:"Print",cmd:"mcePrint"});n.addShortcut("Meta+P","","mcePrint");n.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print",shortcut:"Meta+P",context:"file"})});tinymce.PluginManager.add("save",function(n){function i(){var t;return t=tinymce.DOM.getParent(n.id,"form"),!n.getParam("save_enablewhendirty",!0)||n.isDirty()?(tinymce.triggerSave(),n.getParam("save_onsavecallback")?void(n.execCallback("save_onsavecallback",n)&&(n.startContent=tinymce.trim(n.getContent({format:"raw"})),n.nodeChanged())):void(t?(n.isNotDirty=!0,(!t.onsubmit||t.onsubmit())&&("function"==typeof t.submit?t.submit():n.windowManager.alert("Error: Form submit field collision.")),n.nodeChanged()):n.windowManager.alert("Error: No form element found."))):void 0}function r(){var t=tinymce.trim(n.startContent);return n.getParam("save_oncancelcallback")?void n.execCallback("save_oncancelcallback",n):(n.setContent(t),n.undoManager.clear(),void n.nodeChanged())}function t(){var t=this;n.on("nodeChange",function(){t.disabled(n.getParam("save_enablewhendirty",!0)&&!n.isDirty())})}n.addCommand("mceSave",i);n.addCommand("mceCancel",r);n.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:t});n.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:t});n.addShortcut("Meta+S","","mceSave")});!function(){function n(n,t,i,r,u){function a(n,t){var i,r;if(t=t||0,!n[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(i=n.index,t>0){if(r=n[t],!r)throw"Invalid capture group";i+=n[0].indexOf(r);n[0]=r}return[i,i+n[0].length,[n[0]]]}function v(n){var t;if(3===n.nodeType)return n.data;if(c[n.nodeName]&&!e[n.nodeName])return"";if(t="",(e[n.nodeName]||l[n.nodeName])&&(t+="\n"),n=n.firstChild)do t+=v(n);while(n=n.nextSibling);return t}function p(n,t,i){var o,s,v,h,a=[],u=0,r=n,f=t.shift(),y=0;n:for(;;){if((e[r.nodeName]||l[r.nodeName])&&u++,3===r.nodeType&&(!s&&r.length+u>=f[1]?(s=r,h=f[1]-u):o&&a.push(r),!o&&r.length+u>f[0]&&(o=r,v=f[0]-u),u+=r.length),o&&s){if(r=i({startNode:o,startNodeIndex:v,endNode:s,endNodeIndex:h,innerNodes:a,match:f[2],matchIndex:y}),u-=s.length-h,o=null,s=null,a=[],f=t.shift(),y++,!f)break}else{if((!c[r.nodeName]||e[r.nodeName])&&r.firstChild){r=r.firstChild;continue}if(r.nextSibling){r=r.nextSibling;continue}}for(;;){if(r.nextSibling){r=r.nextSibling;break}if(r.parentNode===n)break n;r=r.parentNode}}}function w(n){var t,i;return"function"!=typeof n?(i=n.nodeType?n:f.createElement(n),t=function(n,t){var r=i.cloneNode(!1);return r.setAttribute("data-mce-index",t),n&&r.appendChild(f.createTextNode(n)),r}):t=n,function(n){var o,s,i,u=n.startNode,e=n.endNode,h=n.matchIndex,r,l,c,v,y;if(u===e)return r=u,i=r.parentNode,n.startNodeIndex>0&&(o=f.createTextNode(r.data.substring(0,n.startNodeIndex)),i.insertBefore(o,r)),l=t(n.match[0],h),i.insertBefore(l,r),n.endNodeIndex<r.length&&(s=f.createTextNode(r.data.substring(n.endNodeIndex)),i.insertBefore(s,r)),r.parentNode.removeChild(r),l;o=f.createTextNode(u.data.substring(0,n.startNodeIndex));s=f.createTextNode(e.data.substring(n.endNodeIndex));for(var p=t(u.data.substring(n.startNodeIndex),h),w=[],a=0,b=n.innerNodes.length;b>a;++a)c=n.innerNodes[a],v=t(c.data,h),c.parentNode.replaceChild(v,c),w.push(v);return y=t(e.data.substring(0,n.endNodeIndex),h),i=u.parentNode,i.insertBefore(o,u),i.insertBefore(p,u),i.removeChild(u),i=e.parentNode,i.insertBefore(y,e),i.insertBefore(s,e),i.removeChild(e),y}}var s,h,f,e,c,l,o=[],y=0;if(f=t.ownerDocument,e=u.getBlockElements(),c=u.getWhiteSpaceElements(),l=u.getShortEndedElements(),h=v(t)){if(n.global)for(;s=n.exec(h);)o.push(a(s,r));else s=h.match(n),o.push(a(s,r));return o.length&&(y=o.length,p(t,o,w(i))),y}}function t(t){function f(){function e(){n.statusbar.find("#next").disabled(!u(r+1).length);n.statusbar.find("#prev").disabled(!u(r-1).length)}function o(){tinymce.ui.MessageBox.alert("Could not find the specified string.",function(){n.find("#find")[0].focus()})}var f={},n=tinymce.ui.Factory.create({type:"window",layout:"flex",pack:"center",align:"center",onClose:function(){t.focus();i.done()},onSubmit:function(t){var l,h,s,c;return t.preventDefault(),h=n.find("#case").checked(),c=n.find("#words").checked(),s=n.find("#find").value(),s.length?f.text==s&&f.caseState==h&&f.wholeWord==c?0===u(r+1).length?void o():(i.next(),void e()):(l=i.find(s,h,c),l||o(),n.statusbar.items().slice(1).disabled(0===l),e(),void(f={text:s,caseState:h,wholeWord:c})):(i.done(!1),void n.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",onclick:function(){n.submit()}},{text:"Replace",disabled:!0,onclick:function(){i.replace(n.find("#replace").value())||(n.statusbar.items().slice(1).disabled(!0),r=-1,f={})}},{text:"Replace all",disabled:!0,onclick:function(){i.replace(n.find("#replace").value(),!0,!0);n.statusbar.items().slice(1).disabled(!0);f={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){i.prev();e()}},{text:"Next",name:"next",disabled:!0,onclick:function(){i.next();e()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:t.selection.getNode().src},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}}).renderTo().reflow()}function e(n){var t=n.getAttribute("data-mce-index");return"number"==typeof t?""+t:t}function c(r){var f,u;return u=t.dom.create("span",{"data-mce-bogus":1}),u.className="mce-match-marker",f=t.getBody(),i.done(!1),n(r,f,u,!1,t.schema)}function s(n){var t=n.parentNode;n.firstChild&&t.insertBefore(n.firstChild,n);n.parentNode.removeChild(n)}function u(n){var i,f=[],r,u;if(i=tinymce.toArray(t.getBody().getElementsByTagName("span")),i.length)for(r=0;r<i.length;r++)u=e(i[r]),null!==u&&u.length&&u===n.toString()&&f.push(i[r]);return f}function o(n){var i=r,e=t.dom,f;return n=n!==!1,n?i++:i--,e.removeClass(u(r),"mce-match-marker-selected"),f=u(i),f.length?(e.addClass(u(i),"mce-match-marker-selected"),t.selection.scrollIntoView(f[0]),i):-1}function h(n){n.parentNode.removeChild(n)}var i=this,r=-1;i.init=function(n){n.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:f,separator:"before",context:"edit"});n.addButton("searchreplace",{tooltip:"Find and replace",shortcut:"Meta+F",onclick:f});n.addCommand("SearchReplace",f);n.shortcuts.add("Meta+F","",f)};i.find=function(n,t,i){n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");n=i?"\\b"+n+"\\b":n;var u=c(new RegExp(n,t?"g":"gi"));return u&&(r=-1,r=o(!0)),u};i.next=function(){var n=o(!0);-1!==n&&(r=n)};i.prev=function(){var n=o(!1);-1!==n&&(r=n)};i.replace=function(n,f,o){var c,l,b,v,y,w,p=r,a;for(f=f!==!1,b=t.getBody(),l=tinymce.toArray(b.getElementsByTagName("span")),c=0;c<l.length;c++)if(a=e(l[c]),null!==a&&a.length)if(v=y=parseInt(a,10),o||v===r){for(n.length?(l[c].firstChild.nodeValue=n,s(l[c])):h(l[c]);l[++c];)if(v=e(l[c]),null!==a&&a.length){if(v!==y){c--;break}h(l[c])}f&&p--}else y>r&&l[c].setAttribute("data-mce-index",y-1);return t.undoManager.add(),r=p,f?(w=u(p+1).length>0,i.next()):(w=u(p-1).length>0,i.prev()),!o&&w};i.done=function(n){for(var o,h,c,f,u=tinymce.toArray(t.getBody().getElementsByTagName("span")),i=0;i<u.length;i++)c=e(u[i]),null!==c&&c.length&&(c===r.toString()&&(o||(o=u[i].firstChild),h=u[i].firstChild),s(u[i]));if(o&&h)return f=t.dom.createRng(),f.setStart(o,0),f.setEnd(h,h.data.length),n!==!1&&t.selection.setRng(f),f}}tinymce.PluginManager.add("searchreplace",t)}();!function(n,t){"use strict";function u(n,t){for(var u,e=[],r=0;r<n.length;++r){if(u=i[n[r]]||f(n[r]),!u)throw"module definition dependecy not found: "+n[r];e.push(u)}t.apply(null,e)}function r(n,r,f){if("string"!=typeof n)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(f===t)throw"invalid module definition, definition function must be specified";u(r,function(){i[n]=f.apply(null,arguments)})}function f(t){for(var i=n,u=t.split(/[.\/]/),r=0;r<u.length;++r){if(!i[u[r]])return;i=i[u[r]]}return i}function e(r){for(var o=0;o<r.length;o++){for(var f=n,s=r[o],u=s.split(/[.\/]/),e=0;e<u.length-1;++e)f[u[e]]===t&&(f[u[e]]={}),f=f[u[e]];f[u[u.length-1]]=i[s]}}var i={};r("tinymce/spellcheckerplugin/DomTextMatcher",[],function(){return function(n,t){function p(n,t){if(!n[0])throw"findAndReplaceDOMText cannot handle zero-length matches";return{start:n.index,end:n.index+n[0].length,text:n[0],data:t}}function h(n){var t;if(3===n.nodeType)return n.data;if(o[n.nodeName]&&!u[n.nodeName])return"";if(t="",(u[n.nodeName]||s[n.nodeName])&&(t+="\n"),n=n.firstChild)do t+=h(n);while(n=n.nextSibling);return t}function w(n,t,i){var h,c,v,l,f,a=[],e=0,r=n,y=0;t=t.slice(0);t.sort(function(n,t){return n.start-t.start});f=t.shift();n:for(;;){if((u[r.nodeName]||s[r.nodeName])&&e++,3===r.nodeType&&(!c&&r.length+e>=f.end?(c=r,l=f.end-e):h&&a.push(r),!h&&r.length+e>f.start&&(h=r,v=f.start-e),e+=r.length),h&&c){if(r=i({startNode:h,startNodeIndex:v,endNode:c,endNodeIndex:l,innerNodes:a,match:f.text,matchIndex:y}),e-=c.length-l,h=null,c=null,a=[],f=t.shift(),y++,!f)break}else{if((!o[r.nodeName]||u[r.nodeName])&&r.firstChild){r=r.firstChild;continue}if(r.nextSibling){r=r.nextSibling;continue}}for(;;){if(r.nextSibling){r=r.nextSibling;break}if(r.parentNode===n)break n;r=r.parentNode}}}function b(n){function t(t,r){var u=i[r],f;return u.stencil||(u.stencil=n(u)),f=u.stencil.cloneNode(!1),f.setAttribute("data-mce-index",r),t&&f.appendChild(y.doc.createTextNode(t)),f}return function(n){var e,o,i,u=n.startNode,f=n.endNode,s=n.matchIndex,h=y.doc,r,l,c,v,p;if(u===f)return r=u,i=r.parentNode,n.startNodeIndex>0&&(e=h.createTextNode(r.data.substring(0,n.startNodeIndex)),i.insertBefore(e,r)),l=t(n.match,s),i.insertBefore(l,r),n.endNodeIndex<r.length&&(o=h.createTextNode(r.data.substring(n.endNodeIndex)),i.insertBefore(o,r)),r.parentNode.removeChild(r),l;e=h.createTextNode(u.data.substring(0,n.startNodeIndex));o=h.createTextNode(f.data.substring(n.endNodeIndex));for(var w=t(u.data.substring(n.startNodeIndex),s),b=[],a=0,k=n.innerNodes.length;k>a;++a)c=n.innerNodes[a],v=t(c.data,s),c.parentNode.replaceChild(v,c),b.push(v);return p=t(f.data.substring(0,n.endNodeIndex),s),i=u.parentNode,i.insertBefore(e,u),i.insertBefore(w,u),i.removeChild(u),i=f.parentNode,i.insertBefore(p,f),i.insertBefore(o,f),i.removeChild(f),p}}function k(n){var t=n.parentNode;t.insertBefore(n.firstChild,n);n.parentNode.removeChild(n)}function e(t){var f=n.getElementsByTagName("*"),e=[],i,u,r;for(t="number"==typeof t?""+t:null,i=0;i<f.length;i++)u=f[i],r=u.getAttribute("data-mce-index"),null!==r&&r.length&&(r===t||null===t)&&e.push(u);return e}function f(n){for(var t=i.length;t--;)if(i[t]===n)return t;return-1}function d(n){var t=[];return c(function(i,r){n(i,r)&&t.push(i)}),i=t,this}function c(n){for(var t=0,r=i.length;r>t&&n(i[t],t)!==!1;t++);return this}function g(t){return i.length&&w(n,i,b(t)),this}function nt(n,t){if(r&&n.global)for(;v=n.exec(r);)i.push(p(v,t));return this}function l(n){for(var i=e(n?f(n):null),t=i.length;t--;)k(i[t]);return this}function tt(n){return i[n.getAttribute("data-mce-index")]}function it(n){return e(f(n))[0]}function rt(n,t,u){return i.push({start:n,end:n+t,text:r.substr(n,t),data:u}),this}function a(n){var i=e(f(n)),r=t.dom.createRng();return r.setStartBefore(i[0]),r.setEndAfter(i[i.length-1]),r}function ut(n,i){var r=a(n);return r.deleteContents(),i.length>0&&r.insertNode(t.dom.doc.createTextNode(i)),r}function ft(){return i.splice(0,i.length),l(),this}var v,r,u,o,s,i=[],y=t.dom;return u=t.schema.getBlockElements(),o=t.schema.getWhiteSpaceElements(),s=t.schema.getShortEndedElements(),r=h(n),{text:r,matches:i,each:c,filter:d,reset:ft,matchFromElement:tt,elementFromMatch:it,find:nt,add:rt,wrap:g,unwrap:l,replace:ut,rangeFromMatch:a,indexOf:f}}});r("tinymce/spellcheckerplugin/Plugin",["tinymce/spellcheckerplugin/DomTextMatcher","tinymce/PluginManager","tinymce/util/Tools","tinymce/ui/Menu","tinymce/dom/DOMUtils","tinymce/util/XHR","tinymce/util/URI","tinymce/util/JSON"],function(n,t,i,r,u,f,e,o){t.add("spellchecker",function(t,s){function y(){return v.textMatcher||(v.textMatcher=new n(t.getBody(),t)),v.textMatcher}function ft(n,t){var r=[];return i.each(t,function(n){r.push({selectable:!0,text:n.name,data:n.value})}),r}function et(n){for(var t in n)return!1;return!0}function ot(n,f){var o=[],c=rt[n];i.each(c,function(n){o.push({text:n,onclick:function(){t.insertContent(t.dom.encode(n));t.dom.remove(f);p()}})});o.push({text:"-"});ut&&o.push({text:"Add to Dictionary",onclick:function(){ht(n,f)}});o.push.apply(o,[{text:"Ignore",onclick:function(){nt(n,f)}},{text:"Ignore all",onclick:function(){nt(n,f,!0)}}]);l=new r({items:o,context:"contextmenu",onautohide:function(n){-1!=n.target.className.indexOf("spellchecker")&&n.preventDefault()},onhide:function(){l.remove();l=null}});l.renderTo(document.body);var h=u.DOM.getPos(t.getContentAreaContainer()),s=t.dom.getPos(f[0]),e=t.dom.getRoot();"BODY"==e.nodeName?(s.x-=e.ownerDocument.documentElement.scrollLeft||e.scrollLeft,s.y-=e.ownerDocument.documentElement.scrollTop||e.scrollTop):(s.x-=e.scrollLeft,s.y-=e.scrollTop);h.x+=s.x;h.y+=s.y;l.moveTo(h.x,h.y+f[0].offsetHeight)}function d(){return t.getParam("spellchecker_wordchar_pattern")||new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`§©«®±¶·¸»¼½¾¿×÷¤”“„    ]+',"g")}function st(n,t,r,u){var c={method:n},l="";"spellcheck"==n&&(c.text=t,c.lang=h.spellchecker_language);"addToDictionary"==n&&(c.word=t);i.each(c,function(n,t){l&&(l+="&");l+=t+"="+encodeURIComponent(n)});f.send({url:new e(s).toAbsolute(h.spellchecker_rpc_url),type:"post",content_type:"application/x-www-form-urlencoded",data:l,success:function(n){n=o.parse(n);n?n.error?u(n.error):r(n):u("Sever response wasn't proper JSON.")},error:function(n,t){u("Spellchecker request error: "+t.status)}})}function g(n,t,i,r){var u=h.spellchecker_callback||st;u.call(v,n,t,i,r)}function b(){function n(n){t.windowManager.alert(n);t.setProgressState(!1);w()}return c?void w():(w(),t.setProgressState(!0),g("spellcheck",y().text,it,n),void t.focus())}function p(){t.dom.select("span.mce-spellchecker-word").length||w()}function ht(n,i){t.setProgressState(!0);g("addToDictionary",n,function(){t.setProgressState(!1);t.dom.remove(i,!0);p()},function(n){t.windowManager.alert(n);t.setProgressState(!1)})}function nt(n,r,u){t.selection.collapse();u?i.each(t.dom.select("span.mce-spellchecker-word"),function(i){i.getAttribute("data-mce-word")==n&&t.dom.remove(i,!0)}):t.dom.remove(r,!0);p()}function w(){y().reset();v.textMatcher=null;c&&(c=!1,t.fire("SpellcheckEnd"))}function tt(n){var t=n.getAttribute("data-mce-index");return"number"==typeof t?""+t:t}function ct(n){var r,e=[],u,f;if(r=i.toArray(t.getBody().getElementsByTagName("span")),r.length)for(u=0;u<r.length;u++)f=tt(r[u]),null!==f&&f.length&&f===n.toString()&&e.push(r[u]);return e}function lt(n){var t=h.spellchecker_language;n.control.items().each(function(n){n.active(n.settings.data===t)})}function it(n){var i;return n.words?(ut=!!n.dictionary,i=n.words):i=n,t.setProgressState(!1),et(i)?(t.windowManager.alert("No misspellings found"),void(c=!1)):(rt=i,y().find(d()).filter(function(n){return!!i[n.text]}).wrap(function(n){return t.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":n.text})}),c=!0,void t.fire("SpellcheckStart"))}var k,rt,c,l,ut,v=this,h=t.settings,at=h.spellchecker_languages||"English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv",a;k=ft("Language",i.map(at.split(","),function(n){return n=n.split("="),{name:n[0],value:n[1]}}));t.on("click",function(n){var u=n.target,i,r;"mce-spellchecker-word"==u.className&&(n.preventDefault(),i=ct(tt(u)),i.length>0&&(r=t.dom.createRng(),r.setStartBefore(i[0]),r.setEndAfter(i[i.length-1]),t.selection.setRng(r),ot(u.getAttribute("data-mce-word"),i)))});t.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:b,selectable:!0,onPostRender:function(){var n=this;n.active(c);t.on("SpellcheckStart SpellcheckEnd",function(){n.active(c)})}});a={tooltip:"Spellcheck",onclick:b,onPostRender:function(){var n=this;t.on("SpellcheckStart SpellcheckEnd",function(){n.active(c)})}};k.length>1&&(a.type="splitbutton",a.menu=k,a.onshow=lt,a.onselect=function(n){h.spellchecker_language=n.control.settings.data});t.addButton("spellchecker",a);t.addCommand("mceSpellCheck",b);t.on("remove",function(){l&&(l.remove(),l=null)});t.on("change",p);this.getTextMatcher=y;this.getWordCharPattern=d;this.markErrors=it;this.getLanguage=function(){return h.spellchecker_language};h.spellchecker_language=h.spellchecker_language||h.language||"en"})});e(["tinymce/spellcheckerplugin/DomTextMatcher"])}(this);tinymce.PluginManager.add("tabfocus",function(n){function r(n){9!==n.keyCode||n.ctrlKey||n.altKey||n.metaKey||n.preventDefault()}function i(i){function c(f){function o(n){return"BODY"===n.nodeName||"hidden"!=n.type&&"none"!=n.style.display&&"hidden"!=n.style.visibility&&o(n.parentNode)}function h(n){return/INPUT|TEXTAREA|BUTTON/.test(n.tagName)&&tinymce.get(i.id)&&-1!=n.tabIndex&&o(n)}if(r=t.select(":input:enabled,*[tabindex]:not(iframe)"),u(r,function(t,i){if(t.id==n.id)return(s=i,!1)}),f>0){for(e=s+1;e<r.length;e++)if(h(r[e]))return r[e]}else for(e=s-1;e>=0;e--)if(h(r[e]))return r[e];return null}var s,r,o,e,h;9!==i.keyCode||i.ctrlKey||i.altKey||i.metaKey||i.isDefaultPrevented()||!(o=f(n.getParam("tab_focus",n.getParam("tabfocus_elements",":prev,:next"))),1==o.length&&(o[1]=o[0],o[0]=":prev"),r=i.shiftKey?":prev"==o[0]?c(-1):t.get(o[0]):":next"==o[1]?c(1):t.get(o[1]))||(h=tinymce.get(r.id||r.name),r.id&&h?h.focus():window.setTimeout(function(){tinymce.Env.webkit||window.focus();r.focus()},10),i.preventDefault())}var t=tinymce.DOM,u=tinymce.each,f=tinymce.explode;n.on("init",function(){n.inline&&tinymce.DOM.setAttrib(n.getBody(),"tabIndex",null);n.on("keyup",r);tinymce.Env.gecko?n.on("keypress keydown",i):n.on("keydown",i)})});!function(n,t){"use strict";function u(n,t){for(var u,e=[],i=0;i<n.length;++i){if(u=r[n[i]]||f(n[i]),!u)throw"module definition dependecy not found: "+n[i];e.push(u)}t.apply(null,e)}function i(n,i,f){if("string"!=typeof n)throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(f===t)throw"invalid module definition, definition function must be specified";u(i,function(){r[n]=f.apply(null,arguments)})}function f(t){for(var i=n,u=t.split(/[.\/]/),r=0;r<u.length;++r){if(!i[u[r]])return;i=i[u[r]]}return i}var r={};i("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env"],function(n,i){function u(n,t){return parseInt(n.getAttribute(t)||1,10)}var r=n.each;return function(f,e){function d(){var n=0;o=[];b=0;r(["thead","tbody","tfoot"],function(t){var i=s.select("> "+t+" tr",e);r(i,function(i,f){f+=n;r(s.select("> td, > th",i),function(n,i){var e,r,s,h;if(o[f])for(;o[f][i];)i++;for(s=u(n,"rowspan"),h=u(n,"colspan"),r=f;f+s>r;r++)for(o[r]||(o[r]=[]),e=i;i+h>e;e++)o[r][e]={part:t,real:r==f&&e==i,elm:n,rowspan:s,colspan:h};b=Math.max(b,i+1)})});n+=i.length})}function g(n,t){return n=n.cloneNode(t),n.removeAttribute("id"),n}function k(n,t){var i;return i=o[t],i?i[n]:void 0}function c(n,t,i){n&&(i=parseInt(i,10),1===i?n.removeAttribute(t,1):n.setAttribute(t,i,1))}function w(n){return n&&(s.hasClass(n.elm,"mce-item-selected")||n==p)}function nt(){var n=[];return r(e.rows,function(t){r(t.cells,function(i){if(s.hasClass(i,"mce-item-selected")||p&&i==p.elm)return(n.push(t),!1)})}),n}function ut(){var n=s.createRng();n.setStartAfter(e);n.setEndAfter(e);a.setRng(n);s.remove(e)}function y(t){var u,e={};return f.settings.table_clone_elements!==!1&&(e=n.makeMap((f.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),n.walk(t,function(n){var f;if(3==n.nodeType)return(r(s.getParents(n.parentNode,null,t).reverse(),function(n){e[n.nodeName]&&(n=g(n,!1),u?f&&f.appendChild(n):u=f=n,f=n)}),f&&(f.innerHTML=i.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1)},"childNodes"),t=g(t,!1),c(t,"rowSpan",1),c(t,"colSpan",1),u?t.appendChild(u):(!i.ie||i.ie>10)&&(t.innerHTML='<br data-mce-bogus="1" />'),t}function tt(){var n,t=s.createRng();return r(s.select("tr",e),function(n){0===n.cells.length&&s.remove(n)}),0===s.select("tr",e).length?(t.setStartBefore(e),t.setEndBefore(e),a.setRng(t),void s.remove(e)):(r(s.select("thead,tbody,tfoot",e),function(n){0===n.rows.length&&s.remove(n)}),d(),void(h&&(n=o[Math.min(o.length-1,h.y)],n&&(a.select(n[Math.min(n.length-1,h.x)].elm,!0),a.collapse(!0)))))}function it(n,t,i,r){for(var e,f,c,u=o[t][n].elm.parentNode,h=1;i>=h;h++)if(u=s.getNext(u,"tr")){for(e=n;e>=0;e--)if(c=o[t+h][e].elm,c.parentNode==u){for(f=1;r>=f;f++)s.insertAfter(y(c),c);break}if(-1==e)for(f=1;r>=f;f++)u.insertBefore(y(u.cells[0]),u.cells[0])}}function rt(){r(o,function(n,t){r(n,function(n,i){var r,f,e;if(w(n)&&(n=n.elm,r=u(n,"colspan"),f=u(n,"rowspan"),r>1||f>1)){for(c(n,"rowSpan",1),c(n,"colSpan",1),e=0;r-1>e;e++)s.insertAfter(y(n),n);it(i,t,f-1,r)}})})}function ft(t,i,u){var it,e,a,b,g,nt,y,f,ut,p,ft;if(t?(it=v(t),e=it.x,a=it.y,b=e+(i-1),g=a+(u-1)):(h=l=null,r(o,function(n,t){r(n,function(n,i){w(n)&&(h||(h={x:i,y:t}),l={x:i,y:t})})}),h&&(e=h.x,a=h.y,b=l.x,g=l.y)),f=k(e,a),ut=k(b,g),f&&ut&&f.part==ut.part){for(rt(),d(),f=k(e,a).elm,c(f,"colSpan",b-e+1),c(f,"rowSpan",g-a+1),y=a;g>=y;y++)for(nt=e;b>=nt;nt++)o[y]&&o[y][nt]&&(t=o[y][nt].elm,t!=f&&(p=n.grep(t.childNodes),r(p,function(n){f.appendChild(n)}),p.length&&(p=n.grep(f.childNodes),ft=0,r(p,function(n){"BR"==n.nodeName&&s.getAttrib(n,"data-mce-bogus")&&ft++<p.length-1&&f.removeChild(n)})),s.remove(t)));tt()}}function et(n){var i,f,b,e,l,a,v,p,h;if(r(o,function(t,u){return r(t,function(t){if(w(t)&&(t=t.elm,l=t.parentNode,a=g(l,!1),i=u,n))return!1}),n?!i:void 0}),i!==t){for(e=0;e<o[0].length;e++)if(o[i][e]&&(f=o[i][e].elm,f!=b)){if(n){if(i>0&&o[i-1][e]&&(p=o[i-1][e].elm,h=u(p,"rowSpan"),h>1)){c(p,"rowSpan",h+1);continue}}else if(h=u(f,"rowspan"),h>1){c(f,"rowSpan",h+1);continue}v=y(f);c(v,"colSpan",f.colSpan);a.appendChild(v);b=f}a.hasChildNodes()&&(n?l.parentNode.insertBefore(a,l):s.insertAfter(a,l))}}function ot(n){var t,i;r(o,function(i){return r(i,function(i,r){if(w(i)&&(t=r,n))return!1}),n?!t:void 0});r(o,function(r,f){var e,h,o;r[t]&&(e=r[t].elm,e!=i&&(o=u(e,"colspan"),h=u(e,"rowspan"),1==o?n?(e.parentNode.insertBefore(y(e),e),it(t,f,h-1,o)):(s.insertAfter(y(e),e),it(t,f,h-1,o)):c(e,"colSpan",e.colSpan+1),i=e))})}function st(){var t=[];r(o,function(i){r(i,function(i,f){w(i)&&-1===n.inArray(t,f)&&(r(o,function(n){var t,i=n[f].elm;t=u(i,"colSpan");t>1?c(i,"colSpan",t-1):s.remove(i)}),t.push(f))})});tt()}function ht(){function t(n){var t,i;r(n.cells,function(n){var i=u(n,"rowSpan");i>1&&(c(n,"rowSpan",i-1),t=v(n),it(t.x,t.y,1,1))});t=v(n.cells[0]);r(o[t.y],function(n){var t;n=n.elm;n!=i&&(t=u(n,"rowSpan"),1>=t?s.remove(n):c(n,"rowSpan",t-1),i=n)})}var n;n=nt();r(n.reverse(),function(n){t(n)});tt()}function ct(){var n=nt();return s.remove(n),tt(),n}function lt(){var n=nt();return r(n,function(t,i){n[i]=g(t,!0)}),n}function at(n,t){var f=nt(),i=f[t?0:f.length-1],u=i.cells.length;n&&(r(o,function(n){var t;return u=0,r(n,function(n){n.real&&(u+=n.colspan);n.elm.parentNode==i&&(t=1)}),t?!1:void 0}),t||n.reverse(),r(n,function(n){for(var e,f=n.cells.length,r=0;f>r;r++)e=n.cells[r],c(e,"colSpan",1),c(e,"rowSpan",1);for(r=f;u>r;r++)n.appendChild(y(n.cells[f-1]));for(r=u;f>r;r++)s.remove(n.cells[r]);t?i.parentNode.insertBefore(n,i):s.insertAfter(n,i)}),s.removeClass(s.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))}function v(n){var t;return r(o,function(i,u){return r(i,function(i,r){if(i.elm==n)return(t={x:r,y:u},!1)}),!t}),t}function vt(n){h=v(n)}function yt(){var n,t;return n=t=0,r(o,function(i,u){r(i,function(i,r){var f,e;w(i)&&(i=o[u][r],r>n&&(n=r),u>t&&(t=u),i.real&&(f=i.colspan-1,e=i.rowspan-1,f&&r+f>n&&(n=r+f),e&&u+e>t&&(t=u+e)))})}),{x:n,y:t}}function pt(n){var r,u,y,p,f,e,c,a,t,i;if(l=v(n),h&&l){for(r=Math.min(h.x,l.x),u=Math.min(h.y,l.y),y=Math.max(h.x,l.x),p=Math.max(h.y,l.y),f=y,e=p,i=u;e>=i;i++)n=o[i][r],n.real||r-(n.colspan-1)<r&&(r-=n.colspan-1);for(t=r;f>=t;t++)n=o[u][t],n.real||u-(n.rowspan-1)<u&&(u-=n.rowspan-1);for(i=u;p>=i;i++)for(t=r;y>=t;t++)n=o[i][t],n.real&&(c=n.colspan-1,a=n.rowspan-1,c&&t+c>f&&(f=t+c),a&&i+a>e&&(e=i+a));for(s.removeClass(s.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),i=u;e>=i;i++)for(t=r;f>=t;t++)o[i][t]&&s.addClass(o[i][t].elm,"mce-item-selected")}}function wt(n,t){var u,r,i;u=v(n);r=u.y*b+u.x;do{if(r+=t,i=k(r%b,Math.floor(r/b)),!i)break;if(i.elm!=n)return a.select(i.elm,!0),s.isEmpty(i.elm)&&a.collapse(!0),!0}while(i.elm==n);return!1}var o,b,h,l,p,a=f.selection,s=a.dom;e=e||s.getParent(a.getStart(),"table");d();p=s.getParent(a.getStart(),"th,td");p&&(h=v(p),l=yt(),p=k(h.x,h.y));n.extend(this,{deleteTable:ut,split:rt,merge:ft,insertRow:et,insertCol:ot,deleteCols:st,deleteRows:ht,cutRows:ct,copyRows:lt,pasteRows:at,getPos:v,setStartCell:vt,setEndCell:pt,moveRelIdx:wt,refresh:d})}});i("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools"],function(n,t,i){function r(n,t){return parseInt(n.getAttribute(t)||1,10)}var u=i.each;return function(i){function o(){function t(t){function h(n,r){var e=n?"previousSibling":"nextSibling",u=i.dom.getParent(r,"tr"),o=u[e],f;if(o)return c(i,r,o,n),t.preventDefault(),!0;var s=i.dom.getParent(u,"table"),h=u.parentNode,a=h.nodeName.toLowerCase();return("tbody"===a||a===(n?"tfoot":"thead"))&&(f=l(n,s,h,"tbody"),null!==f)?v(n,f,r):y(n,u,e,s)}function l(n,t,r,u){var f=i.dom.select(">"+u,t),e=f.indexOf(r),o;return n&&0===e||!n&&e===f.length-1?a(n,t):-1===e?(o="thead"===r.tagName.toLowerCase()?0:f.length-1,f[o]):f[e+(n?-1:1)]}function a(n,t){var u=n?"thead":"tfoot",r=i.dom.select(">"+u,t);return 0!==r.length?r[0]:null}function v(n,r,u){var e=f(r,n);return e&&c(i,u,e,n),t.preventDefault(),!0}function y(n,r,u,o){var c=o[u],s,l;return c?(e(c),!0):(s=i.dom.getParent(o,"td,th"),s)?h(n,s,t):(l=f(r,!n),e(l),t.preventDefault(),!1)}function f(n,t){var r=n&&n[t?"lastChild":"firstChild"];return r&&"BR"===r.nodeName?i.dom.getParent(r,"td,th"):r}function e(n){i.selection.setCursorLocation(n,0)}function p(){return o==n.UP||o==n.DOWN}function w(n){var t=n.selection.getNode(),i=n.dom.getParent(t,"tr");return null!==i}function b(n){for(var i=0,t=n;t.previousSibling;)t=t.previousSibling,i+=r(t,"colspan");return i}function k(n,t){var i=0,f=0;return u(n.children,function(n,u){return i+=r(n,"colspan"),f=u,i>t?!1:void 0}),f}function c(n,t,r,u){var s=b(i.dom.getParent(t,"td,th")),h=k(r,s),o=r.childNodes[h],c=f(o,u);e(c||o)}function d(n){var u=i.selection.getNode(),t=i.dom.getParent(u,"td,th"),r=i.dom.getParent(n,"td,th");return t&&t!==r&&g(t,r)}function g(n,t){return i.dom.getParent(n,"TABLE")===i.dom.getParent(t,"TABLE")}var o=t.keyCode,s;p()&&w(i)&&(s=i.selection.getNode(),setTimeout(function(){d(s)&&h(!t.shiftKey&&o===n.UP,s,t)},0))}i.on("KeyDown",function(n){t(n)})}function f(){function n(n,t){var i,u=t.ownerDocument,r=u.createRange();return r.setStartBefore(t),r.setEnd(n.endContainer,n.endOffset),i=u.createElement("body"),i.appendChild(r.cloneContents()),0===i.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}i.on("KeyDown",function(t){var r,u,f=i.dom;(37==t.keyCode||38==t.keyCode)&&(r=i.selection.getRng(),u=f.getParent(r.startContainer,"table"),u&&i.getBody().firstChild==u&&n(r,u)&&(r=f.createRng(),r.setStartBefore(u),r.setEndBefore(u),i.selection.setRng(r),t.preventDefault()))})}function e(){i.on("KeyDown SetContent VisualAid",function(){for(var n=i.getBody().lastChild;n;n=n.previousSibling)if(3==n.nodeType){if(n.nodeValue.length>0)break}else if(1==n.nodeType&&("BR"==n.tagName||!n.getAttribute("data-mce-bogus")))break;n&&"TABLE"==n.nodeName&&(i.settings.forced_root_block?i.dom.add(i.getBody(),i.settings.forced_root_block,i.settings.forced_root_block_attrs,t.ie&&t.ie<11?"&nbsp;":'<br data-mce-bogus="1" />'):i.dom.add(i.getBody(),"br",{"data-mce-bogus":"1"}))});i.on("PreProcess",function(n){var t=n.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||" "==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&i.dom.remove(t)})}function s(){function t(n,t,i,r){var u,f,e,o=n.dom.getParent(t.startContainer,"TABLE");return o&&(u=o.parentNode),f=t.startContainer.nodeType==3&&0===t.startOffset&&0===t.endOffset&&r&&("TR"==i.nodeName||i==u),e=("TD"==i.nodeName||"TH"==i.nodeName)&&!r,f||e}function n(){var r=i.selection.getRng(),f=i.selection.getNode(),u=i.dom.getParent(r.startContainer,"TD,TH"),n;if(t(i,r,f,u)){for(u||(u=f),n=u.lastChild;n.lastChild;)n=n.lastChild;3==n.nodeType&&(r.setEnd(n,n.data.length),i.selection.setRng(r))}}i.on("KeyDown",function(){n()});i.on("MouseDown",function(t){2!=t.button&&n()})}function h(){i.on("keydown",function(t){var r,u,f;if((t.keyCode==n.DELETE||t.keyCode==n.BACKSPACE)&&!t.isDefaultPrevented()&&(r=i.dom.getParent(i.selection.getStart(),"table"),r)){for(u=i.dom.select("td,th",r),f=u.length;f--;)if(!i.dom.hasClass(u[f],"mce-item-selected"))return;t.preventDefault();i.execCommand("mceTableDelete")}})}h();t.webkit&&(o(),s());t.gecko&&(f(),e());t.ie>10&&(f(),e())}});i("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(n,t,i){return function(r){function h(n){r.getBody().style.webkitUserSelect="";(n||c)&&(r.dom.removeClass(r.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),c=!1)}function l(t){var h,l,i=t.target;if(!s&&f&&(u||i!=f)&&("TD"==i.nodeName||"TH"==i.nodeName)){l=e.getParent(i,"table");l==o&&(u||(u=new n(r,l),u.setStartCell(f),r.getBody().style.webkitUserSelect="none"),u.setEndCell(i),c=!0);h=r.selection.getSel();try{h.removeAllRanges?h.removeAllRanges():h.empty()}catch(a){}t.preventDefault()}}var u,f,o,s,e=r.dom,c=!0;return r.on("MouseDown",function(n){2==n.button||s||(h(),f=e.getParent(n.target,"td,th"),o=e.getParent(f,"table"))}),r.on("mouseover",l),r.on("remove",function(){e.unbind(r.getDoc(),"mouseover",l)}),r.on("MouseUp",function(){function c(n,r){var u=new t(n,n);do{if(3==n.nodeType&&0!==i.trim(n.nodeValue).length)return void(r?s.setStart(n,0):s.setEnd(n,n.nodeValue.length));if("BR"==n.nodeName)return void(r?s.setStartBefore(n):s.setEndBefore(n))}while(n=r?u.next():u.prev())}var s,h,l,n,a,v=r.selection;if(f){if(u&&(r.getBody().style.webkitUserSelect=""),h=e.select("td.mce-item-selected,th.mce-item-selected"),h.length>0){s=e.createRng();n=h[0];s.setStartBefore(n);s.setEndAfter(n);c(n,1);l=new t(n,e.getParent(h[0],"table"));do if("TD"==n.nodeName||"TH"==n.nodeName){if(!e.hasClass(n,"mce-item-selected"))break;a=n}while(n=l.next());c(a);v.setRng(s)}r.nodeChanged();f=u=o=null}}),r.on("KeyUp Drop SetContent",function(n){h("setcontent"==n.type);f=u=o=null;s=!1}),r.on("ObjectResizeStart ObjectResized",function(n){s="objectresized"!=n.type}),{clear:h}}});i("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(n,t){var i=n.each;return function(r){function a(){var n=r.settings.color_picker_callback;if(n)return function(){var t=this;n.call(r,function(n){t.value(n).fire("change")},t.value())}}function s(n){return{title:"Advanced",type:"form",defaults:{onchange:function(){o(n,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:a()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:a()}]}]}}function u(n){return n?n.replace(/px$/,""):""}function f(n){return/^[0-9]+$/.test(n)&&(n+="px"),n}function h(n){i("left center right".split(" "),function(t){r.formatter.remove("align"+t,{},n)})}function v(n){i("top middle bottom".split(" "),function(t){r.formatter.remove("valign"+t,{},n)})}function c(t,i,r){function u(t,r){return r=r||[],n.each(t,function(n){var t={text:n.text||n.title};n.menu?t.menu=u(n.menu):(t.value=n.value,i&&i(t));r.push(t)}),r}return u(t,r||[])}function o(n,t,i){var u=t.toJSON(),r=n.parseStyle(u.style);i?(t.find("#borderColor").value(r["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(r["background-color"]||"")[0].fire("change")):(r["border-color"]=u.borderColor,r["background-color"]=u.backgroundColor);t.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(r))))}function l(n,t,i){var r=n.parseStyle(n.getAttrib(i,"style"));r["border-color"]&&(t.borderColor=r["border-color"]);r["background-color"]&&(t.backgroundColor=r["background-color"]);t.style=n.serializeStyle(r)}function y(n,t,r){var u=n.parseStyle(n.getAttrib(t,"style"));i(r,function(n){u[n.name]=n.value});n.setAttrib(t,"style",n.serializeStyle(n.parseStyle(n.serializeStyle(u))))}var e=this;e.tableProps=function(){e.table(!0)};e.table=function(e){function g(){function e(n,t,i){if("TD"===n.tagName||"TH"===n.tagName)p.setStyle(n,t,i);else if(n.children)for(var r=0;r<n.children.length;r++)e(n.children[r],t,i)}var i;o(p,this);v=n.extend(v,this.toJSON());v["class"]===!1&&delete v["class"];r.undoManager.transact(function(){if(a||(a=r.plugins.table.insertTable(v.cols||1,v.rows||1)),r.dom.setAttribs(a,{style:v.style,"class":v["class"]}),r.settings.table_style_by_css){if(w=[],w.push({name:"border",value:v.border}),w.push({name:"border-spacing",value:f(v.cellspacing)}),y(p,a,w),p.setAttribs(a,{"data-mce-border-color":v.borderColor,"data-mce-cell-padding":v.cellpadding,"data-mce-border":v.border}),a.children)for(var n=0;n<a.children.length;n++)e(a.children[n],"border",v.border),e(a.children[n],"padding",f(v.cellpadding))}else r.dom.setAttribs(a,{border:v.border,cellpadding:v.cellpadding,cellspacing:v.cellspacing});p.getAttrib(a,"width")&&!r.settings.table_style_by_css?p.setAttrib(a,"width",u(v.width)):p.setStyle(a,"width",f(v.width));p.setStyle(a,"height",f(v.height));i=p.select("caption",a)[0];i&&!v.caption&&p.remove(i);!i&&v.caption&&(i=p.create("caption"),i.innerHTML=t.ie?" ":'<br data-mce-bogus="1"/>',a.insertBefore(i,a.firstChild));h(a);v.align&&r.formatter.apply("align"+v.align,{},a);r.focus();r.addVisual()})}function nt(n,t){function i(n,i){for(var u,r=0;r<i.length;r++)if(u=p.getStyle(i[r],t),"undefined"==typeof n&&(n=u),n!=u)return"";return n}var u,f=r.dom.select("td,th",n);return i(u,f)}var a,b,k,tt,d,w,p=r.dom,v={};e===!0?(a=p.getParent(r.selection.getStart(),"table"),a&&(v={width:u(p.getStyle(a,"width")||p.getAttrib(a,"width")),height:u(p.getStyle(a,"height")||p.getAttrib(a,"height")),cellspacing:u(p.getStyle(a,"border-spacing")||p.getAttrib(a,"cellspacing")),cellpadding:p.getAttrib(a,"data-mce-cell-padding")||p.getAttrib(a,"cellpadding")||nt(a,"padding"),border:p.getAttrib(a,"data-mce-border")||p.getAttrib(a,"border")||nt(a,"border"),borderColor:p.getAttrib(a,"data-mce-border-color"),caption:!!p.select("caption",a)[0],"class":p.getAttrib(a,"class")},i("left center right".split(" "),function(n){r.formatter.matchNode(a,"align"+n)&&(v.align=n)}))):(b={label:"Cols",name:"cols"},k={label:"Rows",name:"rows"});r.settings.table_class_list&&(v["class"]&&(v["class"]=v["class"].replace(/\s*mce\-item\-table\s*/g,"")),tt={name:"class",type:"listbox",label:"Class",values:c(r.settings.table_class_list,function(n){n.value&&(n.textStyle=function(){return r.formatter.getCssText({block:"table",classes:[n.value]})})})});d={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:r.settings.table_appearance_options!==!1?[b,k,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[b,k,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},tt]};r.settings.table_advtab!==!1?(l(p,v,a),r.windowManager.open({title:"Table properties",data:v,bodyType:"tabpanel",body:[{title:"General",type:"form",items:d},s(p)],onsubmit:g})):r.windowManager.open({title:"Table properties",data:v,body:d,onsubmit:g})};e.merge=function(n,t){r.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var i=this.toJSON();r.undoManager.transact(function(){n.merge(t,i.cols,i.rows)})}})};e.cell=function(){function w(){o(a,this);t=n.extend(t,this.toJSON());r.undoManager.transact(function(){i(y,function(n){r.dom.setAttribs(n,{scope:t.scope,style:t.style,"class":t["class"]});r.dom.setStyles(n,{width:f(t.width),height:f(t.height)});t.type&&n.nodeName.toLowerCase()!=t.type&&(n=a.rename(n,t.type));h(n);t.align&&r.formatter.apply("align"+t.align,{},n);v(n);t.valign&&r.formatter.apply("valign"+t.valign,{},n)});r.focus()})}var e,t,b,a=r.dom,y=[],p;(y=r.dom.select("td.mce-item-selected,th.mce-item-selected"),e=r.dom.getParent(r.selection.getStart(),"td,th"),!y.length&&e&&y.push(e),e=e||y[0])&&(t={width:u(a.getStyle(e,"width")||a.getAttrib(e,"width")),height:u(a.getStyle(e,"height")||a.getAttrib(e,"height")),scope:a.getAttrib(e,"scope"),"class":a.getAttrib(e,"class")},t.type=e.nodeName.toLowerCase(),i("left center right".split(" "),function(n){r.formatter.matchNode(e,"align"+n)&&(t.align=n)}),i("top middle bottom".split(" "),function(n){r.formatter.matchNode(e,"valign"+n)&&(t.valign=n)}),r.settings.table_cell_class_list&&(b={name:"class",type:"listbox",label:"Class",values:c(r.settings.table_cell_class_list,function(n){n.value&&(n.textStyle=function(){return r.formatter.getCssText({block:"td",classes:[n.value]})})})}),p={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},b]},r.settings.table_cell_advtab!==!1?(l(a,t,e),r.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:t,body:[{title:"General",type:"form",items:p},s(a)],onsubmit:w})):r.windowManager.open({title:"Cell properties",data:t,body:p,onsubmit:w}))};e.row=function(){function p(){var u,c,s;o(e,this);t=n.extend(t,this.toJSON());r.undoManager.transact(function(){var n=t.type;i(y,function(i){r.dom.setAttribs(i,{scope:t.scope,style:t.style,"class":t["class"]});r.dom.setStyles(i,{height:f(t.height)});n!=i.parentNode.nodeName.toLowerCase()&&(u=e.getParent(i,"table"),c=i.parentNode,s=e.select(n,u)[0],s||(s=e.create(n),u.firstChild?u.insertBefore(s,u.firstChild):u.appendChild(s)),s.appendChild(i),c.hasChildNodes()||e.remove(c));h(i);t.align&&r.formatter.apply("align"+t.align,{},i)});r.focus()})}var w,b,a,k,t,v,e=r.dom,y=[];w=r.dom.getParent(r.selection.getStart(),"table");b=r.dom.getParent(r.selection.getStart(),"td,th");i(w.rows,function(n){i(n.cells,function(t){if(e.hasClass(t,"mce-item-selected")||t==b)return(y.push(n),!1)})});a=y[0];a&&(t={height:u(e.getStyle(a,"height")||e.getAttrib(a,"height")),scope:e.getAttrib(a,"scope"),"class":e.getAttrib(a,"class")},t.type=a.parentNode.nodeName.toLowerCase(),i("left center right".split(" "),function(n){r.formatter.matchNode(a,"align"+n)&&(t.align=n)}),r.settings.table_row_class_list&&(k={name:"class",type:"listbox",label:"Class",values:c(r.settings.table_row_class_list,function(n){n.value&&(n.textStyle=function(){return r.formatter.getCssText({block:"tr",classes:[n.value]})})})}),v={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},k]},r.settings.table_row_advtab!==!1?(l(e,t,a),r.windowManager.open({title:"Row properties",data:t,bodyType:"tabpanel",body:[{title:"General",type:"form",items:v},s(e)],onsubmit:p})):r.windowManager.open({title:"Row properties",data:t,body:v,onsubmit:p}))}}});i("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(n,t,i,r,u,f,e,o){function h(u){function f(n){return function(){u.execCommand(n)}}function v(n,t){for(var o,r,i='<table id="__mce"><tbody>',f=0;t>f;f++){for(i+="<tr>",o=0;n>o;o++)i+="<td>"+(e.ie?" ":"<br>")+"<\/td>";i+="<\/tr>"}return i+="<\/tbody><\/table>",u.undoManager.transact(function(){u.insertContent(i);r=u.dom.get("__mce");u.dom.setAttrib(r,"id",null);u.dom.setAttribs(r,u.settings.table_default_attributes||{});u.dom.setStyles(r,u.settings.table_default_styles||{})}),r}function y(n,t){function i(){n.disabled(!u.dom.getParent(u.selection.getStart(),t));u.selection.selectorChanged(t,function(t){n.disabled(!t)})}u.initialized?i():u.on("init",i)}function p(){y(this,"table")}function o(){y(this,"td,th")}function b(){for(var n="",i,n='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',t=0;10>t;t++){for(n+="<tr>",i=0;10>i;i++)n+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+i)+'" href="#" data-mce-x="'+i+'" data-mce-y="'+t+'"><\/a><\/td>';n+="<\/tr>"}return n+="<\/table>",n+'<div class="mce-text-center" role="presentation">1 x 1<\/div>'}function w(n,t,i){var r,f,s,e,o,h=i.getEl().getElementsByTagName("table")[0],c=i.isRtl()||"tl-tr"==i.parent().rel;for(h.nextSibling.innerHTML=n+1+" x "+(t+1),c&&(n=9-n),f=0;10>f;f++)for(r=0;10>r;r++)e=h.rows[f].childNodes[r].firstChild,o=(c?r>=n:n>=r)&&t>=f,u.dom.toggleClass(e,"mce-active",o),o&&(s=e);return s.parentNode}var c,l=this,h=new r(u),a;u.settings.table_grid===!1?u.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:h.table}):u.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(n){n.aria&&(this.parent().hideAll(),n.stopImmediatePropagation(),h.table())},onshow:function(){w(0,0,this.menu.items()[0])},onhide:function(){var n=this.menu.items()[0].getEl().getElementsByTagName("a");u.dom.removeClass(n,"mce-active");u.dom.addClass(n[0],"mce-active")},menu:[{type:"container",html:b(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(n){var t,i,r=n.target;"A"==r.tagName.toUpperCase()&&(t=parseInt(r.getAttribute("data-mce-x"),10),i=parseInt(r.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(t=9-t),(t!==this.lastX||i!==this.lastY)&&(w(t,i,n.control),this.lastX=t,this.lastY=i))},onclick:function(n){var t=this;"A"==n.target.tagName.toUpperCase()&&(n.preventDefault(),n.stopPropagation(),t.parent().cancel(),u.undoManager.transact(function(){v(t.lastX+1,t.lastY+1)}),u.addVisual())}}]});u.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:p,onclick:h.tableProps});u.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:p,cmd:"mceTableDelete"});u.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:f("mceTableCellProps"),onPostRender:o},{text:"Merge cells",onclick:f("mceTableMergeCells"),onPostRender:o},{text:"Split cell",onclick:f("mceTableSplitCells"),onPostRender:o}]});u.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:f("mceTableInsertRowBefore"),onPostRender:o},{text:"Insert row after",onclick:f("mceTableInsertRowAfter"),onPostRender:o},{text:"Delete row",onclick:f("mceTableDeleteRow"),onPostRender:o},{text:"Row properties",onclick:f("mceTableRowProps"),onPostRender:o},{text:"-"},{text:"Cut row",onclick:f("mceTableCutRow"),onPostRender:o},{text:"Copy row",onclick:f("mceTableCopyRow"),onPostRender:o},{text:"Paste row before",onclick:f("mceTablePasteRowBefore"),onPostRender:o},{text:"Paste row after",onclick:f("mceTablePasteRowAfter"),onPostRender:o}]});u.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:f("mceTableInsertColBefore"),onPostRender:o},{text:"Insert column after",onclick:f("mceTableInsertColAfter"),onPostRender:o},{text:"Delete column",onclick:f("mceTableDeleteCol"),onPostRender:o}]});a=[];s("inserttable tableprops deletetable | cell row column".split(" "),function(n){a.push("|"==n?{text:"-"}:u.menuItems[n])});u.addButton("table",{type:"menubutton",title:"Table",menu:a});e.isIE||u.on("click",function(n){n=n.target;"TABLE"===n.nodeName&&(u.selection.select(n),u.nodeChanged())});l.quirks=new t(u);u.on("Init",function(){l.cellSelection=new i(u)});u.on("PreInit",function(){u.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(n,t){for(var i=n.length;i--;)n[i].attr(t,null)})});s({mceTableSplitCells:function(n){n.split()},mceTableMergeCells:function(n){var t;t=u.dom.getParent(u.selection.getStart(),"th,td");u.dom.select("td.mce-item-selected,th.mce-item-selected").length?n.merge():h.merge(n,t)},mceTableInsertRowBefore:function(n){n.insertRow(!0)},mceTableInsertRowAfter:function(n){n.insertRow()},mceTableInsertColBefore:function(n){n.insertCol(!0)},mceTableInsertColAfter:function(n){n.insertCol()},mceTableDeleteCol:function(n){n.deleteCols()},mceTableDeleteRow:function(n){n.deleteRows()},mceTableCutRow:function(n){c=n.cutRows()},mceTableCopyRow:function(n){c=n.copyRows()},mceTablePasteRowBefore:function(n){n.pasteRows(c,!0)},mceTablePasteRowAfter:function(n){n.pasteRows(c)},mceTableDelete:function(n){n.deleteTable()}},function(t,i){u.addCommand(i,function(){var i=new n(u);i&&(t(i),u.execCommand("mceRepaint"),l.cellSelection.clear())})});s({mceInsertTable:h.table,mceTableProps:function(){h.table(!0)},mceTableRowProps:h.row,mceTableCellProps:h.cell},function(n,t){u.addCommand(t,function(t,i){n(i)})});u.settings.table_tab_navigation!==!1&&u.on("keydown",function(t){var r,i,f;9==t.keyCode&&(r=u.dom.getParent(u.selection.getStart(),"th,td"),r&&(t.preventDefault(),i=new n(u),f=t.shiftKey?-1:1,u.undoManager.transact(function(){!i.moveRelIdx(r,f)&&f>0&&(i.insertRow(),i.refresh(),i.moveRelIdx(r,f))})))});l.insertTable=v}var s=u.each;o.add("table",h)})}(this);tinymce.PluginManager.add("template",function(n){function r(t){return function(){var i=n.settings.templates;"string"==typeof i?tinymce.util.XHR.send({url:i,success:function(n){t(tinymce.util.JSON.parse(n))}}):t(i)}}function u(t){function f(t){function f(t){var u,i;-1==t.indexOf("<html>")&&(u="",tinymce.each(n.contentCSS,function(t){u+='<link type="text/css" rel="stylesheet" href="'+n.documentBaseURI.toAbsolute(t)+'">'}),t="<!DOCTYPE html><html><head>"+u+"<\/head><body>"+t+"<\/body><\/html>");t=e(t,"template_preview_replace_values");i=r.find("iframe")[0].getEl().contentWindow.document;i.open();i.write(t);i.close()}var u=t.control.value();u.url?tinymce.util.XHR.send({url:u.url,success:function(n){i=n;f(i)}}):(i=u.content,f(i));r.find("#description")[0].text(t.control.value().description)}var r,i,u=[];return t&&0!==t.length?(tinymce.each(t,function(n){u.push({selected:!u.length,text:n.title,value:{url:n.url,content:n.content,description:n.description}})}),r=n.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:u,onselect:f}}]},{type:"label",name:"description",label:"Description",text:" "},{type:"iframe",flex:1,border:1}],onsubmit:function(){o(!1,i)},width:n.getParam("template_popup_width",600),height:n.getParam("template_popup_height",500)}),void r.find("listbox")[0].fire("select")):void n.windowManager.alert("No templates defined")}function i(t,i){function r(n,t){if(n=""+n,n.length<t)for(var i=0;i<t-n.length;i++)n="0"+n;return n}var u="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),e="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),o="January February March April May June July August September October November December".split(" ");return i=i||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+i.getFullYear()),t=t.replace("%y",""+i.getYear()),t=t.replace("%m",r(i.getMonth()+1,2)),t=t.replace("%d",r(i.getDate(),2)),t=t.replace("%H",""+r(i.getHours(),2)),t=t.replace("%M",""+r(i.getMinutes(),2)),t=t.replace("%S",""+r(i.getSeconds(),2)),t=t.replace("%I",""+((i.getHours()+11)%12+1)),t=t.replace("%p",""+(i.getHours()<12?"AM":"PM")),t=t.replace("%B",""+n.translate(o[i.getMonth()])),t=t.replace("%b",""+n.translate(e[i.getMonth()])),t=t.replace("%A",""+n.translate(f[i.getDay()])),t=t.replace("%a",""+n.translate(u[i.getDay()])),t=t.replace("%%","%")}function f(i){var u=n.dom,r=n.getParam("template_replace_values");t(u.select("*",i),function(n){t(r,function(t,i){u.hasClass(n,i)&&"function"==typeof r[i]&&r[i](n)})})}function e(i,r){return t(n.getParam(r),function(n,t){"function"!=typeof n&&(i=i.replace(new RegExp("\\{\\$"+t+"\\}","g"),n))}),i}function o(r,u){function c(n,t){return new RegExp("\\b"+t+"\\b","g").test(n.className)}var o,s,h=n.dom,l=n.selection.getContent();u=e(u,"template_replace_values");o=h.create("div",null,u);s=h.select(".mceTmpl",o);s&&s.length>0&&(o=h.create("div",null),o.appendChild(s[0].cloneNode(!0)));t(h.select("*",o),function(t){c(t,n.getParam("template_cdate_classes","cdate").replace(/\s+/g,"|"))&&(t.innerHTML=i(n.getParam("template_cdate_format",n.getLang("template.cdate_format"))));c(t,n.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=i(n.getParam("template_mdate_format",n.getLang("template.mdate_format"))));c(t,n.getParam("template_selected_content_classes","selcontent").replace(/\s+/g,"|"))&&(t.innerHTML=l)});f(o);n.execCommand("mceInsertContent",!1,o.innerHTML);n.addVisual()}var t=tinymce.each;n.addCommand("mceInsertTemplate",o);n.addButton("template",{title:"Insert template",onclick:r(u)});n.addMenuItem("template",{text:"Insert template",onclick:r(u),context:"insert"});n.on("PreProcess",function(r){var u=n.dom;t(u.select("div",r.node),function(r){u.hasClass(r,"mceTmpl")&&(t(u.select("*",r),function(t){u.hasClass(t,n.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=i(n.getParam("template_mdate_format",n.getLang("template.mdate_format"))))}),f(r))})})});tinymce.PluginManager.add("textcolor",function(n){function s(t){var i;return n.dom.getParents(n.selection.getStart(),function(n){var r;(r=n.style["forecolor"==t?"color":"background-color"])&&(i=r)}),i}function h(){for(var r=[],i=n.settings.textcolor_map||["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],t=0;t<i.length;t+=2)r.push({text:i[t+1],color:"#"+i[t]});return r}function i(){function l(n,t){var i="transparent"==n;return'<td class="mce-grid-cell'+(i?" mce-colorbtn-trans":"")+'"><div id="'+c+"-"+y+++'" data-mce-color="'+(n?n:"")+'" role="option" tabIndex="-1" style="'+(n?"background-color: "+n:"")+'" title="'+tinymce.translate(t)+'">'+(i?"&#215;":"")+"<\/div><\/td>"}var u,e,i,a,r,f,s,v=this,c=v._id,y=0;for(u=h(),u.push({text:tinymce.translate("No color"),color:"transparent"}),i='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',a=u.length-1,f=0;o>f;f++){for(i+="<tr>",r=0;t>r;r++)s=f*t+r,s>a?i+="<td><\/td>":(e=u[s],i+=l(e.color,e.text));i+="<\/tr>"}if(n.settings.color_picker_callback){for(i+='<tr><td colspan="'+t+'" class="mce-custom-color-btn"><div id="'+c+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+c+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+tinymce.translate("Custom...")+"<\/button><\/div><\/td><\/tr>",i+="<tr>",r=0;t>r;r++)i+=l("","Custom color");i+="<\/tr>"}return i+"<\/tbody><\/table>"}function r(t,i){n.undoManager.transact(function(){n.focus();n.formatter.apply(t,{value:i});n.nodeChanged()})}function u(t){n.undoManager.transact(function(){n.focus();n.formatter.remove(t,{value:null},null,!0);n.nodeChanged()})}function f(i){function o(n){f.hidePanel();f.color(n);r(f.settings.format,n)}function c(){f.hidePanel();f.resetColor();u(f.settings.format)}function h(n,t){n.style.background=t;n.setAttribute("data-mce-color",t)}var e,f=this.parent();tinymce.DOM.getParent(i.target,".mce-custom-color-btn")&&(f.hidePanel(),n.settings.color_picker_callback.call(n,function(n){for(var u,e=f.panel.getEl().getElementsByTagName("table")[0],r=tinymce.map(e.rows[e.rows.length-1].childNodes,function(n){return n.firstChild}),i=0;i<r.length&&(u=r[i],u.getAttribute("data-mce-color"));i++);if(i==t)for(i=0;t-1>i;i++)h(r[i],r[i+1].getAttribute("data-mce-color"));h(u,n);o(n)},s(f.settings.format)));e=i.target.getAttribute("data-mce-color");e?(this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),i.target.setAttribute("aria-selected",!0),this.lastId=i.target.id,"transparent"==e?c():o(e)):null!==e&&f.hidePanel()}function e(){var n=this;n._color?r(n.settings.format,n._color):u(n.settings.format)}var t,o;o=n.settings.textcolor_rows||5;t=n.settings.textcolor_cols||8;n.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:i,onclick:f},onclick:e});n.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:i,onclick:f},onclick:e})});tinymce.PluginManager.add("textpattern",function(n){function i(){return r&&(t.sort(function(n,t){return n.start.length>t.start.length?-1:n.start.length<t.start.length?1:0}),r=!1),t}function u(n){for(var r=i(),t=0;t<r.length;t++)if(0===n.indexOf(r[t].start)&&(!r[t].end||n.lastIndexOf(r[t].end)==n.length-r[t].end.length))return r[t]}function e(n,t,r){for(var u,e=i(),f=0;f<e.length;f++)if(u=e[f],u.end&&n.substr(t-u.end.length-r,u.end.length)==u.end)return u}function f(t){function p(){i=i.splitText(f);i.splitText(o-f-s);i.deleteData(0,r.start.length);i.deleteData(i.data.length-r.end.length,r.end.length)}var c,y,l,i,o,f,a,h,r,s,v;return c=n.selection,y=n.dom,c.isCollapsed()&&(l=c.getRng(!0),i=l.startContainer,o=l.startOffset,a=i.data,s=t?1:0,3==i.nodeType&&(r=e(a,o,s),r&&(f=Math.max(0,o-s),f=a.lastIndexOf(r.start,f-r.end.length-1),-1!==f&&(h=y.createRng(),h.setStart(i,f),h.setEnd(i,o-s),r=u(h.toString()),r&&r.end&&!(i.data.length<=r.start.length+r.end.length)))))?(v=n.formatter.get(r.format),v&&v[0].inline?(p(),n.formatter.apply(r.format,{},i),i):void 0):void 0}function o(){var f,l,o,i,s,h,c,t,a,r,e;if(f=n.selection,l=n.dom,f.isCollapsed()&&(c=l.getParent(f.getStart(),"p"))){for(a=new tinymce.dom.TreeWalker(c,c);s=a.next();)if(3==s.nodeType){i=s;break}if(i){if(t=u(i.data),!t)return;if(r=f.getRng(!0),o=r.startContainer,e=r.startOffset,i==o&&(e=Math.max(0,e-t.start.length)),tinymce.trim(i.data).length==t.start.length)return;t.format&&(h=n.formatter.get(t.format),h&&h[0].block&&(i.deleteData(0,t.start.length),n.formatter.apply(t.format,{},i),r.setStart(o,e),r.collapse(!0),f.setRng(r)));t.cmd&&n.undoManager.transact(function(){i.deleteData(0,t.start.length);n.execCommand(t.cmd)})}}}function s(){var i,t;t=f();t&&(i=n.dom.createRng(),i.setStart(t,t.data.length),i.setEnd(t,t.data.length),n.selection.setRng(i));o()}function h(){var t,e,i,r,u;t=f(!0);t&&(u=n.dom,e=t.data.slice(-1),/[\u00a0 ]/.test(e)&&(t.deleteData(t.data.length-1,1),i=u.doc.createTextNode(e),t.nextSibling?u.insertAfter(i,t.nextSibling):t.parentNode.appendChild(i),r=u.createRng(),r.setStart(i,1),r.setEnd(i,1),n.selection.setRng(r)))}var t,r=!0;t=n.settings.textpattern_patterns||[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}];n.on("keydown",function(n){13!=n.keyCode||tinymce.util.VK.modifierPressed(n)||s()},!0);n.on("keyup",function(n){32!=n.keyCode||tinymce.util.VK.modifierPressed(n)||h()});this.getPatterns=i;this.setPatterns=function(n){t=n;r=!0}});tinymce.PluginManager.add("visualblocks",function(n,t){function u(){var t=this;t.active(r);n.on("VisualBlocks",function(){t.active(n.dom.hasClass(n.getBody(),"mce-visualblocks"))})}var i,f,r;window.NodeList&&(n.addCommand("mceVisualBlocks",function(){var e,u=n.dom;i||(i=u.uniqueId(),e=u.create("link",{id:i,rel:"stylesheet",href:t+"/css/visualblocks.css"}),n.getDoc().getElementsByTagName("head")[0].appendChild(e));n.on("PreviewFormats AfterPreviewFormats",function(t){r&&u.toggleClass(n.getBody(),"mce-visualblocks","afterpreviewformats"==t.type)});u.toggleClass(n.getBody(),"mce-visualblocks");r=n.dom.hasClass(n.getBody(),"mce-visualblocks");f&&f.active(u.hasClass(n.getBody(),"mce-visualblocks"));n.fire("VisualBlocks")}),n.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:u}),n.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:u,selectable:!0,context:"view",prependToContext:!0}),n.on("init",function(){n.settings.visualblocks_default_state&&n.execCommand("mceVisualBlocks",!1,null,{skip_focus:!0})}),n.on("remove",function(){n.dom.removeClass(n.getBody(),"mce-visualblocks")}))});tinymce.PluginManager.add("visualchars",function(n){function i(i){function y(n){return'<span data-mce-bogus="1" class="mce-'+e[n]+'">'+n+"<\/span>"}function p(){var n,t="";for(n in e)t+=n;return new RegExp("["+t+"]","g")}function w(){var t,n="";for(t in e)n&&(n+=","),n+="span.mce-"+e[t];return n}var h,f,r,o,c,l,e,s,a=n.getBody(),v=n.selection;if(e={" ":"nbsp","­":"shy"},t=!t,u.state=t,n.fire("VisualChars",{state:t}),s=p(),i&&(l=v.getBookmark()),t)for(f=[],tinymce.walk(a,function(n){3==n.nodeType&&n.nodeValue&&s.test(n.nodeValue)&&f.push(n)},"childNodes"),r=0;r<f.length;r++){for(o=f[r].nodeValue,o=o.replace(s,y),c=n.dom.create("div",null,o);h=c.lastChild;)n.dom.insertAfter(h,f[r]);n.dom.remove(f[r])}else for(f=n.dom.select(w(),a),r=f.length-1;r>=0;r--)n.dom.remove(f[r],1);v.moveToBookmark(l)}function r(){var t=this;n.on("VisualChars",function(n){t.active(n.state)})}var t,u=this;n.addCommand("mceVisualChars",i);n.addButton("visualchars",{title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:r});n.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:r,selectable:!0,context:"view",prependToContext:!0});n.on("beforegetcontent",function(n){t&&"raw"!=n.format&&!n.draft&&(t=!0,i(!1))})});tinymce.PluginManager.add("wordcount",function(n){function i(){n.theme.panel.find("#wordcount").text(["Words: {0}",t.getCount()])}var r,u,t=this;r=n.getParam("wordcount_countregex",/[\w\u2019\x27\-\u00C0-\u1FFF]+/g);u=n.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g);n.on("init",function(){var r=n.theme.panel&&n.theme.panel.find("#statusbar")[0];r&&window.setTimeout(function(){r.insert({type:"label",name:"wordcount",text:["Words: {0}",t.getCount()],classes:"wordcount",disabled:n.settings.readonly},0);n.on("setcontent beforeaddundo",i);n.on("keyup",function(n){32==n.keyCode&&i()})},0)});t.getCount=function(){var t=n.getContent({format:"raw"}),f=0,i;return t&&(t=t.replace(/\.\.\./g," "),t=t.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," "),t=t.replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3").replace(/&.+?;/g," "),t=t.replace(u,""),i=t.match(r),i&&(f=i.length)),f}});tinymce.ThemeManager.add("modern",function(n){function o(){function f(r){var f,o=[];if(r)return e(r.split(/[ ,]/),function(i){function e(){var t=n.selection;"bullist"==r&&t.selectorChanged("ul > li",function(n,t){for(var r,u=t.parents.length;u--&&(r=t.parents[u].nodeName,"OL"!=r&&"UL"!=r););i.active(n&&"UL"==r)});"numlist"==r&&t.selectorChanged("ol > li",function(n,t){for(var r,u=t.parents.length;u--&&(r=t.parents[u].nodeName,"OL"!=r&&"UL"!=r););i.active(n&&"OL"==r)});i.settings.stateSelector&&t.selectorChanged(i.settings.stateSelector,function(n){i.active(n)},!0);i.settings.disabledStateSelector&&t.selectorChanged(i.settings.disabledStateSelector,function(n){i.disabled(n)})}var r;"|"==i?f=null:u.has(i)?(i={type:i},t.toolbar_items_size&&(i.size=t.toolbar_items_size),o.push(i),f=null):(f||(f={type:"buttongroup",items:[]},o.push(f)),n.buttons[i]&&(r=i,i=n.buttons[r],"function"==typeof i&&(i=i()),i.type=i.type||"button",t.toolbar_items_size&&(i.size=t.toolbar_items_size),i=u.create(i),f.items.push(i),n.initialized?e():n.on("init",e)))}),i.push({type:"toolbar",layout:"flow",items:o}),!0}var i=[],r;if(tinymce.isArray(t.toolbar)){if(0===t.toolbar.length)return;tinymce.each(t.toolbar,function(n,i){t["toolbar"+(i+1)]=n});delete t.toolbar}for(r=1;10>r&&f(t["toolbar"+r]);r++);return i.length||t.toolbar===!1||f(t.toolbar||y),i.length?{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:i}:void 0}function s(){function s(t){var i;return"|"==t?{text:"|"}:i=n.menuItems[t]}function l(i){var o,f,r,h,l,u;if(l=tinymce.makeMap((t.removed_menuitems||"").split(/[ ,]/)),t.menu?(f=t.menu[i],h=!0):f=c[i],f){for(o={text:f.title},r=[],e((f.items||"").split(/[ ,]/),function(n){var t=s(n);t&&!l[n]&&r.push(s(n))}),h||e(n.menuItems,function(n){n.context==i&&("before"==n.separator&&r.push({text:"|"}),n.prependToContext?r.unshift(n):r.push(n),"after"==n.separator&&r.push({text:"|"}))}),u=0;u<r.length;u++)"|"==r[u].text&&(0===u||u==r.length-1)&&r.splice(u,1);if(o.menu=r,!o.menu.length)return null}return o}var r,h=[],f=[],o,u,i;if(t.menu)for(r in t.menu)f.push(r);else for(r in c)f.push(r);for(o="string"==typeof t.menubar?t.menubar.split(/[ ,]/):f,u=0;u<o.length;u++)i=o[u],i=l(i),i&&h.push(i);return h}function h(t){function i(n){var i=t.find(n)[0];i&&i.focus(!0)}n.shortcuts.add("Alt+F9","",function(){i("menubar")});n.shortcuts.add("Alt+F10","",function(){i("toolbar")});n.shortcuts.add("Alt+F11","",function(){i("elementpath")});t.on("cancel",function(){n.focus()})}function f(i,u){function o(n){return{width:n.clientWidth,height:n.clientHeight}}var e,f,s,h;e=n.getContainer();f=n.getContentAreaContainer().firstChild;s=o(e);h=o(f);null!==i&&(i=Math.max(t.min_width||100,i),i=Math.min(t.max_width||65535,i),r.setStyle(e,"width",i+(s.width-h.width)),r.setStyle(f,"width",i));u=Math.max(t.min_height||100,u);u=Math.min(t.max_height||65535,u);r.setStyle(f,"height",u);n.fire("ResizeEditor")}function l(t,r){var u=n.getContentAreaContainer();i.resizeTo(u.clientWidth+t,u.clientHeight+r)}function a(f){function v(){var t,i;if(e&&e.moveRel&&e.visible()&&!e._fixed){var u=n.selection.getScrollContainer(),f=n.getBody(),o=0,s=0;u&&(t=r.getPos(f),i=r.getPos(u),o=Math.max(0,i.x-t.x),s=Math.max(0,i.y-t.y));e.fixed(!1).moveRel(f,n.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,s)}}function l(){e&&(e.show(),v(),r.addClass(n.getBody(),"mce-edit-focus"))}function y(){e&&(e.hide(),r.removeClass(n.getBody(),"mce-edit-focus"))}function a(){return e?void(e.visible()||l()):(e=i.panel=u.create({type:c?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!c,border:1,items:[t.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:s()},o()]}),n.fire("BeforeRenderUI"),e.renderTo(c||document.body).reflow(),h(e),l(),n.on("nodeChange",v),n.on("activate",l),n.on("deactivate",y),void n.nodeChanged())}var e,c;return t.fixed_toolbar_container&&(c=r.select(t.fixed_toolbar_container)[0]),t.content_editable=!0,n.on("focus",function(){f.skinUiCss?tinymce.DOM.styleSheetLoader.load(f.skinUiCss,a,a):a()}),n.on("blur hide",y),n.on("remove",function(){e&&(e.remove(),e=null)}),f.skinUiCss&&tinymce.DOM.styleSheetLoader.load(f.skinUiCss),{}}function v(r){var e,l,c;return r.skinUiCss&&tinymce.DOM.loadCSS(r.skinUiCss),e=i.panel=u.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[t.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:s()},o(),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),t.resize!==!1&&(l={type:"resizehandle",direction:t.resize,onResizeStart:function(){var t=n.getContentAreaContainer().firstChild;c={width:t.clientWidth,height:t.clientHeight}},onResize:function(n){"both"==t.resize?f(c.width+n.deltaX,c.height+n.deltaY):f(null,c.height+n.deltaY)}}),t.statusbar!==!1&&e.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},l]}),t.readonly&&e.find("*").disabled(!0),n.fire("BeforeRenderUI"),e.renderBefore(r.targetNode).reflow(),t.width&&tinymce.DOM.setStyle(e.getEl(),"width",t.width),n.on("remove",function(){e.remove();e=null}),h(e),{iframeContainer:e.find("#iframe")[0].getEl(),editorContainer:e.getEl()}}var i=this,t=n.settings,u=tinymce.ui.Factory,e=tinymce.each,r=tinymce.DOM,c={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},y="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";i.renderUI=function(r){var f=t.skin!==!1?t.skin||"lightgray":!1,u;return f&&(u=t.skin_url,u=u?n.documentBaseURI.toAbsolute(u):tinymce.baseURL+"/skins/"+f,r.skinUiCss=tinymce.Env.documentMode<=7?u+"/skin.ie7.min.css":u+"/skin.min.css",n.contentCSS.push(u+"/content"+(n.inline?".inline":"")+".min.css")),n.on("ProgressState",function(n){i.throbber=i.throbber||new tinymce.ui.Throbber(i.panel.getEl("body"));n.state?i.throbber.show(n.time):i.throbber.hide()}),t.inline?a(r):v(r)};i.resizeTo=f;i.resizeBy=l});
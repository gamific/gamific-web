function UpdateResults(){var n=$("#EndDate").val(),t=$("#InitialDate").val();$("#div-cards").empty();$.ajax({url:"/public/dashboard/buscarResultados/",async:!0,data:{InitialDate:t,EndDate:n,PlayerId:$("#dropDownWorkers").val(),TeamId:$("#dropDownTeams").val(),workerTypeId:$("#dropDownWorkerTypes").val()},type:"GET",success:function(n){var t=$.parseJSON(n),i,r;$("#div-cards").empty();for(i in t)r="card card-greensea hover",t[i].Result<t[i].Goal/10*3?r="card card-red hover":t[i].Result<=t[i].Goal&&(r="card card-orange hover"),$("#div-cards").append("<div class='card-container col-lg-3 col-md-3 col-sm-6'><div class='"+r+"'><div class='front'><div class='media'><span class='pull-left'><i class='fa "+t[i].MetricIcon+" media-object'><\/i><\/span><div class='media-body'><small>"+t[i].MetricName+"<\/small><br/><h3 style='padding-right:5px;float:left' class='media-heading animate-number' data-value='"+t[i].Result+"' data-animation-duration='1500'>"+t[i].Result+"<\/h3><p style='padding-top:5px'><i style='font-size:1.2em' class='fa "+t[i].MetricIcon+"'><\/i><\/p><h3 style='padding-right:5px;float:left' class='media-heading animate-number' data-value='"+t[i].Points+"' data-animation-duration='1500'>"+t[i].Points+"<\/h3><p style='padding-top:5px'>pontos<\/p><h3 style='padding-right:5px;float:left' class='media-heading animate-number' data-value='"+t[i].Goal+"' data-animation-duration='1500'>"+t[i].Goal+"<\/h3><p style='padding-top:5px'>meta<\/p><\/div><\/div><\/div><div class='back'><a href='/public/dashboard/detalhes/"+t[i].MetricId+"/"+$("#dropDownTeams").val()+"/"+$("#dropDownWorkers").val()+"/"+$("#dropDownWorkerTypes").val()+"'><i class='fa fa-bar-chart-o fa-4x'><\/i><span>Detalhes<\/span><\/a><\/div><\/div><\/div>");$(".card.hover").hover(function(){$(this).addClass("flip")},function(){$(this).removeClass("flip")})}})}function GetMetrics(){$.ajax({url:"/public/dashboard/buscarMetricas/"+$("#dropDownTeams").val(),async:!0,type:"GET",success:function(n){var t=$.parseJSON(n),i;$("#metrics").empty();t.length>0&&$("#metrics").append("<li class='title'><h5>Comparativo:<\/h5><\/li>");for(i in t)$("#metrics").append("<li><input type='checkbox' value='"+t[i].id+"' class='checkbox-div' id='checkbox' name='checkbox["+i+"]' onchange='FilterByMetric()' /><span style='color:white'>"+t[i].metricName+"<\/span><\/li>")}})}function FilterByMetric(){showLoading();window.setTimeout(function(){hideLoading()},300)}function showLoading(){document.getElementById("chartLoading").style.display="block";document.getElementById("metrics").style.display="none"}function hideLoading(){document.getElementById("chartLoading").style.display="none";document.getElementById("metrics").style.display="block"}function LoadMetricResultsDataTable(n,t,i,r){$("#MetricResultsDataTable").dataTable({serverSide:!0,ajax:"/public/dashboard/resultadosMetrica/ "+n+"/"+t+"/"+i+"/"+r,processing:!0,pagingType:"simple",scrollY:"300px",scrollCollapse:!0,deferRender:!0,lengthChange:!1,language:{emptyTable:"NÃ£o foram encontrados resultados.",paginate:{previous:'<i class="fa fa-angle-left"><\/i>',next:'<i class="fa fa-angle-right"><\/i>'}},dom:'<"newtoolbar">frtip',fnServerParams:function(){},columnDefs:[{width:"15%",targets:0,orderable:!0,searchable:!0},{width:"60%",targets:1,orderable:!1,serchable:!1},{width:"15%",targets:2,orderable:!1,serchable:!1},{width:"10%",targets:3,orderable:!1,serchable:!1,render:function(n){return"<a class='fa fa-pencil' onclick='showEntityModal(this); return false;' href='/public/dashboard/editar/"+n+"' title='Editar resultado.'> <\/a> &nbsp; <a class='fa fa-remove' href='#' onclick='Remove("+n+");' title='Remover resultado.'> <\/a>"}}]})}function Remove(n){$.ajax({url:"/public/dashboard/remover/"+n,async:!1,type:"POST",success:function(){window.location.reload}});window.location.reload()}function onSucessSaveResult(){verifyErrors()}function onFailureSaveResult(){}$("#dropDownWorkerTypes").change(function(){$("#dropDownTeams").empty();$("#dropDownWorkers").empty();$("#dropDownTeams").append($("<option value='0' selected='selected'>Todos<\/option>"));$("#dropDownWorkers").append($("<option value='0' selected='selected'>Todos<\/option>"));UpdateResults();$(this).val()!="0"&&$.ajax({url:"/public/dashboard/buscarTimes",async:!0,type:"GET",data:{workerTypeId:$(this).val()},success:function(n){for(var i=JSON.parse(n),t=0;t<i.length;t++)$("#dropDownTeams").append($("<option value='"+i[t].id+"'>"+i[t].teamName+"<\/option>"))}})});$("#dropDownTeams").change(function(){$("#dropDownWorkers").empty();$("#metrics").empty();$("#dropDownWorkers").append($("<option value='0' selected='selected'>Todos<\/option>"));UpdateResults();$(this).val()!="0"&&$.ajax({url:"/public/dashboard/buscarJogadores",async:!0,type:"GET",data:{teamId:$(this).val()},success:function(n){for(var i=JSON.parse(n),t=0;t<i.length;t++)$("#dropDownWorkers").append($("<option value='"+i[t].IdWorker+"'>"+i[t].Name+"<\/option>"))}})});$("#dropDownWorkers").change(function(){UpdateResults()});$("#EndDate").datepicker({language:"pt-BR",changeMonth:!0,showOtherMonths:!0,selectOtherMonths:!0,selectOtherYears:!0,changeYear:!0,dateformat:"dd/MM/yyyy"}).on("change",function(){$(".datepicker").hide();var n=$(this).val().split("/"),t=$("#InitialDate").val().split("/"),i=new Date(t[2],t[1],t[0]),r=new Date(n[2],n[1],n[0]);i>r&&$(this).val($("#InitialDate").val())});$("#InitialDate").datepicker({language:"pt-BR",changeMonth:!0,showOtherMonths:!0,selectOtherMonths:!0,selectOtherYears:!0,changeYear:!0,dateformat:"dd/MM/yyyy"}).on("change",function(){$(".datepicker").hide();var n=$(this).val().split("/"),t=$("#EndDate").val().split("/"),i=new Date(n[2],n[1],n[0]),r=new Date(t[2],t[1],t[0]);i>r&&$(this).val($("#EndDate").val())});
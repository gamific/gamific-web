function loadAssociatePlayersDataTable(){$("#associatePlayersDataTable").dataTable({serverSide:!0,ajax:"/admin/equipes/carregarJogadores/"+$("#TeamId").val()+"/"+$("#Count").val()+"/"+$("#dropDownWorkerTypes").val(),scrollY:"300px",ordering:!0,processing:!0,scrollCollapse:!0,deferRender:!0,lengthChange:!1,language:{emptyTable:"N�o foram encontrados resultados.",paginate:{previous:'<i class="fa fa-angle-left"><\/i>',next:'<i class="fa fa-angle-right"><\/i>'}},dom:'<"top">rt<"bottom"ip><"clear">',fnServerParams:function(){},columnDefs:[{width:"10%",targets:0,searchable:!1,orderable:!1,render:function(n){var t="";return checkedMap.get(n)&&(t="checked"),"<input type='checkbox' class='workersIdList' onchange='checkBoxChange(this)' value='"+n+"' + "+t+">"}},{width:"30%",targets:1,orderable:!0,searchable:!0},{width:"30%",targets:2,orderable:!0,searchable:!0,render:function(n){return n&&(render=n.substr(0,3)+"."+n.substr(3,3)+"."+n.substr(6,3)+"-"+n.substr(9,2)),render}},{width:"30%",targets:3,orderable:!0,searchable:!0}]})}function loadPlayersDataTable(){$("#playersDataTable").dataTable({serverSide:!0,ajax:"/admin/equipes/jogadores/"+$("#CurrentTeam").val(),scrollY:"300px",ordering:!0,processing:!0,scrollCollapse:!0,deferRender:!0,lengthChange:!1,language:{emptyTable:"N�o foram encontrados resultados.",paginate:{previous:'<i class="fa fa-angle-left"><\/i>',next:'<i class="fa fa-angle-right"><\/i>'}},dom:'<"top">rt<"bottom"ip><"clear">',fnServerParams:function(n){n.search.value+=""},columnDefs:[{width:"30%",targets:0,orderable:!0,searchable:!0,render:function(n){return n.split(";")[0]+"<img src='https://s3.amazonaws.com/gamific-prd/images/logos/empresas/logo-"+n.split(";")[1]+"?cache=@Html.Raw(DateTime.Now.Millisecond)' style='width: 48px !important; height: 48px !important; border-radius:100%; float: left; margin-right: 10px;' />"}},{width:"20%",targets:1,orderable:!0,searchable:!0,render:function(n){return n&&(render=n.substr(0,3)+"."+n.substr(3,3)+"."+n.substr(6,3)+"-"+n.substr(9,2)),render}},{width:"20%",targets:2,orderable:!0,searchable:!0},{width:"20%",targets:3,orderable:!0,searchable:!0},{width:"10%",targets:4,searchable:!1,orderable:!1,render:function(n){return"<a class='fa fa-remove' href='#' onclick='removeClickAssociation(\""+n+"\")' title='Remover Associa��o.'> <\/a>"}}]})}function loadTeamsDataTable(){$("#teamDataTable").dataTable({serverSide:!0,ajax:"/admin/equipes/search/",scrollY:"300px",ordering:!0,processing:!0,scrollCollapse:!0,deferRender:!0,lengthChange:!1,language:{emptyTable:"N�o foram encontrados resultados.",paginate:{previous:'<i class="fa fa-angle-left"><\/i>',next:'<i class="fa fa-angle-right"><\/i>'}},dom:'<"top">rt<"bottom"ip><"clear">',columnDefs:[{targets:0,width:"40%",orderable:!1,render:function(n){return n.split(";")[0]+"<img src='https://s3.amazonaws.com/gamific-prd/images/logos/empresas/logo-"+n.split(";")[1]+"?cache=@Html.Raw(DateTime.Now.Millisecond)' style='width: 48px !important; height: 48px !important; border-radius:100%; float: left; margin-right: 10px;' />"}},{targets:1,width:"50%",orderable:!1},{targets:2,width:"10%",orderable:!1,searchable:!1,render:function(n){var t="<a class='fa fa-plus' href='/admin/equipes/detalheEquipe/"+n+"' title='Cadastrar Jogadores para Equipe.'> <\/a> &nbsp;";return t+(" <a class='fa fa-pencil' onclick='showEntityModal(this); return false' href='/admin/equipes/editar/"+n+" 'onclick='removeClickTeam(\""+n+"\")' title='Editar Equipe.'> <\/a> &nbsp; <a class='fa fa-remove'  href='#' onclick='removeClickTeam(\""+n+"\")' title='Remover Equipe.'> <\/a>")}}]})}function saveAssociations(){var n=[];checkedMap.forEach(function(t,i){n.push(i)});$.ajax({url:"/admin/equipes/salvarAssociacoes/",async:!0,type:"POST",data:{workerTypeId:$("#dropDownWorkerTypes").val(),workersId:n,teamId:$("#CurrentTeam").val()},success:function(){alertMessage("Funcionarios adicionados a equipe com sucesso.","success");$("#playersDataTable").dataTable().fnDestroy();loadPlayersDataTable()},error:function(){alertMessage("Houve um erro ao remover equipe.","danger")}})}function dropDownChange(){checkedMap.clear();$.ajax({url:"/admin/equipes/obterQuantidadeParaAssociar/"+$("#dropDownWorkerTypes").val(),async:!1,type:"GET",success:function(n){var t=JSON.parse(n);$("#Count").val(t);$("#associatePlayersDataTable").dataTable().fnDestroy();loadAssociatePlayersDataTable()}})}function removeClickAssociation(n){$.ajax({url:"/admin/equipes/removerAssociacao/"+n+"/"+$("#CurrentTeam").val(),async:!0,type:"POST",success:function(){alertMessage("Funcionario removido da equipe com sucesso.","success");$("#playersDataTable").dataTable().fnDestroy();loadPlayersDataTable()},error:function(){alertMessage("Houve um erro ao remover equipe.","danger")}})}function removeClickTeam(n){$.ajax({url:"/admin/equipes/remover/"+n,async:!0,type:"POST",success:function(){alertMessage("Funcionario removido da equipe com sucesso.","success");$("#teamDataTable").dataTable().fnDestroy();loadTeamsDataTable()},error:function(){alertMessage("Houve um erro ao remover equipe.","danger")}})}function checkBoxChange(n){$(n).is(":checked")==!1?checkedMap.delete($(n).val()):checkedMap.set($(n).val(),$(n).is(":checked"))}function submitCreateTeam(){var n=new FormData($("#formCreateTeam")[0]);$.ajax({url:"/admin/equipes/salvar/",type:"POST",data:n,async:!0,processData:!1,contentType:!1,cache:!1,dataType:"json",success:function(n){n.Success==!0?($("#teamDataTable").dataTable().fnDestroy(),loadTeamsDataTable(),alertMessage("Equipe adicionada com sucesso.","success")):alertMessage("N�o foi possivel adicionar esta equipe.","danger")},error:function(){$("#teamDataTable").dataTable().fnDestroy();loadTeamsDataTable();alertMessage("Ocorreu um erro ao adicionar esta equipe.","danger")}})}var checkedMap=new Map;loadPlayersDataTable();loadTeamsDataTable();